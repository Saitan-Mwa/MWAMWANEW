--// Key System UI
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local KeyGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
KeyGui.Name = "KeySystem"
KeyGui.ResetOnSpawn = false

-- Use ImageLabel as background
local Frame = Instance.new("ImageLabel", KeyGui)
Frame.Size = UDim2.new(0, 300, 0, 150)
Frame.Position = UDim2.new(0.5, -150, 0.5, -75)
Frame.Image = "rbxassetid://135468920313973" 
Frame.BackgroundTransparency = 1 
Frame.ScaleType = Enum.ScaleType.Stretch
Frame.Active = true
Frame.Draggable = true

-- Optional corner radius
local UICorner = Instance.new("UICorner", Frame)
UICorner.CornerRadius = UDim.new(0, 8)

-- Title
local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.Text = "MONSY MENU"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16

-- TextBox
local TextBox = Instance.new("TextBox", Frame)
TextBox.PlaceholderText = "Enter Key Here"
TextBox.Size = UDim2.new(0.8, 0, 0, 40)
TextBox.Position = UDim2.new(0.1, 0, 0.35, 0)
TextBox.Text = ""
TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
TextBox.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
TextBox.Font = Enum.Font.Gotham
TextBox.TextSize = 14

local UICorner2 = Instance.new("UICorner", TextBox)
UICorner2.CornerRadius = UDim.new(0, 6)

-- Submit Button
local Submit = Instance.new("TextButton", Frame)
Submit.Size = UDim2.new(0.8, 0, 0, 35)
Submit.Position = UDim2.new(0.1, 0, 0.7, 0)
Submit.Text = "Submit"
Submit.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Submit.TextColor3 = Color3.fromRGB(255, 255, 255)
Submit.Font = Enum.Font.GothamBold
Submit.TextSize = 14

local UICorner3 = Instance.new("UICorner", Submit)
UICorner3.CornerRadius = UDim.new(0, 6)

--// Key Logic
local correctKey = "MONSY"

--=== Begin Embedded GUI Script ===--
local function runGUI()
--// Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local SoundService = game:GetService("SoundService")

--// Main GUI
local gui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
gui.Name = "KupalinoGUI"
gui.ResetOnSpawn = false
gui.Enabled = false -- Hidden until after loading screen

--// Loading Screen (AMARI-style) for Roblox
--// Drop this LocalScript in StarterPlayerScripts (or StarterGui)
--// Set your center image/animation asset id here:
local ASSET_ID = "rbxassetid://135468920313973"  -- fixed asset id format

-- ========= Helpers =========
local Players            = game:GetService("Players")
local TweenService       = game:GetService("TweenService")
local UserInputService   = game:GetService("UserInputService")
local Lighting           = game:GetService("Lighting")
local RunService         = game:GetService("RunService")

local LP = Players.LocalPlayer
local startClock = os.clock()

local function color3(r,g,b) return Color3.fromRGB(r,g,b) end
local YELLOW = color3(255, 215, 64)
local DIM_YELLOW = color3(200, 170, 40)
local BLACK  = color3(8, 8, 8)
local GREY   = color3(25,25,25)
local WHITE  = color3(240,240,240)

local function stroke(inst, thickness, color, transparency)
	local s = Instance.new("UIStroke")
	s.Thickness = thickness or 1.5
	s.Color = color or Color3.new(0,0,0)
	s.Transparency = transparency or 0
	s.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	s.Parent = inst
	return s
end

local function corner(inst, radiusUDim)
	local c = Instance.new("UICorner")
	c.CornerRadius = radiusUDim or UDim.new(0,12)
	c.Parent = inst
	return c
end

local function blurOn(intensity)
	local blur = Lighting:FindFirstChild("LoadingBlur")
	if not blur then
		blur = Instance.new("BlurEffect")
		blur.Name = "LoadingBlur"
		blur.Size = 0
		blur.Parent = Lighting
	end
	TweenService:Create(blur, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = intensity}):Play()
	return blur
end

-- ========= Root GUI =========
local loadingGui = Instance.new("ScreenGui")
loadingGui.Name = "AMARI_Loading"
loadingGui.IgnoreGuiInset = true
loadingGui.ResetOnSpawn = false
loadingGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
loadingGui.Parent = LP:WaitForChild("PlayerGui")

local root = Instance.new("Frame")
root.BackgroundColor3 = BLACK
root.Size = UDim2.fromScale(1,1)
root.Parent = loadingGui

-- subtle vignette
local vignette = Instance.new("ImageLabel")
vignette.BackgroundTransparency = 1
vignette.Image = "rbxassetid://4576653085" -- generic radial gradient
vignette.ImageTransparency = 0.25
vignette.ScaleType = Enum.ScaleType.Fit
vignette.Size = UDim2.fromScale(1.2,1.2)
vignette.Position = UDim2.fromScale(-0.1,-0.1)
vignette.Parent = root

-- animated particle dots
local particleLayer = Instance.new("Frame")
particleLayer.BackgroundTransparency = 1
particleLayer.Size = UDim2.fromScale(1,1)
particleLayer.Parent = root

local particles = {}
local PARTICLE_COUNT = 40
math.randomseed(tick()%1*1e7)
for i=1, PARTICLE_COUNT do
	local dot = Instance.new("Frame")
	dot.BackgroundColor3 = color3(200,200,200)
	dot.BackgroundTransparency = 0.85
	dot.Size = UDim2.fromOffset(math.random(2,4), math.random(2,4))
	dot.Position = UDim2.fromScale(math.random(), math.random())
	dot.ZIndex = 0
	corner(dot, UDim.new(1,0))
	dot.Parent = particleLayer
	particles[#particles+1] = {
		inst = dot,
		vel  = Vector2.new((math.random()-0.5)*0.02, (math.random()-0.5)*0.02),
	}
end

RunService.RenderStepped:Connect(function(dt)
	for _, p in ipairs(particles) do
		local pos = p.inst.Position
		local nx = pos.X.Scale + p.vel.X * dt
		local ny = pos.Y.Scale + p.vel.Y * dt
		if nx < -0.02 or nx > 1.02 then p.vel = Vector2.new(-p.vel.X, p.vel.Y) end
		if ny < -0.02 or ny > 1.02 then p.vel = Vector2.new(p.vel.X, -p.vel.Y) end
		p.inst.Position = UDim2.fromScale(math.clamp(nx, -0.02, 1.02), math.clamp(ny, -0.02, 1.02))
	end
end)

-- top banner text
local topText = Instance.new("TextLabel")
topText.BackgroundTransparency = 1
topText.Text = "MONSY MENU"
topText.Font = Enum.Font.GothamBold
topText.TextScaled = true
topText.TextColor3 = YELLOW
topText.Size = UDim2.new(1, -80, 0, 46)
topText.Position = UDim2.fromOffset(40, 30)
topText.TextXAlignment = Enum.TextXAlignment.Center
topText.TextYAlignment = Enum.TextYAlignment.Center
topText.Parent = root
stroke(topText, 1, BLACK, 0.35)

-- center card
local card = Instance.new("Frame")
card.BackgroundColor3 = GREY
card.Size = UDim2.fromOffset(720, 340)
card.AnchorPoint = Vector2.new(0.5,0)
card.Position = UDim2.fromScale(0.5, 0.16)
card.Parent = root
corner(card, UDim.new(0,14))
stroke(card, 1.5, color3(40,40,40), 0.25)

-- image / animation in the card
local hero = Instance.new("ImageLabel")
hero.BackgroundTransparency = 1
hero.Size = UDim2.fromScale(1,1)
hero.Image = ASSET_ID
hero.ScaleType = Enum.ScaleType.Crop
hero.Parent = card

-- badge + timer row
local badgeRow = Instance.new("Frame")
badgeRow.BackgroundTransparency = 1
badgeRow.Size = UDim2.fromOffset(300, 40)
badgeRow.AnchorPoint = Vector2.new(0.5,0)
badgeRow.Position = UDim2.fromScale(0.5, 0.62)
badgeRow.Parent = root

local badge = Instance.new("TextLabel")
badge.BackgroundColor3 = BLACK
badge.Text = "MONSY"
badge.TextColor3 = YELLOW
badge.Font = Enum.Font.GothamBold
badge.TextSize = 20
badge.Size = UDim2.fromOffset(120, 36)
badge.Position = UDim2.fromOffset(0,0)
badge.Parent = badgeRow
corner(badge, UDim.new(0,10))
stroke(badge, 1, DIM_YELLOW, 0)

local timer = Instance.new("TextLabel")
timer.BackgroundColor3 = Color3.new(0,0,0)
timer.TextColor3 = WHITE
timer.Font = Enum.Font.Gotham
timer.TextSize = 18
timer.Text = "00 : 00 : 00"
timer.Size = UDim2.fromOffset(140, 36)
timer.Position = UDim2.fromOffset(160,0)
timer.Parent = badgeRow
corner(timer, UDim.new(0,10))
stroke(timer, 1, Color3.new(0,0,0), 0.35)

-- info divider
local divider = Instance.new("Frame")
divider.BackgroundColor3 = DIM_YELLOW
divider.Size = UDim2.new(0.6, 0, 0, 2)
divider.AnchorPoint = Vector2.new(0.5,0)
divider.Position = UDim2.fromScale(0.5, 0.73)
divider.Parent = root

-- info lines
local info = Instance.new("TextLabel")
info.BackgroundTransparency = 1
info.Font = Enum.Font.Code
info.TextSize = 16
info.TextColor3 = YELLOW
info.TextXAlignment = Enum.TextXAlignment.Center
info.TextYAlignment = Enum.TextYAlignment.Top
info.Size = UDim2.new(1, -80, 0, 70)
info.Position = UDim2.fromOffset(40, math.floor(root.AbsoluteSize.Y*0.75))
info.TextWrapped = true
info.Parent = root

-- bottom strip
local footer = Instance.new("TextLabel")
footer.BackgroundTransparency = 1
footer.Text = "Team S/O || Ku$h Padrino Clay Marga Audrey Kopi Sensu Kizu Yosi"
footer.Font = Enum.Font.Gotham
footer.TextSize = 17
footer.TextColor3 = Color3.fromRGB(200,200,200)
footer.Size = UDim2.new(1, -20, 0, 24)
footer.AnchorPoint = Vector2.new(0.5,1)
footer.Position = UDim2.fromScale(0.5, 0.985)
footer.Parent = root

-- appear anim + blur
root.BackgroundTransparency = 1
vignette.ImageTransparency = 1
badge.BackgroundTransparency = 1
timer.BackgroundTransparency = 1
card.BackgroundTransparency = 1

blurOn(0)
TweenService:Create(root, TweenInfo.new(0.45), {BackgroundTransparency = 0}):Play()
TweenService:Create(vignette, TweenInfo.new(0.6), {ImageTransparency = 0.25}):Play()
TweenService:Create(card, TweenInfo.new(0.45), {BackgroundTransparency = 0}):Play()
TweenService:Create(badge, TweenInfo.new(0.45), {BackgroundTransparency = 0}):Play()
TweenService:Create(timer, TweenInfo.new(0.45), {BackgroundTransparency = 0}):Play()
blurOn(18)

-- live timer + info
local function hhmmss(t)
	local h = math.floor(t/3600)
	local m = math.floor((t%3600)/60)
	local s = math.floor(t%60)
	return string.format("%02d : %02d : %02d", h, m, s)
end

local function platformUA()
	local plat = tostring(UserInputService:GetPlatform())
	local dev = LP and LP.Name or "Client"
	return string.format("User-Agent : %s | Platform %s  TokenDisc./537.36 (HTML, MONSY DETECT YOU ! ) Roblox", dev, plat)
end

local fakeIP = "192.134.21.23"

local execStart = os.clock()
RunService.Heartbeat:Connect(function()
	timer.Text = hhmmss(os.clock() - startClock)
	local exec = os.clock() - execStart
	local infoStr = string.format(
		"%s\nClient IP : %s\nExecution Time : %.6f seconds",
		platformUA(),
		fakeIP,
		exec
	)
	info.Text = infoStr
end)

-- fixed 10-second delay before dismiss
task.spawn(function()
	if not game:IsLoaded() then
		game.Loaded:Wait()
	end
	
	task.wait(10) -- fixed delay for loading screen
	
	local t = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.In)
	TweenService:Create(root, t, {BackgroundTransparency = 1}):Play()
	TweenService:Create(vignette, t, {ImageTransparency = 1}):Play()
	TweenService:Create(card, t, {BackgroundTransparency = 1}):Play()
	TweenService:Create(badge, t, {BackgroundTransparency = 1}):Play()
	TweenService:Create(timer, t, {BackgroundTransparency = 1}):Play()
	blurOn(0)
	
	task.wait(0.5)
	loadingGui:Destroy()
	local blur = Lighting:FindFirstChild("LoadingBlur")
	if blur then blur:Destroy() end
	
	-- show main GUI AFTER loading
	if gui then
		gui.Enabled = true
	end
end)

--// MAIN GUI Setup
local main = Instance.new("Frame")
main.Size = UDim2.new(0, 650, 0, 400)
main.Position = UDim2.new(0.5, -325, 0.5, -200)
main.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
main.BorderSizePixel = 0
main.Active = true
main.Draggable = true
main.Parent = gui
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 12)

local shadow = Instance.new("ImageLabel")
shadow.Name = "Shadow"
shadow.AnchorPoint = Vector2.new(0.5, 0.5)
shadow.Position = UDim2.new(0.5, 0, 0.5, 0)
shadow.Size = UDim2.new(1, 60, 1, 60)
shadow.BackgroundTransparency = 1
shadow.Image = "rbxassetid://1316045217"
shadow.ImageTransparency = 0.5
shadow.ZIndex = -1
shadow.Parent = main

-- Top Bar
local topBar = Instance.new("Frame")
topBar.Size = UDim2.new(1, 0, 0, 30)
topBar.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
topBar.BorderSizePixel = 0
topBar.Parent = main

local title = Instance.new("TextLabel")
title.Text = "MONSY---------------------------------------------<3-----------------------------------MENU"
title.Font = Enum.Font.GothamSemibold
title.TextSize = 18
title.TextColor3 = Color3.new(1, 1, 1)
title.BackgroundTransparency = 1
title.Size = UDim2.new(1, 0, 1, 0)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Position = UDim2.new(0, 10, 0, 0)
title.Parent = topBar

-- Sidebar (scrollable)
local sideBar = Instance.new("ScrollingFrame")
sideBar.Size = UDim2.new(0, 160, 1, -30)
sideBar.Position = UDim2.new(0, 0, 0, 30)
sideBar.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
sideBar.BorderSizePixel = 0
sideBar.ScrollBarThickness = 4
sideBar.CanvasSize = UDim2.new(0, 0, 0, 0)
sideBar.AutomaticCanvasSize = Enum.AutomaticSize.Y
sideBar.Parent = main

local sideLayout = Instance.new("UIListLayout", sideBar)
sideLayout.Padding = UDim.new(0, 5)
sideLayout.SortOrder = Enum.SortOrder.LayoutOrder
sideLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center -- ðŸ”¹ Center items

-- Updated Tab Names
local tabNames = {
	"MAIN MENU", 
	"ROLEPLAY MENU", 
	"BRING MENU", 
	"AIMBOT MENU", 
	"SCRIPT MENU", 
	"CASH MENU", 
	"PLAYER MENU", 
	"MONSY MENU", 
	"TELEPORT MENU" 
}
local tabPanels = {}
local currentTab = nil

-- Tab Holder
local tabHolder = Instance.new("Frame")
tabHolder.Size = UDim2.new(1, -160, 1, -70) -- Adjusted for bottom bar
tabHolder.Position = UDim2.new(0, 160, 0, 30)
tabHolder.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
tabHolder.BorderSizePixel = 0
tabHolder.Parent = main

-- Toggle Sidebar Button
local toggleTabs = Instance.new("TextButton")
toggleTabs.Size = UDim2.new(0, 20, 0, 20)
toggleTabs.Position = UDim2.new(1, -25, 0, 5)
toggleTabs.Text = "<"
toggleTabs.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggleTabs.TextColor3 = Color3.new(1, 1, 1)
toggleTabs.Font = Enum.Font.GothamBold
toggleTabs.TextSize = 14
toggleTabs.Parent = topBar

local tabsVisible = true
local function animateSidebar(show)
	local goal = {}
	goal.Size = show and UDim2.new(0, 160, 1, -30) or UDim2.new(0, 0, 1, -30)
	TweenService:Create(sideBar, TweenInfo.new(0.3), goal):Play()
	goal = {}
	goal.Position = show and UDim2.new(0, 160, 0, 30) or UDim2.new(0, 0, 0, 30)
	TweenService:Create(tabHolder, TweenInfo.new(0.3), goal):Play()
	toggleTabs.Text = show and "<" or ">"
	tabsVisible = show
end

toggleTabs.MouseButton1Click:Connect(function()
	animateSidebar(not tabsVisible)
end)

-- Click Sound
local clickSound = Instance.new("Sound")
clickSound.SoundId = "rbxassetid://9118823101"
clickSound.Volume = 0.7
clickSound.Parent = SoundService

-- Profile Header
local profileFrame = Instance.new("Frame")
profileFrame.Size = UDim2.new(1, -10, 0, 60)
profileFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
profileFrame.BorderSizePixel = 0
profileFrame.Parent = sideBar

local thumb = Instance.new("ImageLabel")
thumb.Size = UDim2.new(0, 40, 0, 40)
thumb.Position = UDim2.new(0, 10, 0, 10)
thumb.BackgroundTransparency = 1
thumb.Image = "rbxthumb://type=AvatarHeadShot&id=" .. LocalPlayer.UserId .. "&w=420&h=420"
thumb.Parent = profileFrame
Instance.new("UICorner", thumb).CornerRadius = UDim.new(1, 0)

local profileLabel = Instance.new("TextLabel")
profileLabel.Size = UDim2.new(1, -60, 0, 20)
profileLabel.Position = UDim2.new(0, 55, 0, 15)
profileLabel.BackgroundTransparency = 1
profileLabel.TextColor3 = Color3.new(1, 1, 1)
profileLabel.Font = Enum.Font.GothamBold
profileLabel.TextSize = 14
profileLabel.TextXAlignment = Enum.TextXAlignment.Left
profileLabel.Text = "xWxaWdw" .. LocalPlayer.Name
profileLabel.Parent = profileFrame

local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, -60, 0, 14)
statusLabel.Position = UDim2.new(0, 55, 0, 35)
statusLabel.BackgroundTransparency = 1
statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 12
statusLabel.TextXAlignment = Enum.TextXAlignment.Left
statusLabel.Text = "Online"
statusLabel.Parent = profileFrame

-- Tab Buttons
for _, name in ipairs(tabNames) do
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0, 130, 0, 30) -- ðŸ”¹ Fixed width, centered
	btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.Font = Enum.Font.GothamBold
	btn.Text = name
	btn.TextSize = 14
	btn.Parent = sideBar
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)

	btn.MouseEnter:Connect(function()
		TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 0, 0)}):Play()
	end)
	btn.MouseLeave:Connect(function()
		TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 0, 0)}):Play()
	end)

	local panel = Instance.new("ScrollingFrame")
	panel.Size = UDim2.new(1, 0, 1, 0)
	panel.CanvasSize = UDim2.new(0, 0, 0, 0)
	panel.AutomaticCanvasSize = Enum.AutomaticSize.Y
	panel.ScrollBarThickness = 6
	panel.BackgroundTransparency = 1
	panel.Visible = false
	panel.Parent = tabHolder

	local layout = Instance.new("UIListLayout", panel)
	layout.Padding = UDim.new(0, 6)
	layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
	layout.SortOrder = Enum.SortOrder.LayoutOrder

	tabPanels[name] = panel

	btn.MouseButton1Click:Connect(function()
		clickSound:Play()
		if currentTab then tabPanels[currentTab].Visible = false end
		tabPanels[name].Visible = true
		currentTab = name
	end)
end

-- Default Tab
if tabNames[1] then
	tabPanels[tabNames[1]].Visible = true
	currentTab = tabNames[1]
end

-- Toggle GUI with K
UIS.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed then return end
	if input.KeyCode == Enum.KeyCode.K then
		gui.Enabled = not gui.Enabled
	end
end)

--// Function to Add Buttons to Main Menu
local function addMainMenuButton(text, callback)
	local panel = tabPanels["MAIN MENU"]
	if not panel then return end

	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, -20, 0, 36)
	button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	button.TextColor3 = Color3.new(1, 1, 1)
	button.Font = Enum.Font.GothamSemibold
	button.TextSize = 14
	button.Text = text
	button.AutoButtonColor = false
	button.Parent = panel
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

	button.MouseEnter:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)
	button.MouseLeave:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)

	button.MouseButton1Click:Connect(function()
		clickSound:Play()
		callback()
	end)
end

--// 8 Buttons in Main Menu
addMainMenuButton("INFINITE YIELD [3KTG]", function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
end)

addMainMenuButton("MUSIC FE[3KTG]", function()
	-- TAONG GOMA CMD - Minimal FE Audio Player (White Font Update)
local CoreGui = game:GetService("CoreGui")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local InjectTo = game:GetService("TestService")

-- Find RemoteEvent
local function findRemote()
	for _, v in ipairs(ReplicatedStorage:GetDescendants()) do
		if v:IsA("RemoteEvent") and v.Name == "AC6_FE_Sounds" then
			return v
		end
	end
	for _, v in ipairs(Workspace:GetDescendants()) do
		if v:IsA("RemoteEvent") and v.Name == "AC6_FE_Sounds" then
			return v
		end
	end
	return nil
end

local remote = findRemote()

-- GUI
local gui = Instance.new("ScreenGui", CoreGui)
gui.Name = "TAONG_GOMA_CMD_GUI"
gui.ResetOnSpawn = false

local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0, 300, 0, 120)
main.Position = UDim2.new(0.5, -150, 0.5, -60)
main.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
main.BorderSizePixel = 0
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 10)

local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1, 0, 0.25, 0)
title.Position = UDim2.new(0, 0, 0, 0)
title.Text = "TAONG GOMA MUSIC EXPLOITS"
title.TextColor3 = Color3.fromRGB(255, 255, 255) -- White
title.BackgroundTransparency = 1
title.Font = Enum.Font.SourceSansBold
title.TextSize = 22

local inputBox = Instance.new("TextBox", main)
inputBox.Size = UDim2.new(0.9, 0, 0.25, 0)
inputBox.Position = UDim2.new(0.05, 0, 0.35, 0)
inputBox.PlaceholderText = "Enter Music ID [3KTG]"
inputBox.Text = ""
inputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
inputBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
inputBox.Font = Enum.Font.SourceSansBold
inputBox.TextSize = 18
inputBox.ClearTextOnFocus = false

local toggleButton = Instance.new("TextButton", main)
toggleButton.Size = UDim2.new(0.5, 0, 0.2, 0)
toggleButton.Position = UDim2.new(0.25, 0, 0.7, 0)
toggleButton.Text = "OFF"
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- White
toggleButton.BackgroundTransparency = 1
toggleButton.Font = Enum.Font.SourceSansBold
toggleButton.TextSize = 24

local isOn = false
local soundName = "TG_SOUND_" .. tostring(math.random(1000,9999))

toggleButton.MouseButton1Click:Connect(function()
	isOn = not isOn
	if isOn then
		toggleButton.Text = "ON"

		local id = inputBox.Text
		if id == "" then
			warn("No music ID entered")
			return
		end

		if remote then
			pcall(function()
				remote:FireServer("newSound", soundName, InjectTo, "rbxassetid://" .. id, 1, 1, true, 0)
				remote:FireServer("playSound", soundName)
			end)
		else
			warn("AC6 RemoteEvent not found")
		end
	else
		toggleButton.Text = "OFF"

		if remote then
			pcall(function()
				remote:FireServer("stopSound", soundName)
			end)
		end
	end
end)
end)

addMainMenuButton("ESP [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

--// GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "ESP_Toggle_GUI"
gui.ResetOnSpawn = false
gui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 100, 0, 35)
toggleButton.Position = UDim2.new(0, 20, 0, 120)
toggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Text = "ESP: ON"
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextSize = 14
toggleButton.Parent = gui

local corner = Instance.new("UICorner", toggleButton)
corner.CornerRadius = UDim.new(0, 6)

--// Toggle State
local ESP_ENABLED = true
local ESPObjects = {}

--// Drawing Helpers
local function newLine()
	local line = Drawing.new("Line")
	line.Thickness = 2
	line.Color = Color3.fromRGB(255, 255, 255) -- Changed to white
	line.Visible = true
	return line
end

local function newText()
	local text = Drawing.new("Text")
	text.Size = 14
	text.Color = Color3.fromRGB(255, 255, 255)
	text.Center = true
	text.Outline = true
	text.Visible = true
	return text
end

local function clearESP(player)
	if ESPObjects[player] then
		for _, obj in pairs(ESPObjects[player]) do
			if obj.Remove then obj:Remove() end
		end
		ESPObjects[player] = nil
	end
end

--// Get 2D screen position of 3D part
local function getPartPos(part)
	if not part then return nil, false end
	local pos, visible = Camera:WorldToViewportPoint(part.Position)
	return Vector2.new(pos.X, pos.Y), visible
end

--// ESP Rendering
RunService.RenderStepped:Connect(function()
	if not ESP_ENABLED then
		for _, v in pairs(ESPObjects) do
			for _, obj in pairs(v) do
				obj.Visible = false
			end
		end
		return
	end

	for _, player in ipairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character then
			local char = player.Character
			local esp = ESPObjects[player]

			if not esp then
				esp = {
					HeadToTorso = newLine(),
					TorsoToLeftArm = newLine(),
					TorsoToRightArm = newLine(),
					TorsoToLeftLeg = newLine(),
					TorsoToRightLeg = newLine(),
					Name = newText(),
				}
				ESPObjects[player] = esp
			end

			local headPos, headVis = getPartPos(char:FindFirstChild("Head"))
			local torsoPos, torsoVis = getPartPos(char:FindFirstChild("HumanoidRootPart"))
			local laPos, laVis = getPartPos(char:FindFirstChild("LeftUpperArm") or char:FindFirstChild("Left Arm"))
			local raPos, raVis = getPartPos(char:FindFirstChild("RightUpperArm") or char:FindFirstChild("Right Arm"))
			local llPos, llVis = getPartPos(char:FindFirstChild("LeftUpperLeg") or char:FindFirstChild("Left Leg"))
			local rlPos, rlVis = getPartPos(char:FindFirstChild("RightUpperLeg") or char:FindFirstChild("Right Leg"))

			if headVis and torsoVis then
				esp.HeadToTorso.From = headPos
				esp.HeadToTorso.To = torsoPos
				esp.HeadToTorso.Visible = true
			else
				esp.HeadToTorso.Visible = false
			end

			if torsoVis and laVis then
				esp.TorsoToLeftArm.From = torsoPos
				esp.TorsoToLeftArm.To = laPos
				esp.TorsoToLeftArm.Visible = true
			else
				esp.TorsoToLeftArm.Visible = false
			end

			if torsoVis and raVis then
				esp.TorsoToRightArm.From = torsoPos
				esp.TorsoToRightArm.To = raPos
				esp.TorsoToRightArm.Visible = true
			else
				esp.TorsoToRightArm.Visible = false
			end

			if torsoVis and llVis then
				esp.TorsoToLeftLeg.From = torsoPos
				esp.TorsoToLeftLeg.To = llPos
				esp.TorsoToLeftLeg.Visible = true
			else
				esp.TorsoToLeftLeg.Visible = false
			end

			if torsoVis and rlVis then
				esp.TorsoToRightLeg.From = torsoPos
				esp.TorsoToRightLeg.To = rlPos
				esp.TorsoToRightLeg.Visible = true
			else
				esp.TorsoToRightLeg.Visible = false
			end

			if headVis then
				esp.Name.Position = Vector2.new(headPos.X, headPos.Y - 20)
				esp.Name.Text = player.Name
				esp.Name.Visible = true
			else
				esp.Name.Visible = false
			end
		end
	end
end)

--// Player leave cleanup
Players.PlayerRemoving:Connect(function(player)
	clearESP(player)
end)

--// Toggle Button
toggleButton.MouseButton1Click:Connect(function()
	ESP_ENABLED = not ESP_ENABLED
	toggleButton.Text = ESP_ENABLED and "ESP: ON" or "ESP: OFF"
end)
end)

addMainMenuButton("BIG HEAD [3KTG]", function()
	_G.HeadSize = 6 _G.Disabled = true game:GetService('RunService').RenderStepped:connect(function() if _G.Disabled then for i,v in next, game:GetService('Players'):GetPlayers() do if v.Name ~= game:GetService('Players').LocalPlayer.Name then pcall(function() v.Character.Head.Size = Vector3.new(_G.HeadSize,_G.HeadSize,_G.HeadSize) v.Character.Head.Transparency = 0.4 v.Character.Head.BrickColor = BrickColor.new("Red") v.Character.Head.Material = "Neon" v.Character.Head.CanCollide = false v.Character.Head.Massless = true end) end end end end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("PRESS Q TO FREECAM [3KTG]", function()
	-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local cam = workspace.CurrentCamera

-- Settings
local MOVE_SPEED = 60
local SPRINT_MULTIPLIER = 2
local MOUSE_SENSITIVITY = 0.15
local MAX_PITCH = 89

-- State
local enabled = false
local yaw = 0
local pitch = 0
local moveDir = Vector3.new()
local sprint = false
local originalCameraType
local originalMouseBehavior
local originalMouseIconEnabled
local humanoid
local savedWalkSpeed
local savedJumpPower
local justToggled = false -- NEW: para pigilan extra input sa frame ng toggle

-- Helpers for movement direction
local function addKeyDirection(key)
	if key == Enum.KeyCode.W then moveDir += Vector3.new(0,0,1) end  -- forward
	if key == Enum.KeyCode.S then moveDir += Vector3.new(0,0,-1) end -- backward
	if key == Enum.KeyCode.A then moveDir += Vector3.new(-1,0,0) end
	if key == Enum.KeyCode.D then moveDir += Vector3.new(1,0,0) end
	if key == Enum.KeyCode.Space then moveDir += Vector3.new(0,1,0) end
	if key == Enum.KeyCode.LeftControl or key == Enum.KeyCode.C then moveDir += Vector3.new(0,-1,0) end
end

local function removeKeyDirection(key)
	if key == Enum.KeyCode.W then moveDir -= Vector3.new(0,0,1) end
	if key == Enum.KeyCode.S then moveDir -= Vector3.new(0,0,-1) end
	if key == Enum.KeyCode.A then moveDir -= Vector3.new(-1,0,0) end
	if key == Enum.KeyCode.D then moveDir -= Vector3.new(1,0,0) end
	if key == Enum.KeyCode.Space then moveDir -= Vector3.new(0,1,0) end
	if key == Enum.KeyCode.LeftControl or key == Enum.KeyCode.C then moveDir -= Vector3.new(0,-1,0) end
end

-- Toggle freecam
local function toggleFreecam()
	enabled = not enabled
	moveDir = Vector3.new() -- NEW: reset movement dir agad
	sprint = false
	justToggled = true

	if enabled then
		-- Save original states
		originalCameraType = cam.CameraType
		originalMouseBehavior = UserInputService.MouseBehavior
		originalMouseIconEnabled = UserInputService.MouseIconEnabled

		-- Freeze character
		if player.Character then
			humanoid = player.Character:FindFirstChildOfClass("Humanoid")
			if humanoid then
				savedWalkSpeed = humanoid.WalkSpeed
				savedJumpPower = humanoid.JumpPower
				humanoid.WalkSpeed = 0
				humanoid.JumpPower = 0
			end
		end

		-- Set yaw/pitch
		local x, y, z = cam.CFrame:ToEulerAnglesYXZ()
		pitch = math.deg(x)
		yaw = math.deg(y)

		cam.CameraType = Enum.CameraType.Scriptable
		UserInputService.MouseBehavior = Enum.MouseBehavior.LockCenter
		UserInputService.MouseIconEnabled = false
	else
		-- Restore character movement
		if humanoid then
			humanoid.WalkSpeed = savedWalkSpeed or 16
			humanoid.JumpPower = savedJumpPower or 50
		end
		cam.CameraType = originalCameraType or Enum.CameraType.Custom
		UserInputService.MouseBehavior = originalMouseBehavior or Enum.MouseBehavior.Default
		UserInputService.MouseIconEnabled = originalMouseIconEnabled
	end
end

-- Keybinds
UserInputService.InputBegan:Connect(function(input, gpe)
	if gpe then return end

	if input.KeyCode == Enum.KeyCode.Q then
		toggleFreecam()
		return
	end

	if justToggled then return end -- NEW: block key presses sa toggle frame

	if enabled and input.UserInputType == Enum.UserInputType.Keyboard then
		if input.KeyCode == Enum.KeyCode.LeftShift then
			sprint = true
		else
			addKeyDirection(input.KeyCode)
		end
	end
end)

UserInputService.InputEnded:Connect(function(input, gpe)
	if gpe or not enabled then return end
	if justToggled then return end -- NEW: block releases sa toggle frame

	if input.KeyCode == Enum.KeyCode.LeftShift then
		sprint = false
	else
		removeKeyDirection(input.KeyCode)
	end
end)

-- Mouse look
UserInputService.InputChanged:Connect(function(input, gpe)
	if not enabled then return end
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		yaw -= input.Delta.X * MOUSE_SENSITIVITY
		pitch = math.clamp(pitch - input.Delta.Y * MOUSE_SENSITIVITY, -MAX_PITCH, MAX_PITCH)
	end
end)

-- Camera movement
RunService.RenderStepped:Connect(function(dt)
	if justToggled then
		justToggled = false -- reset block flag after 1 frame
	end
	if not enabled then return end

	local rot = CFrame.Angles(0, math.rad(yaw), 0) * CFrame.Angles(math.rad(pitch), 0, 0)
	local localMove = (rot.RightVector * moveDir.X + rot.UpVector * moveDir.Y + rot.LookVector * moveDir.Z)
	local speed = MOVE_SPEED * (sprint and SPRINT_MULTIPLIER or 1)
	local newPos = cam.CFrame.Position + localMove * speed * dt
	cam.CFrame = CFrame.new(newPos) * rot
end)
end)

addMainMenuButton("AIMBOT ADJUSTABLE [3KTG]", function()
	--// CONFIG
getgenv().Environment = {
    FOVSettings = {
        Amount = 150,
        Visible = true,
        Color = Color3.fromRGB(255, 255, 255) -- White FOV
    },
    Aimbot = {
        Enabled = true,
        AimPart = "Head"
    }
}

--// SERVICES
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

--// CREATE FOV CIRCLE
local Circle = Drawing.new("Circle")
Circle.Radius = Environment.FOVSettings.Amount
Circle.Thickness = 2
Circle.Transparency = 1
Circle.Filled = false
Circle.Color = Environment.FOVSettings.Color

--// UPDATE FOV CIRCLE POSITION
RunService.RenderStepped:Connect(function()
    Circle.Position = UIS:GetMouseLocation()
    Circle.Visible = Environment.FOVSettings.Visible
    Circle.Radius = Environment.FOVSettings.Amount
end)

--// AIMBOT FUNCTION
local function GetClosestPlayer()
    local closest, dist = nil, Environment.FOVSettings.Amount
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild(Environment.Aimbot.AimPart) then
            local headPos, onScreen = workspace.CurrentCamera:WorldToViewportPoint(player.Character[Environment.Aimbot.AimPart].Position)
            if onScreen then
                local mag = (Vector2.new(headPos.X, headPos.Y) - UIS:GetMouseLocation()).Magnitude
                if mag < dist then
                    closest = player
                    dist = mag
                end
            end
        end
    end
    return closest
end

RunService.RenderStepped:Connect(function()
    if Environment.Aimbot.Enabled and UIS:IsMouseButtonPressed(Enum.UserInputType.MouseButton2) then
        local target = GetClosestPlayer()
        if target then
            workspace.CurrentCamera.CFrame = CFrame.new(
                workspace.CurrentCamera.CFrame.Position,
                target.Character[Environment.Aimbot.AimPart].Position
            )
        end
    end
end)

--// GUI SETUP
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local SliderBack = Instance.new("Frame")
local SliderFill = Instance.new("Frame")
local SliderButton = Instance.new("TextButton")
local FOVLabel = Instance.new("TextLabel")
local ToggleButton = Instance.new("TextButton")

ScreenGui.Parent = game.CoreGui

-- Frame
Frame.Size = UDim2.new(0, 220, 0, 140)
Frame.Position = UDim2.new(0, 50, 0, 50)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- All black
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

-- Title
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.Text = "TAONG GOMA AIMBOT" -- Custom Title
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 16
Title.Font = Enum.Font.SourceSansBold
Title.Parent = Frame

-- Slider background
SliderBack.Size = UDim2.new(0.8, 0, 0, 6)
SliderBack.Position = UDim2.new(0.1, 0, 0.35, 0)
SliderBack.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- All black
SliderBack.BorderSizePixel = 0
SliderBack.Parent = Frame

-- Slider fill
SliderFill.Size = UDim2.new(0.5, 0, 1, 0)
SliderFill.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- White fill
SliderFill.BorderSizePixel = 0
SliderFill.Parent = SliderBack

-- Slider button
SliderButton.Size = UDim2.new(0, 20, 0, 20)
SliderButton.Position = UDim2.new(0.5, -10, 0.5, -10)
SliderButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- White button
SliderButton.Text = ""
SliderButton.BorderSizePixel = 0
SliderButton.Parent = Frame

-- FOV text display
FOVLabel.Size = UDim2.new(1, 0, 0, 20)
FOVLabel.Position = UDim2.new(0, 0, 0.45, 0)
FOVLabel.BackgroundTransparency = 1
FOVLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
FOVLabel.TextSize = 14
FOVLabel.Font = Enum.Font.SourceSans
FOVLabel.Text = "FOV: " .. Environment.FOVSettings.Amount
FOVLabel.Parent = Frame

-- Toggle button for Show/Hide
ToggleButton.Size = UDim2.new(0.8, 0, 0, 30)
ToggleButton.Position = UDim2.new(0.1, 0, 0.7, 0)
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextSize = 14
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.Text = "FOV: Visible"
ToggleButton.Parent = Frame

-- FOV slider logic
local dragging = false

local function updateFOV(percent)
    percent = math.clamp(percent, 0, 1)
    SliderFill.Size = UDim2.new(percent, 0, 1, 0)
    SliderButton.Position = UDim2.new(percent, -10, 0.5, -10)
    local newFOV = math.floor(50 + percent * 400)
    Environment.FOVSettings.Amount = newFOV
    FOVLabel.Text = "FOV: " .. newFOV
end

SliderButton.MouseButton1Down:Connect(function()
    dragging = true
end)

UIS.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

UIS.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local percent = (UIS:GetMouseLocation().X - SliderBack.AbsolutePosition.X) / SliderBack.AbsoluteSize.X
        updateFOV(percent)
    end
end)

-- Toggle FOV visibility
ToggleButton.MouseButton1Click:Connect(function()
    Environment.FOVSettings.Visible = not Environment.FOVSettings.Visible
    if Environment.FOVSettings.Visible then
        ToggleButton.Text = "FOV: Visible"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
    else
        ToggleButton.Text = "FOV: Hidden"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
    end
end)

-- Initial setup
updateFOV((Environment.FOVSettings.Amount - 50) / 400)
end)

addMainMenuButton("FADED [3KTG]", function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/NighterEpic/Faded-Grid/main/YesEpic", true))()
end)

addMainMenuButton("LOOP BRING ALL [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

--// Variables
local loopEnabled = false
local originalPositions = {}

--// GUI
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 300, 0, 100)
Frame.Position = UDim2.new(0.5, -150, 0, 50)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- all black
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true

local UICorner = Instance.new("UICorner", Frame)
UICorner.CornerRadius = UDim.new(0, 6)

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0.4, 0)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18
Title.Text = "TAONG GOMA LOOP BRING ALL"
Title.TextColor3 = Color3.fromRGB(255, 255, 255) -- white

local StatusButton = Instance.new("TextButton", Frame)
StatusButton.Size = UDim2.new(1, 0, 0.6, 0)
StatusButton.Position = UDim2.new(0, 0, 0.4, 0)
StatusButton.Font = Enum.Font.SourceSansBold
StatusButton.TextSize = 20
StatusButton.Text = "OFF"
StatusButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- black
StatusButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- white text

--// Toggle Function
StatusButton.MouseButton1Click:Connect(function()
    loopEnabled = not loopEnabled

    if loopEnabled then
        -- Save original positions
        originalPositions = {}
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                originalPositions[plr.Name] = plr.Character.HumanoidRootPart.CFrame
            end
        end

        StatusButton.Text = "ON"
        StatusButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- green text
    else
        -- Return players to original positions
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                local savedPos = originalPositions[plr.Name]
                if savedPos then
                    plr.Character.HumanoidRootPart.CFrame = savedPos
                end
            end
        end

        StatusButton.Text = "OFF"
        StatusButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- back to white text
    end
end)

--// Loop Bring All in Front
RunService.RenderStepped:Connect(function()
    if loopEnabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local hrp = LocalPlayer.Character.HumanoidRootPart
        local targetPos = hrp.Position + (hrp.CFrame.LookVector * 5)

        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                -- Remove tools
                plr.Backpack:ClearAllChildren()
                for _, tool in pairs(plr.Character:GetChildren()) do
                    if tool:IsA("Tool") then
                        tool:Destroy()
                    end
                end

                -- Bring to front
                plr.Character.HumanoidRootPart.CFrame = CFrame.new(targetPos)
            end
        end
    end
end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("PLAYER SCANNER [3KTG]", function()
	--// TAONG GOMA PLAYER SCANNER
-- Solid black GUI + Modern font + Hover effects + Click animations + Working VIEW/UNVIEW/TELEPORT

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UIS = game:GetService("UserInputService")

-- Main ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 350, 0, 400)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BorderSizePixel = 0
MainFrame.Visible = true
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

-- UI Corner
local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 8)
MainCorner.Parent = MainFrame

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundTransparency = 1
Title.Text = "TAONG GOMA PLAYER SCANNER"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.Parent = MainFrame

-- Scan Button
local ScanButton = Instance.new("TextButton")
ScanButton.Size = UDim2.new(0.9, 0, 0, 35)
ScanButton.Position = UDim2.new(0.05, 0, 0, 50)
ScanButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ScanButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ScanButton.Font = Enum.Font.GothamBold
ScanButton.TextSize = 18
ScanButton.Text = "SCAN"
ScanButton.AutoButtonColor = false
ScanButton.Parent = MainFrame

local ScanCorner = Instance.new("UICorner")
ScanCorner.CornerRadius = UDim.new(0, 6)
ScanCorner.Parent = ScanButton

-- Hover effect
local function AddHoverEffect(button)
	button.MouseEnter:Connect(function()
		button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	end)
	button.MouseLeave:Connect(function()
		button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	end)
	button.MouseButton1Click:Connect(function()
		button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		task.wait(0.1)
		button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	end)
end
AddHoverEffect(ScanButton)

-- Scrollable Player List
local PlayerListFrame = Instance.new("ScrollingFrame")
PlayerListFrame.Size = UDim2.new(0.9, 0, 0, 280)
PlayerListFrame.Position = UDim2.new(0.05, 0, 0, 90)
PlayerListFrame.BackgroundTransparency = 1
PlayerListFrame.BorderSizePixel = 0
PlayerListFrame.ScrollBarThickness = 6
PlayerListFrame.ScrollBarImageColor3 = Color3.fromRGB(0, 0, 0)
PlayerListFrame.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Parent = PlayerListFrame
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0, 4)

-- Function to create each player entry
local function CreatePlayerButton(player)
	local PlayerButton = Instance.new("TextButton")
	PlayerButton.Size = UDim2.new(1, 0, 0, 30)
	PlayerButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	PlayerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	PlayerButton.Font = Enum.Font.Gotham
	PlayerButton.TextSize = 16
	PlayerButton.Text = player.DisplayName .. " (@" .. player.Name .. ")"
	PlayerButton.AutoButtonColor = false
	PlayerButton.Parent = PlayerListFrame

	local PlayerCorner = Instance.new("UICorner")
	PlayerCorner.CornerRadius = UDim.new(0, 6)
	PlayerCorner.Parent = PlayerButton

	AddHoverEffect(PlayerButton)

	-- Actions Frame
	local ActionsFrame = Instance.new("Frame")
	ActionsFrame.Size = UDim2.new(1, 0, 0, 30)
	ActionsFrame.BackgroundTransparency = 1
	ActionsFrame.Visible = false
	ActionsFrame.Parent = PlayerListFrame

	local function CreateActionButton(text)
		local Btn = Instance.new("TextButton")
		Btn.Size = UDim2.new(0.3, 0, 1, 0)
		Btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		Btn.TextColor3 = Color3.fromRGB(255, 255, 255)
		Btn.Font = Enum.Font.GothamBold
		Btn.TextSize = 14
		Btn.Text = text
		Btn.AutoButtonColor = false
		Btn.Parent = ActionsFrame

		local BtnCorner = Instance.new("UICorner")
		BtnCorner.CornerRadius = UDim.new(0, 6)
		BtnCorner.Parent = Btn

		AddHoverEffect(Btn)
		return Btn
	end

	local ViewBtn = CreateActionButton("VIEW")
	local UnviewBtn = CreateActionButton("UNVIEW")
	local TeleportBtn = CreateActionButton("TELEPORT")

	ViewBtn.Position = UDim2.new(0, 0, 0, 0)
	UnviewBtn.Position = UDim2.new(0.35, 0, 0, 0)
	TeleportBtn.Position = UDim2.new(0.7, 0, 0, 0)

	-- === BUTTON FUNCTIONS ===
	ViewBtn.MouseButton1Click:Connect(function()
		if player.Character and player.Character:FindFirstChild("Head") then
			workspace.CurrentCamera.CameraSubject = player.Character:FindFirstChild("Head")
		end
	end)

	UnviewBtn.MouseButton1Click:Connect(function()
		if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
			workspace.CurrentCamera.CameraSubject = LocalPlayer.Character:FindFirstChild("Humanoid")
		end
	end)

	TeleportBtn.MouseButton1Click:Connect(function()
		if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and
		   LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
			LocalPlayer.Character.HumanoidRootPart.CFrame =
				player.Character.HumanoidRootPart.CFrame + Vector3.new(2, 0, 0)
		end
	end)

	-- Show/hide action buttons
	PlayerButton.MouseButton1Click:Connect(function()
		ActionsFrame.Visible = not ActionsFrame.Visible
	end)
end

-- SCAN function
ScanButton.MouseButton1Click:Connect(function()
	for _, child in ipairs(PlayerListFrame:GetChildren()) do
		if child:IsA("TextButton") or child:IsA("Frame") then
			child:Destroy()
		end
	end

	task.spawn(function()
		for _, player in ipairs(Players:GetPlayers()) do
			if player ~= LocalPlayer then
				CreatePlayerButton(player)
				task.wait(0.15)
			end
		end
	end)
end)

-- Hide/Unhide with U
UIS.InputBegan:Connect(function(input, gp)
	if not gp and input.KeyCode == Enum.KeyCode.U then
		MainFrame.Visible = not MainFrame.Visible
	end
end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("AIM VIEWER [3KTG]", function()
	--// TAONG GOMA AIM VIEWER //--

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

local AimViewerEnabled = false
local playerLines = {}
local lineDistance = 50 -- haba ng line (studs)

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.CoreGui

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 200, 0, 60)
Frame.Position = UDim2.new(0.4, 0, 0.05, 0)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- black bg
Frame.BorderSizePixel = 2
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 25)
Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- black title bg
Title.Text = "TAONG GOMA AIM VIEWER"
Title.TextColor3 = Color3.fromRGB(255, 255, 255) -- white text
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18
Title.Parent = Frame

local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(1, 0, 0, 35)
ToggleButton.Position = UDim2.new(0, 0, 0, 25)
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- black bg
ToggleButton.Text = "Aim Viewer: OFF"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- red text (off)
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.TextSize = 18
ToggleButton.Parent = Frame

-- Function para gumawa ng line
local function createLine()
    local line = Drawing.new("Line")
    line.Thickness = 1.5
    line.Transparency = 1
    line.Color = Color3.fromRGB(0, 0, 0) -- black line
    return line
end

-- Toggle function
ToggleButton.MouseButton1Click:Connect(function()
    AimViewerEnabled = not AimViewerEnabled
    if AimViewerEnabled then
        ToggleButton.Text = "Aim Viewer: ON"
        ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- green kapag on
    else
        ToggleButton.Text = "Aim Viewer: OFF"
        ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- red kapag off
        for _, line in pairs(playerLines) do
            line.Visible = false
        end
    end
end)

-- Main loop
RunService.RenderStepped:Connect(function()
    if AimViewerEnabled then
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer then
                if not playerLines[plr] then
                    playerLines[plr] = createLine()
                end
                local line = playerLines[plr]
                local char = plr.Character
                if char and char:FindFirstChild("Head") then
                    local head = char.Head
                    local startPos, onScreen = Camera:WorldToViewportPoint(head.Position)
                    local endPos = head.Position + (head.CFrame.LookVector * lineDistance)
                    local endScreen, onScreen2 = Camera:WorldToViewportPoint(endPos)
                    if onScreen or onScreen2 then
                        line.From = Vector2.new(startPos.X, startPos.Y)
                        line.To = Vector2.new(endScreen.X, endScreen.Y)
                        line.Visible = true
                    else
                        line.Visible = false
                    end
                else
                    line.Visible = false
                end
            end
        end
    end
end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("HEAD DETECTOR [3KTG]", function()
	-- Local Anti-Headshot Detection GUI (Client-Side)
-- Detects if someone is aiming at your head
-- With ON/OFF toggle button + Hotkey (G)

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

-- SETTINGS
local FOV_THRESHOLD = 5 -- degrees: smaller = stricter
local UPDATE_INTERVAL = 0.2 -- seconds
local detectionEnabled = true -- toggle state

-- ScreenGui Setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AntiHeadshotGUI"
ScreenGui.Parent = game.CoreGui

-- Main Frame
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 300, 0, 200)
Frame.Position = UDim2.new(1, -310, 0, 10)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0

-- Title
local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.Text = "Taong Goma Head Detector"

-- Player List
local PlayerList = Instance.new("TextLabel", Frame)
PlayerList.Size = UDim2.new(1, -10, 1, -40)
PlayerList.Position = UDim2.new(0, 5, 0, 35)
PlayerList.BackgroundTransparency = 1
PlayerList.TextColor3 = Color3.fromRGB(255, 255, 255)
PlayerList.Font = Enum.Font.Code
PlayerList.TextSize = 14
PlayerList.TextXAlignment = Enum.TextXAlignment.Left
PlayerList.TextYAlignment = Enum.TextYAlignment.Top
PlayerList.Text = "No threats detected."
PlayerList.RichText = true

-- Warning Label (Top Center)
local WarningLabel = Instance.new("TextLabel", ScreenGui)
WarningLabel.Size = UDim2.new(1, 0, 0, 30)
WarningLabel.Position = UDim2.new(0, 0, 0, 10)
WarningLabel.BackgroundTransparency = 1
WarningLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
WarningLabel.TextStrokeTransparency = 0
WarningLabel.Font = Enum.Font.GothamBold
WarningLabel.TextSize = 20
WarningLabel.Text = ""
WarningLabel.Visible = false

-- Toggle Button
local ToggleButton = Instance.new("TextButton", Frame)
ToggleButton.Size = UDim2.new(1, 0, 0, 25)
ToggleButton.Position = UDim2.new(0, 0, 1, -25)
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Font = Enum.Font.GothamBold
ToggleButton.TextSize = 14
ToggleButton.Text = "Detection: ON"

-- Function to check aim
local function isAimingAtHead(attacker)
    if not attacker.Character or not attacker.Character:FindFirstChild("Head") then return false end
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("Head") then return false end

    local attackerHead = attacker.Character.Head
    local localHead = LocalPlayer.Character.Head

    local lookDir = attackerHead.CFrame.LookVector
    local dirToOurHead = (localHead.Position - attackerHead.Position).Unit

    local dot = lookDir:Dot(dirToOurHead)
    local angle = math.deg(math.acos(dot))

    return angle <= FOV_THRESHOLD
end

-- Update loop
task.spawn(function()
    while true do
        task.wait(UPDATE_INTERVAL)

        if not detectionEnabled then
            PlayerList.Text = "Detection OFF"
            WarningLabel.Visible = false
            Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
            continue
        end

        local threats = {}
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer then
                if isAimingAtHead(plr) then
                    table.insert(threats, plr.Name)
                end
            end
        end

        if #threats > 0 then
            Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
            PlayerList.Text = "âš  Threats:\n" .. table.concat(threats, "\n")
            WarningLabel.Text = "âš  WARNING: " .. table.concat(threats, ", ") .. " aiming at you!"
            WarningLabel.Visible = true
        else
            Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
            PlayerList.Text = "No threats detected."
            WarningLabel.Visible = false
        end
    end
end)

-- Toggle function
local function toggleDetection()
    detectionEnabled = not detectionEnabled
    ToggleButton.Text = detectionEnabled and "Detection: ON" or "Detection: OFF"
end

-- Button Click
ToggleButton.MouseButton1Click:Connect(toggleDetection)

-- Hotkey (G)
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == Enum.KeyCode.G then
        toggleDetection()
    end
end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("PLAYER LIST TP [3KTG]", function()
	-- TAONG GOMA - Player Viewer (LocalScript sa StarterGui)
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- GUI parent
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TaongGomaGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Toggle visibility keybind (K)
UserInputService.InputBegan:Connect(function(input, isProcessed)
	if not isProcessed and input.KeyCode == Enum.KeyCode.K then
		screenGui.Enabled = not screenGui.Enabled
	end
end)

-- Main draggable frame
local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 520, 0, 360)
mainFrame.Position = UDim2.new(0.5, -260, 0.5, -180)
mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.BorderSizePixel = 0

-- Title bar
local titleBar = Instance.new("TextLabel", mainFrame)
titleBar.Size = UDim2.new(1, 0, 0, 36)
titleBar.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
titleBar.Text = "TAONG GOMA"
titleBar.Font = Enum.Font.GothamBold
titleBar.TextSize = 22
titleBar.TextColor3 = Color3.fromRGB(255, 255, 255)
titleBar.BorderSizePixel = 0

-- Left: player list (scrolling)
local leftWidth = 0.34
local scroll = Instance.new("ScrollingFrame", mainFrame)
scroll.Name = "PlayerList"
scroll.Position = UDim2.new(0, 0, 0, 36)
scroll.Size = UDim2.new(leftWidth, 0, 1, -36)
scroll.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
scroll.ScrollBarThickness = 6
scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
scroll.BorderSizePixel = 0

local listLayout = Instance.new("UIListLayout", scroll)
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.Padding = UDim.new(0, 4)

-- Right: info + buttons
local right = Instance.new("Frame", mainFrame)
right.Position = UDim2.new(leftWidth, 0, 0, 36)
right.Size = UDim2.new(1 - leftWidth, 0, 1, -36)
right.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
right.BorderSizePixel = 0

-- Center container for Name/Health
local infoContainer = Instance.new("Frame", right)
infoContainer.Size = UDim2.new(1, 0, 0.55, 0)
infoContainer.Position = UDim2.new(0, 0, 0, 8)
infoContainer.BackgroundTransparency = 1

local nameLabel = Instance.new("TextLabel", infoContainer)
nameLabel.Size = UDim2.new(1, -20, 0, 36)
nameLabel.Position = UDim2.new(0, 10, 0, 10)
nameLabel.BackgroundTransparency = 1
nameLabel.Font = Enum.Font.GothamBold
nameLabel.TextSize = 22
nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
nameLabel.Text = "Name: None"
nameLabel.TextXAlignment = Enum.TextXAlignment.Center

local healthLabel = Instance.new("TextLabel", infoContainer)
healthLabel.Size = UDim2.new(1, -20, 0, 26)
healthLabel.Position = UDim2.new(0, 10, 0, 60)
healthLabel.BackgroundTransparency = 1
healthLabel.Font = Enum.Font.Gotham
healthLabel.TextSize = 18
healthLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
healthLabel.Text = "Health: N/A"
healthLabel.TextXAlignment = Enum.TextXAlignment.Center

-- Buttons container
local buttonContainer = Instance.new("Frame", right)
buttonContainer.Size = UDim2.new(1, 0, 0.35, 0)
buttonContainer.Position = UDim2.new(0, 0, 0.6, 0)
buttonContainer.BackgroundTransparency = 1

local padding = Instance.new("UIPadding", buttonContainer)
padding.PaddingTop = UDim.new(0, 5)
padding.PaddingBottom = UDim.new(0, 5)

local btnLayout = Instance.new("UIListLayout", buttonContainer)
btnLayout.SortOrder = Enum.SortOrder.LayoutOrder
btnLayout.Padding = UDim.new(0, 8)
btnLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
btnLayout.VerticalAlignment = Enum.VerticalAlignment.Top

-- Button creator
local function createButton(label)
	local b = Instance.new("TextButton")
	b.Size = UDim2.new(0.85, 0, 0.22, 0)
	b.AnchorPoint = Vector2.new(0.5, 0)
	b.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	b.Font = Enum.Font.GothamBold
	b.TextSize = 18
	b.Text = label
	b.TextColor3 = Color3.fromRGB(255, 255, 255)
	b.AutoButtonColor = true
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 8)
	corner.Parent = b
	b.Parent = buttonContainer
	return b
end

local viewButton = createButton("View Player")
local tpButton = createButton("Teleport to Player")
local bringButton = createButton("Bring Player") -- bagong button
local friendButton = createButton("Add Friend")

-- State
local selectedPlayer = nil
local isViewing = false
local isBringing = false
local originalCameraSubject = Camera.CameraSubject
local bringConnection

-- Helper: safely revert camera
local function revertCamera()
	if originalCameraSubject and typeof(originalCameraSubject) == "Instance" and originalCameraSubject.Parent then
		Camera.CameraSubject = originalCameraSubject
	else
		if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
			Camera.CameraSubject = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
		end
	end
	Camera.CameraType = Enum.CameraType.Custom
	isViewing = false
	viewButton.Text = "View Player"
end

-- Build player list
local function refreshPlayerList()
	for _, c in ipairs(scroll:GetChildren()) do
		if c:IsA("TextButton") then c:Destroy() end
	end
	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer then
			local btn = Instance.new("TextButton")
			btn.Size = UDim2.new(1, -8, 0, 28)
			btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
			btn.TextColor3 = Color3.fromRGB(255, 255, 255)
			btn.Font = Enum.Font.Gotham
			btn.TextSize = 16
			btn.AutoButtonColor = true
			btn.Text = plr.Name
			local corner = Instance.new("UICorner")
			corner.CornerRadius = UDim.new(0, 4)
			corner.Parent = btn
			btn.Parent = scroll
			btn.MouseButton1Click:Connect(function()
				selectedPlayer = plr
				nameLabel.Text = "Name: " .. plr.Name
				local humanoid = plr.Character and plr.Character:FindFirstChildOfClass("Humanoid")
				if humanoid then
					healthLabel.Text = "Health: " .. math.floor(humanoid.Health)
				else
					healthLabel.Text = "Health: N/A"
				end
				if isViewing then revertCamera() end
			end)
		end
	end
end

-- Button behaviors
viewButton.MouseButton1Click:Connect(function()
	if not selectedPlayer then return end
	local char = selectedPlayer.Character
	local humanoid = char and char:FindFirstChildOfClass("Humanoid")
	if not humanoid then return end
	if not isViewing then
		originalCameraSubject = Camera.CameraSubject
		Camera.CameraSubject = humanoid
		Camera.CameraType = Enum.CameraType.Custom
		isViewing = true
		viewButton.Text = "Unview Player"
	else
		revertCamera()
	end
end)

tpButton.MouseButton1Click:Connect(function()
	if not selectedPlayer then return end
	local targetHRP = selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart")
	local myHRP = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
	if targetHRP and myHRP then
		myHRP.CFrame = targetHRP.CFrame + Vector3.new(2, 0.5, 0)
	end
end)

bringButton.MouseButton1Click:Connect(function()
	if not selectedPlayer then return end
	if not isBringing then
		isBringing = true
		bringButton.Text = "Unbring Player"
		bringConnection = RunService.RenderStepped:Connect(function()
			local targetChar = selectedPlayer.Character
			local myChar = LocalPlayer.Character
			if targetChar and myChar then
				local targetHRP = targetChar:FindFirstChild("HumanoidRootPart")
				local myHRP = myChar:FindFirstChild("HumanoidRootPart")
				if targetHRP and myHRP then
					targetHRP.CFrame = myHRP.CFrame + Vector3.new(2, 0, 0)
				end
			end
		end)
	else
		isBringing = false
		bringButton.Text = "Bring Player"
		if bringConnection then bringConnection:Disconnect() end
	end
end)

friendButton.MouseButton1Click:Connect(function()
	if selectedPlayer then
		LocalPlayer:RequestFriendship(selectedPlayer)
	end
end)

-- Keep health label updated
RunService.Heartbeat:Connect(function()
	if selectedPlayer then
		local humanoid = selectedPlayer.Character and selectedPlayer.Character:FindFirstChildOfClass("Humanoid")
		if humanoid then
			healthLabel.Text = "Health: " .. math.floor(humanoid.Health)
		else
			healthLabel.Text = "Health: N/A"
		end
	end
end)

Players.PlayerRemoving:Connect(function(plr)
	if plr == selectedPlayer then
		selectedPlayer = nil
		nameLabel.Text = "Name: None"
		healthLabel.Text = "Health: N/A"
		if isViewing then revertCamera() end
	end
	refreshPlayerList()
end)

Players.PlayerAdded:Connect(function()
	refreshPlayerList()
end)

refreshPlayerList()
end)

addMainMenuButton("TPUNANCHORED TO PLAYER [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local Debris = game:GetService("Debris")

--// GUI Setup
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
ScreenGui.Name = "UnanchoredToolTP"
ScreenGui.ResetOnSpawn = false

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 300, 0, 230)
Frame.Position = UDim2.new(0, 20, 0.5, -115)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Instance.new("UICorner", Frame)

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Text = "TAONG GOMA UNANCHORED TP"
Title.TextColor3 = Color3.new(1, 1, 1)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 14
Title.BackgroundTransparency = 1

-- Username Input
local UsernameBox = Instance.new("TextBox", Frame)
UsernameBox.PlaceholderText = "Enter Player Username"
UsernameBox.Size = UDim2.new(1, -20, 0, 30)
UsernameBox.Position = UDim2.new(0, 10, 0, 40)
UsernameBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
UsernameBox.TextColor3 = Color3.new(1, 1, 1)
UsernameBox.Font = Enum.Font.Gotham
UsernameBox.TextSize = 14
UsernameBox.Text = ""
Instance.new("UICorner", UsernameBox)

-- Filter Label
local FilterLabel = Instance.new("TextLabel", Frame)
FilterLabel.Size = UDim2.new(1, -20, 0, 20)
FilterLabel.Position = UDim2.new(0, 10, 0, 80)
FilterLabel.Text = "Tool Filter:"
FilterLabel.TextColor3 = Color3.new(1, 1, 1)
FilterLabel.Font = Enum.Font.Gotham
FilterLabel.TextSize = 13
FilterLabel.BackgroundTransparency = 1

-- Filter Dropdown
local FilterDropdown = Instance.new("TextButton", Frame)
FilterDropdown.Size = UDim2.new(1, -20, 0, 30)
FilterDropdown.Position = UDim2.new(0, 10, 0, 100)
FilterDropdown.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
FilterDropdown.Text = "All Tools"
FilterDropdown.TextColor3 = Color3.new(1, 1, 1)
FilterDropdown.Font = Enum.Font.Gotham
FilterDropdown.TextSize = 13
Instance.new("UICorner", FilterDropdown)

-- Cycle filter options
local filterModes = {"All Tools", "Guns Only", "Melee Only"}
local filterIndex = 1

FilterDropdown.MouseButton1Click:Connect(function()
	filterIndex = filterIndex + 1
	if filterIndex > #filterModes then
		filterIndex = 1
	end
	FilterDropdown.Text = filterModes[filterIndex]
end)

-- Filter logic
local function isToolAllowed(tool)
	local name = tool.Name:lower()

	if filterModes[filterIndex] == "All Tools" then
		return true
	elseif filterModes[filterIndex] == "Guns Only" then
		return name:find("gun") or name:find("pistol") or name:find("UZI") or name:find("silenced pistol") or name:find("desert deagle") or name:find("glock-17") or name:find("glock-19")
	elseif filterModes[filterIndex] == "Melee Only" then
		return name:find("knife") or name:find("bat") or name:find("knife") or name:find("blade") or name:find("crowbar")
	end

	return false
end

-- Main TP (tools fly to player)
local function teleportToolsToPlayer(targetPlayer)
	if not targetPlayer then
		warn("No player specified or player not found.")
		return
	end

	local root = targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart")
	if not root then
		warn("Target player has no HRP")
		return
	end

	for _, v in ipairs(Workspace:GetDescendants()) do
		if v:IsA("Tool") or (v:IsA("BasePart") and v.Name == "Handle") then
			local tool = v:IsA("Tool") and v or v:FindFirstAncestorWhichIsA("Tool")
			if tool and tool:IsDescendantOf(Workspace) and not tool:FindFirstChildOfClass("Humanoid") then
				local handle = tool:FindFirstChild("Handle")
				if handle and not handle.Anchored and isToolAllowed(tool) then
					if handle:FindFirstChild("BodyVelocity") then handle.BodyVelocity:Destroy() end
					local bv = Instance.new("BodyVelocity")
					bv.Velocity = (root.Position - handle.Position).Unit * 100
					bv.MaxForce = Vector3.new(1e5, 1e5, 1e5)
					bv.P = 10000
					bv.Parent = handle
					Debris:AddItem(bv, 0.5)
				end
			end
		end
	end
end

-- Grab Tools to Backpack
local function grabToolsToBackpack()
	for _, v in ipairs(Workspace:GetDescendants()) do
		if v:IsA("Tool") and v:FindFirstChild("Handle") and not v.Handle.Anchored and isToolAllowed(v) then
			v.Parent = LocalPlayer.Backpack
		end
	end
end

-- TP Button
local TPButton = Instance.new("TextButton", Frame)
TPButton.Size = UDim2.new(1, -20, 0, 30)
TPButton.Position = UDim2.new(0, 10, 1, -75)
TPButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
TPButton.Text = "Teleport Unanchored To Player"
TPButton.TextColor3 = Color3.new(1, 1, 1)
TPButton.Font = Enum.Font.GothamBold
TPButton.TextSize = 13
Instance.new("UICorner", TPButton)

-- Grab Button
local GrabButton = Instance.new("TextButton", Frame)
GrabButton.Size = UDim2.new(1, -20, 0, 30)
GrabButton.Position = UDim2.new(0, 10, 1, -40)
GrabButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
GrabButton.Text = "Grab Tools"
GrabButton.TextColor3 = Color3.new(1, 1, 1)
GrabButton.Font = Enum.Font.GothamBold
GrabButton.TextSize = 13
Instance.new("UICorner", GrabButton)

-- Button Events
TPButton.MouseButton1Click:Connect(function()
	local inputName = UsernameBox.Text
	if inputName == "" then
		warn("No username entered.")
		return
	end

	local targetPlayer = Players:FindFirstChild(inputName)
	if not targetPlayer then
		warn("Player not found: " .. inputName)
		return
	end

	teleportToolsToPlayer(targetPlayer)
end)

GrabButton.MouseButton1Click:Connect(grabToolsToBackpack)
end)

addMainMenuButton("FLING ALL [3KTG]", function()
	game:GetService("StarterGui"):SetCore("SendNotification",{
    Title = "Script Executed";
    Text = "Fling All";
    Duration = 6;
})
 
local Targets = {"All"} -- "All", "Target Name", "arian_was_here"
 
local Players = game:GetService("Players")
local Player = Players.LocalPlayer
 
local AllBool = false
 
local GetPlayer = function(Name)
    Name = Name:lower()
    if Name == "all" or Name == "others" then
        AllBool = true
        return
    elseif Name == "random" then
        local GetPlayers = Players:GetPlayers()
        if table.find(GetPlayers,Player) then table.remove(GetPlayers,table.find(GetPlayers,Player)) end
        return GetPlayers[math.random(#GetPlayers)]
    elseif Name ~= "random" and Name ~= "all" and Name ~= "others" then
        for _,x in next, Players:GetPlayers() do
            if x ~= Player then
                if x.Name:lower():match("^"..Name) then
                    return x;
                elseif x.DisplayName:lower():match("^"..Name) then
                    return x;
                end
            end
        end
    else
        return
    end
end
 
local Message = function(_Title, _Text, Time)
    game:GetService("StarterGui"):SetCore("SendNotification", {Title = _Title, Text = _Text, Duration = Time})
end
 
local SkidFling = function(TargetPlayer)
    local Character = Player.Character
    local Humanoid = Character and Character:FindFirstChildOfClass("Humanoid")
    local RootPart = Humanoid and Humanoid.RootPart
 
    local TCharacter = TargetPlayer.Character
    local THumanoid
    local TRootPart
    local THead
    local Accessory
    local Handle
 
    if TCharacter:FindFirstChildOfClass("Humanoid") then
        THumanoid = TCharacter:FindFirstChildOfClass("Humanoid")
    end
    if THumanoid and THumanoid.RootPart then
        TRootPart = THumanoid.RootPart
    end
    if TCharacter:FindFirstChild("Head") then
        THead = TCharacter.Head
    end
    if TCharacter:FindFirstChildOfClass("Accessory") then
        Accessory = TCharacter:FindFirstChildOfClass("Accessory")
    end
    if Accessoy and Accessory:FindFirstChild("Handle") then
        Handle = Accessory.Handle
    end
 
    if Character and Humanoid and RootPart then
        if RootPart.Velocity.Magnitude < 50 then
            getgenv().OldPos = RootPart.CFrame
        end
        if THumanoid and THumanoid.Sit and not AllBool then
            return Message("Error Occurred", "Targeting is sitting", 5) -- u can remove dis part if u want lol
        end
        if THead then
            workspace.CurrentCamera.CameraSubject = THead
        elseif not THead and Handle then
            workspace.CurrentCamera.CameraSubject = Handle
        elseif THumanoid and TRootPart then
            workspace.CurrentCamera.CameraSubject = THumanoid
        end
        if not TCharacter:FindFirstChildWhichIsA("BasePart") then
            return
        end
 
        local FPos = function(BasePart, Pos, Ang)
            RootPart.CFrame = CFrame.new(BasePart.Position) * Pos * Ang
            Character:SetPrimaryPartCFrame(CFrame.new(BasePart.Position) * Pos * Ang)
            RootPart.Velocity = Vector3.new(9e7, 9e7 * 10, 9e7)
            RootPart.RotVelocity = Vector3.new(9e8, 9e8, 9e8)
        end
 
        local SFBasePart = function(BasePart)
            local TimeToWait = 2
            local Time = tick()
            local Angle = 0
 
            repeat
                if RootPart and THumanoid then
                    if BasePart.Velocity.Magnitude < 50 then
                        Angle = Angle + 100
 
                        FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle),0 ,0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(2.25, 1.5, -2.25) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(-2.25, -1.5, 2.25) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection,CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection,CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
                    else
                        FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, -THumanoid.WalkSpeed), CFrame.Angles(0, 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, 1.5, TRootPart.Velocity.Magnitude / 1.25), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, -TRootPart.Velocity.Magnitude / 1.25), CFrame.Angles(0, 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, 1.5, TRootPart.Velocity.Magnitude / 1.25), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5 ,0), CFrame.Angles(math.rad(-90), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
                        task.wait()
                    end
                else
                    break
                end
            until BasePart.Velocity.Magnitude > 500 or BasePart.Parent ~= TargetPlayer.Character or TargetPlayer.Parent ~= Players or not TargetPlayer.Character == TCharacter or THumanoid.Sit or Humanoid.Health <= 0 or tick() > Time + TimeToWait
        end
 
        workspace.FallenPartsDestroyHeight = 0/0
 
        local BV = Instance.new("BodyVelocity")
        BV.Name = "EpixVel"
        BV.Parent = RootPart
        BV.Velocity = Vector3.new(9e8, 9e8, 9e8)
        BV.MaxForce = Vector3.new(1/0, 1/0, 1/0)
 
        Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, false)
 
        if TRootPart and THead then
            if (TRootPart.CFrame.p - THead.CFrame.p).Magnitude > 5 then
                SFBasePart(THead)
            else
                SFBasePart(TRootPart)
            end
        elseif TRootPart and not THead then
            SFBasePart(TRootPart)
        elseif not TRootPart and THead then
            SFBasePart(THead)
        elseif not TRootPart and not THead and Accessory and Handle then
            SFBasePart(Handle)
        else
            return Message("Error Occurred", "Target is missing everything", 5)
        end
 
        BV:Destroy()
        Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, true)
        workspace.CurrentCamera.CameraSubject = Humanoid
 
        repeat
            RootPart.CFrame = getgenv().OldPos * CFrame.new(0, .5, 0)
            Character:SetPrimaryPartCFrame(getgenv().OldPos * CFrame.new(0, .5, 0))
            Humanoid:ChangeState("GettingUp")
            table.foreach(Character:GetChildren(), function(_, x)
                if x:IsA("BasePart") then
                    x.Velocity, x.RotVelocity = Vector3.new(), Vector3.new()
                end
            end)
            task.wait()
        until (RootPart.Position - getgenv().OldPos.p).Magnitude < 25
        workspace.FallenPartsDestroyHeight = getgenv().FPDH
    else
        return Message("Error Ocurrido", "El Script A Fallado", 5)
    end
end
 
if not Welcome then Message("By Augus X", "", 6) end
getgenv().Welcome = true
if Targets[1] then for _,x in next, Targets do GetPlayer(x) end else return end
 
if AllBool then
    for _,x in next, Players:GetPlayers() do
        SkidFling(x)
    end
end
 
for _,x in next, Targets do
    if GetPlayer(x) and GetPlayer(x) ~= Player then
        if GetPlayer(x).UserId ~= 2924145477 then
            local TPlayer = GetPlayer(x)
            if TPlayer then
                SkidFling(TPlayer)
            end
        else
            Message("ERROR AL ASER FLING", "", 8)
        end
    elseif not GetPlayer(x) and not AllBool then
        Message("ERROR OCURRIDO", "NO SE LE ISO FLING", 8)
    end
end
end)

addMainMenuButton("HITBOX EXTENDER [3KTG]", function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/LisSploit/HitBoxExtender/main/Universal",true))()
end)

--// Function to Add Buttons to Main Menu
local function addMainMenuButton(text, callback)
	local panel = tabPanels["ROLEPLAY MENU"]
	if not panel then return end

	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, -20, 0, 36)
	button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	button.TextColor3 = Color3.new(1, 1, 1)
	button.Font = Enum.Font.GothamSemibold
	button.TextSize = 14
	button.Text = text
	button.AutoButtonColor = false
	button.Parent = panel
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

	button.MouseEnter:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)
	button.MouseLeave:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)

	button.MouseButton1Click:Connect(function()
		clickSound:Play()
		callback()
	end)
end

--// 4 Buttons in Roleplay Script
addMainMenuButton("GUNSHOP SYSTEM [3KTG]", function()
	-- Services
local player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Setup UI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "GunCommandUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Name = "MainFrame"
frame.Size = UDim2.new(0, 300, 0, 150)
frame.Position = UDim2.new(0.5, -150, 0.5, -75)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local titleLabel = Instance.new("TextLabel")
titleLabel.Text = "GOMA GUN CMDS"
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255) -- White instead of red
titleLabel.TextSize = 16
titleLabel.BackgroundTransparency = 1
titleLabel.Size = UDim2.new(1, 0, 0, 20)
titleLabel.Position = UDim2.new(0, 0, 0, 5)
titleLabel.Parent = frame

local textBox = Instance.new("TextBox")
textBox.Name = "CommandBox"
textBox.Text = ""
textBox.PlaceholderText = "Enter Command (3KTG)"
textBox.Font = Enum.Font.GothamBold
textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
textBox.TextSize = 24
textBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
textBox.BorderSizePixel = 0
textBox.Size = UDim2.new(0.9, 0, 0, 40)
textBox.Position = UDim2.new(0.05, 0, 0, 40)
textBox.ClearTextOnFocus = false
textBox.Parent = frame

local toggleButton = Instance.new("TextButton")
toggleButton.Text = "OFF"
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- White when OFF
toggleButton.TextSize = 22
toggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggleButton.BorderSizePixel = 0
toggleButton.Size = UDim2.new(0.6, 0, 0, 35)
toggleButton.Position = UDim2.new(0.2, 0, 0, 95)
toggleButton.Parent = frame

-- Commands Table
local commands = {}
local gunEvent = ReplicatedStorage:FindFirstChild("GunShop") and ReplicatedStorage.GunShop:FindFirstChild("Events") and ReplicatedStorage.GunShop.Events:FindFirstChild("Purchase")

commands["BuySilenced"] = function()
	if gunEvent then
		gunEvent:FireServer("Silenced Pistol", -100)
	end
end

commands["BuyGlock17"] = function()
	if gunEvent then
		gunEvent:FireServer("Glock-17", -100)
	end
end

commands["BuyGlock19"] = function()
	if gunEvent then
		gunEvent:FireServer("Glock-19", -100)
	end
end

commands["BuyDeagle"] = function()
	if gunEvent then
		gunEvent:FireServer("Desert Deagle", -100)
	end
end

commands["BuyAmmo"] = function()
	if gunEvent then
		gunEvent:FireServer("AmmoBox", -100)
	end
end

commands["BuyAllGuns"] = function()
	if gunEvent then
		gunEvent:FireServer("Silenced Pistol", -100)
		gunEvent:FireServer("Glock-17", -100)
		gunEvent:FireServer("Glock-19", -100)
		gunEvent:FireServer("Desert Deagle", -100)
		gunEvent:FireServer("AmmoBox", -100)
	end
end

-- Toggle Logic
local isOn = false

toggleButton.MouseButton1Click:Connect(function()
	isOn = not isOn

	if isOn then
		toggleButton.Text = "ON"
		toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
		local cmdText = textBox.Text
		local commandFunc = commands[cmdText]
		if commandFunc then
			commandFunc()
		else
			warn("Unknown command: " .. cmdText)
		end
	else
		toggleButton.Text = "OFF"
		toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- White when OFF
	end
end)

-- Drag Logic
local dragging = false
local dragInput, mousePos, framePos

frame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		mousePos = input.Position
		framePos = frame.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

frame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		local delta = input.Position - mousePos
		frame.Position = UDim2.new(
			framePos.X.Scale, framePos.X.Offset + delta.X,
			framePos.Y.Scale, framePos.Y.Offset + delta.Y
		)
	end
end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("FANTASY SYSTEM [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UIS = game:GetService("UserInputService")

local player = Players.LocalPlayer

--// GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "GiveAllCashGUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 400)
frame.Position = UDim2.new(0.5, -150, 0.5, -200)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BorderSizePixel = 1
frame.BorderColor3 = Color3.fromRGB(40, 40, 40)
frame.Parent = gui
frame.Active = true
frame.Draggable = true

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
title.Text = "FANTASY CITY CMD"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame
Instance.new("UICorner", title).CornerRadius = UDim.new(0, 8)

-- Dropdown (Select Gun)
local dropdown = Instance.new("TextButton")
dropdown.Size = UDim2.new(1, -20, 0, 30)
dropdown.Position = UDim2.new(0, 10, 0, 50)
dropdown.Text = "Select Gun"
dropdown.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdown.TextColor3 = Color3.new(1, 1, 1)
dropdown.Font = Enum.Font.Gotham
dropdown.TextSize = 14
dropdown.Parent = frame
Instance.new("UICorner", dropdown).CornerRadius = UDim.new(0, 6)

-- âœ… Local Guns Only
local gunList = {
    "Silenced Pistol",
    "Glock-17",
    "Glock-19",
    "Vector"
}

local selectedGun = nil

-- Dropdown Menu
local dropdownFrame = Instance.new("Frame")
dropdownFrame.Size = UDim2.new(1, -20, 0, #gunList * 25)
dropdownFrame.Position = UDim2.new(0, 10, 0, 85)
dropdownFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdownFrame.Visible = false
dropdownFrame.Parent = frame
Instance.new("UICorner", dropdownFrame).CornerRadius = UDim.new(0, 5)

for i, gun in ipairs(gunList) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 0, 25)
    btn.Position = UDim2.new(0, 0, 0, (i - 1) * 25)
    btn.Text = gun
    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 12
    btn.Parent = dropdownFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)

    btn.MouseButton1Click:Connect(function()
        selectedGun = gun
        dropdown.Text = gun
        dropdownFrame.Visible = false
    end)
end

dropdown.MouseButton1Click:Connect(function()
    dropdownFrame.Visible = not dropdownFrame.Visible
end)

-- Preset Buttons
local buttonSpacing = 5
local buttonWidth = (300 - 40 - (buttonSpacing * 2)) / 3
local buttonYOffset = 95 + #gunList * 25

local amountBox = Instance.new("TextBox") -- forward declare

for i, data in ipairs({
    {Label = "Give 100K", Value = -100000},
    {Label = "Give 1M", Value = -1000000},
    {Label = "Give 10M", Value = -10000000},
}) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, buttonWidth, 0, 30)
    btn.Position = UDim2.new(0, 10 + (buttonWidth + buttonSpacing) * (i - 1), 0, buttonYOffset)
    btn.Text = data.Label
    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 12
    btn.Parent = frame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)

    btn.MouseButton1Click:Connect(function()
        amountBox.Text = tostring(data.Value)
    end)
end

-- Amount Box
amountBox.Size = UDim2.new(1, -20, 0, 30)
amountBox.Position = UDim2.new(0, 10, 0, buttonYOffset + 40)
amountBox.PlaceholderText = "Enter Amount (TAONG GOMA CMD)"
amountBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
amountBox.TextColor3 = Color3.new(1, 1, 1)
amountBox.PlaceholderColor3 = Color3.fromRGB(100, 100, 100)
amountBox.Font = Enum.Font.Gotham
amountBox.TextSize = 12
amountBox.Parent = frame
Instance.new("UICorner", amountBox).CornerRadius = UDim.new(0, 6)

-- Auto Give Button
local toggle = Instance.new("TextButton")
toggle.Size = UDim2.new(1, -20, 0, 35)
toggle.Position = UDim2.new(0, 10, 0, buttonYOffset + 80)
toggle.Text = "Start Auto Give"
toggle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggle.TextColor3 = Color3.new(1, 1, 1)
toggle.Font = Enum.Font.GothamBold
toggle.TextSize = 14
toggle.Parent = frame
Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 6)

-- âœ… Correct Remote for Local Guns
local Remote = ReplicatedStorage:WaitForChild("RemoteEvents"):WaitForChild("Entrepeneur"):WaitForChild("Ammunition")

-- Auto Give Logic
local giving = false

toggle.MouseButton1Click:Connect(function()
    giving = not giving
    toggle.Text = giving and "Stop Auto Give" or "Start Auto Give"
    while giving do
        if selectedGun and tonumber(amountBox.Text) then
            Remote:FireServer(selectedGun)
        end
        task.wait(0.3)
    end
end)

-- RightShift toggle GUI
UIS.InputBegan:Connect(function(input, gpe)
    if not gpe and input.KeyCode == Enum.KeyCode.RightShift then
        gui.Enabled = not gui.Enabled
    end
end)
end)

addMainMenuButton("URBAN SYSTEM [3KTG]", function()
	-- Services
local player = game.Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")

-- UI Setup
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "PurchaseCMDGui"
screenGui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 300, 0, 150)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -75)
mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

local titleLabel = Instance.new("TextLabel")
titleLabel.Text = "GOMA URBAN GUN BUY"
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255) -- Changed from red to white
titleLabel.TextSize = 16
titleLabel.BackgroundTransparency = 1
titleLabel.Size = UDim2.new(1, 0, 0, 20)
titleLabel.Position = UDim2.new(0, 0, 0, 5)
titleLabel.Parent = mainFrame

local textBox = Instance.new("TextBox")
textBox.PlaceholderText = "Enter Command (3KTG)"
textBox.Font = Enum.Font.GothamBold
textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
textBox.TextSize = 20
textBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
textBox.BorderSizePixel = 0
textBox.Size = UDim2.new(0.9, 0, 0, 40)
textBox.Position = UDim2.new(0.05, 0, 0, 40)
textBox.ClearTextOnFocus = false
textBox.Text = ""
textBox.Parent = mainFrame

local toggleButton = Instance.new("TextButton")
toggleButton.Text = "OFF"
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- Changed from red to white
toggleButton.TextSize = 22
toggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggleButton.BorderSizePixel = 0
toggleButton.Size = UDim2.new(0.6, 0, 0, 35)
toggleButton.Position = UDim2.new(0.2, 0, 0, 95)
toggleButton.Parent = mainFrame

-- Command Table
local purchaseEvent = ReplicatedStorage:WaitForChild("PurchaseEvent")
local commands = {}

commands["BuyAK"] = function()
	purchaseEvent:FireServer("AK-47", -100)
end

commands["BuyAR15"] = function()
	purchaseEvent:FireServer("AR15", -100)
end

commands["BuyVector"] = function()
	purchaseEvent:FireServer("Vector", -100)
end

commands["BuySyringe"] = function()
	purchaseEvent:FireServer("Syringe", -100)
end

commands["BuyP90"] = function()
	purchaseEvent:FireServer("P90", -100)
end

commands["BuyBandage"] = function()
	purchaseEvent:FireServer("Bandage", -100)
end

commands["BuyAmmo1"] = function()
	purchaseEvent:FireServer("AmmoBox_1", -100)
end

commands["BuySten"] = function()
	purchaseEvent:FireServer("Sten Gun", -100)
end

commands["BuyAll2"] = function()
	local items = {
		"AK-47", "AR15", "Vector", "Syringe",
		"P90", "Bandage", "AmmoBox_1", "Sten Gun"
	}
	for _, item in ipairs(items) do
		purchaseEvent:FireServer(item, -100)
	end
end

-- Toggle Logic
local isOn = false

toggleButton.MouseButton1Click:Connect(function()
	isOn = not isOn
	if isOn then
		toggleButton.Text = "ON"
		toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
		local inputCmd = textBox.Text
		local func = commands[inputCmd]
		if func then
			func()
		else
			warn("Unknown command: " .. inputCmd)
		end
	else
		toggleButton.Text = "OFF"
		toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- White when OFF
	end
end)

-- Optional: Drag support
local dragging, dragInput, startPos, startFramePos
mainFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		startPos = input.Position
		startFramePos = mainFrame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

mainFrame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and input == dragInput then
		local delta = input.Position - startPos
		mainFrame.Position = UDim2.new(
			startFramePos.X.Scale, startFramePos.X.Offset + delta.X,
			startFramePos.Y.Scale, startFramePos.Y.Offset + delta.Y
		)
	end
end)
end)

addMainMenuButton("LICENCE GIVER SYSTEM [3KTG]", function()
	while true do game:GetService("ReplicatedStorage").GunLicenseGiver:FireServer("User",0.1)
wait()
end
end)

addMainMenuButton("LASPINAS SYSTEM [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UIS = game:GetService("UserInputService")

local player = Players.LocalPlayer

--// GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "GiveAllCashGUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 450)  -- Adjusted to fit all buttons and Auto Buy controls
frame.Position = UDim2.new(0.5, -150, 0.5, -225)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BorderSizePixel = 1
frame.BorderColor3 = Color3.fromRGB(40, 40, 40)
frame.Parent = gui
frame.Active = true
frame.Draggable = true

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
title.Text = "LAS PINAS ROLEPLAY"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame
Instance.new("UICorner", title).CornerRadius = UDim.new(0, 8)

-- List of items to buy
local items = {
    {"Silenced Pistol", "Silenced Pistol"},
    {"Heavy Vest", "Heavy Vest"},
    {"Glock-19", "Glock-19"},
    {"Oxy", "Oxy"},
    {"Vector", "Vector"},
    {"Tail", "Tail"},
    {"AmmoBox", "AmmoBox"}
}

local selectedItem = nil

-- Create Dropdown Button
local dropdown = Instance.new("TextButton")
dropdown.Size = UDim2.new(1, -20, 0, 30)
dropdown.Position = UDim2.new(0, 10, 0, 50)
dropdown.Text = "Select Item"
dropdown.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdown.TextColor3 = Color3.new(1, 1, 1)
dropdown.Font = Enum.Font.Gotham
dropdown.TextSize = 14
dropdown.Parent = frame
Instance.new("UICorner", dropdown).CornerRadius = UDim.new(0, 6)

local dropdownFrame = Instance.new("Frame")
dropdownFrame.Size = UDim2.new(1, -20, 0, #items * 30)  -- Adjust the height based on item count
dropdownFrame.Position = UDim2.new(0, 10, 0, 85)
dropdownFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdownFrame.Visible = false
dropdownFrame.Parent = frame
Instance.new("UICorner", dropdownFrame).CornerRadius = UDim.new(0, 5)

-- Create buttons inside the dropdown
for i, item in ipairs(items) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 0, 30)
    btn.Position = UDim2.new(0, 0, 0, (i - 1) * 30)
    btn.Text = item[1]
    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 12
    btn.Parent = dropdownFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)

    btn.MouseButton1Click:Connect(function()
        selectedItem = item[2]  -- Store the selected item's internal name
        dropdown.Text = item[1]  -- Update dropdown text to selected item
        dropdownFrame.Visible = false  -- Hide the dropdown after selection
    end)
end

-- Toggle Dropdown Visibility
dropdown.MouseButton1Click:Connect(function()
    dropdownFrame.Visible = not dropdownFrame.Visible
end)

-- Auto Buy Toggle Button
local toggle = Instance.new("TextButton")
toggle.Size = UDim2.new(1, -20, 0, 35)
toggle.Position = UDim2.new(0, 10, 0, 85 + (#items * 30) + 10)
toggle.Text = "Start Auto Buy"
toggle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggle.TextColor3 = Color3.new(1, 1, 1)
toggle.Font = Enum.Font.GothamBold
toggle.TextSize = 14
toggle.Parent = frame
Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 6)

local isAutoBuying = false

toggle.MouseButton1Click:Connect(function()
    isAutoBuying = not isAutoBuying
    toggle.Text = isAutoBuying and "Stop Auto Buy" or "Start Auto Buy"
    
    while isAutoBuying do
        if selectedItem then
            ReplicatedStorage.ShopRemotes["BuyItem_d2d83578-7a8d-4ef0-bd7c-885739d76ce9"]:FireServer(selectedItem, -100000)
            print("Auto-buying " .. selectedItem)
        end
        task.wait(0.001)  -- Wait 1 second between purchases to prevent spam
    end
end)

-- RightShift to toggle GUI
UIS.InputBegan:Connect(function(input, gpe)
    if not gpe and input.KeyCode == Enum.KeyCode.RightShift then
        gui.Enabled = not gui.Enabled
    end
end)
end)

addMainMenuButton("KALYEONSE SYSTEM [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UIS = game:GetService("UserInputService")

local player = Players.LocalPlayer

--// GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "GiveAllCashGUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 250)  -- Adjusted height to fit content better
frame.Position = UDim2.new(0.5, -150, 0.5, -125)  -- Repositioned to center
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BorderSizePixel = 1
frame.BorderColor3 = Color3.fromRGB(40, 40, 40)
frame.Parent = gui
frame.Active = true
frame.Draggable = true

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
title.Text = "KALYE ONSE"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame
Instance.new("UICorner", title).CornerRadius = UDim.new(0, 8)

-- List of items to buy (Silenced Pistol, Desert Eagle, AmmoBox)
local items = {
    {"Silenced Pistol", "Silenced Pistol"},
    {"Desert Eagle", "Desert Eagle"},
    {"AmmoBox", "AmmoBox"}
}

local selectedItem = nil

-- Create Dropdown Button
local dropdown = Instance.new("TextButton")
dropdown.Size = UDim2.new(1, -20, 0, 30)
dropdown.Position = UDim2.new(0, 10, 0, 50)
dropdown.Text = "Select Item"
dropdown.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdown.TextColor3 = Color3.new(1, 1, 1)
dropdown.Font = Enum.Font.Gotham
dropdown.TextSize = 14
dropdown.Parent = frame
Instance.new("UICorner", dropdown).CornerRadius = UDim.new(0, 6)

local dropdownFrame = Instance.new("Frame")
dropdownFrame.Size = UDim2.new(1, -20, 0, #items * 30)  -- Adjust the height based on item count
dropdownFrame.Position = UDim2.new(0, 10, 0, 85)
dropdownFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdownFrame.Visible = false
dropdownFrame.Parent = frame
Instance.new("UICorner", dropdownFrame).CornerRadius = UDim.new(0, 5)

-- Create buttons inside the dropdown
for i, item in ipairs(items) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 0, 30)
    btn.Position = UDim2.new(0, 0, 0, (i - 1) * 30)
    btn.Text = item[1]
    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 12
    btn.Parent = dropdownFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)

    btn.MouseButton1Click:Connect(function()
        selectedItem = item[2]  -- Store the selected item's internal name
        dropdown.Text = item[1]  -- Update dropdown text to selected item
        dropdownFrame.Visible = false  -- Hide the dropdown after selection
    end)
end

-- Toggle Dropdown Visibility
dropdown.MouseButton1Click:Connect(function()
    dropdownFrame.Visible = not dropdownFrame.Visible
end)

-- Auto Buy Toggle Button
local toggle = Instance.new("TextButton")
toggle.Size = UDim2.new(1, -20, 0, 35)
toggle.Position = UDim2.new(0, 10, 0, 85 + (#items * 30) + 5)  -- Adjusted position for Auto Buy button
toggle.Text = "Start Auto Buy"
toggle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggle.TextColor3 = Color3.new(1, 1, 1)
toggle.Font = Enum.Font.GothamBold
toggle.TextSize = 14
toggle.Parent = frame
Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 6)

local isAutoBuying = false

toggle.MouseButton1Click:Connect(function()
    isAutoBuying = not isAutoBuying
    toggle.Text = isAutoBuying and "Stop Auto Buy" or "Start Auto Buy"
    
    while isAutoBuying do
        if selectedItem then
            if selectedItem == "Silenced Pistol" then
                game:GetService("ReplicatedStorage").MicSystem:FireServer("Silenced Pistol", -0)
                print("Auto-buying Silenced Pistol")
            elseif selectedItem == "Desert Eagle" then
                game:GetService("ReplicatedStorage").MicSystem:FireServer("Desert Eagle", -0)
                print("Auto-buying Desert Eagle")
            elseif selectedItem == "AmmoBox" then
                game:GetService("ReplicatedStorage").MicSystem:FireServer("AmmoBox", -0)
                print("Auto-buying AmmoBox")
            end
        end
        task.wait(0.001)  -- Wait 1 second between purchases to prevent spam
    end
end)

-- RightShift to toggle GUI
UIS.InputBegan:Connect(function(input, gpe)
    if not gpe and input.KeyCode == Enum.KeyCode.RightShift then
        gui.Enabled = not gui.Enabled
    end
end)
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("DOMINION BYPASS CS [3KTG]", function()
	local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local autoFarm = false
local teleportDelay = 3 -- seconds between each TP

-- Function para mag-trigger ng ProximityPrompt
local function triggerPrompt(prompt)
    if prompt and prompt:IsA("ProximityPrompt") then
        prompt.HoldDuration = 0
        if typeof(fireproximityprompt) == "function" then
            fireproximityprompt(prompt)
        else
            prompt:InputHoldBegin()
            task.wait()
            prompt:InputHoldEnd()
        end
    end
end

-- Function para mag-teleport sa position
local function tpTo(pos)
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame = pos
    end
end

-- Main auto farm loop
local function farmTrash()
    while autoFarm do
        local trashList = {}
        for _, v in ipairs(workspace:GetDescendants()) do
            if v:IsA("ProximityPrompt") and v.ObjectText == "Trash" then
                table.insert(trashList, v)
            end
        end
        
        for _, prompt in ipairs(trashList) do
            if not autoFarm then break end
            tpTo(prompt.Parent.CFrame + Vector3.new(0, 3, 0)) -- TP above trash
            task.wait(0.1)
            triggerPrompt(prompt)
            task.wait(teleportDelay) -- wait before next TP
        end
    end
end

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer.PlayerGui
ScreenGui.ResetOnSpawn = false

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 200, 0, 50)
Frame.Position = UDim2.new(0.1, 0, 0.1, 0)
Frame.BackgroundColor3 = Color3.new(0, 0, 0)
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Text = "TAONG GOMA BYPASS"
Title.Size = UDim2.new(1, 0, 0.4, 0)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.new(1, 1, 1)
Title.TextScaled = true
Title.Parent = Frame

local Button = Instance.new("TextButton")
Button.Text = "AUTO FARM: OFF"
Button.Size = UDim2.new(1, 0, 0.6, 0)
Button.Position = UDim2.new(0, 0, 0.4, 0)
Button.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
Button.TextColor3 = Color3.new(1, 1, 1)
Button.TextScaled = true
Button.Parent = Frame

Button.MouseButton1Click:Connect(function()
    autoFarm = not autoFarm
    Button.Text = "AUTO FARM: " .. (autoFarm and "ON" or "OFF")
    if autoFarm then
        task.spawn(farmTrash)
    end
end)
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("AUTO FARM DOMINION [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Vim = game:GetService("VirtualInputManager")

--// Variables
local autoFarm = false

--// Function para mag-hold ng E
local function holdE(seconds)
    Vim:SendKeyEvent(true, Enum.KeyCode.E, false, game)
    task.wait(seconds)
    Vim:SendKeyEvent(false, Enum.KeyCode.E, false, game)
end

--// Function para kunin ang pinakamalapit na brick
local function getNearestBrick()
    local char = LocalPlayer.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return nil end

    local root = char.HumanoidRootPart
    local nearest, shortestDist = nil, math.huge

    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj.Name == "Brick" and obj:IsA("BasePart") then
            local dist = (obj.Position - root.Position).Magnitude
            if dist < shortestDist then
                shortestDist = dist
                nearest = obj
            end
        end
    end

    return nearest
end

--// Auto Farm Loop
task.spawn(function()
    while task.wait(0.1) do
        if autoFarm then
            local brick = getNearestBrick()
            if brick then
                -- Teleport sa ibabaw ng brick
                LocalPlayer.Character:PivotTo(brick.CFrame + Vector3.new(0, 3, 0))
                task.wait(0.1)
                holdE(2) -- hold E
                task.wait(2) -- cooldown bago ulit
            end
        end
    end
end)

--// GUI Setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 250, 0, 100)
Frame.Position = UDim2.new(0.5, -125, 0.5, -50)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Title.BorderSizePixel = 0
Title.Text = "TAONG GOMA AUTO FARM"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18
Title.Parent = Frame

local Button = Instance.new("TextButton")
Button.Size = UDim2.new(1, -20, 0, 40)
Button.Position = UDim2.new(0, 10, 0, 40)
Button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Button.BorderSizePixel = 0
Button.Text = "Auto Farm: OFF"
Button.TextColor3 = Color3.fromRGB(255, 255, 255)
Button.Font = Enum.Font.SourceSansBold
Button.TextSize = 18
Button.Parent = Frame

--// Button Toggle
Button.MouseButton1Click:Connect(function()
    autoFarm = not autoFarm
    Button.Text = "Auto Farm: " .. (autoFarm and "ON" or "OFF")
end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("PINOY DARK RP [3KTG]", function()
	-- Auto Farm Garbage: instant TP + auto E + Auto Sell All (by button)
-- TAONG GOMA BYPASS CS

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LP = Players.LocalPlayer

local GarbageEvent = ReplicatedStorage:FindFirstChild("GarbageRewardEvent")
local AUTO_FARM = false
local HOVER_HEIGHT = 3
local LOOT_COOLDOWN = 0.05

--================ GUI ==================
local ScreenGui = Instance.new("ScreenGui", LP:WaitForChild("PlayerGui"))
ScreenGui.ResetOnSpawn = false

local Frame = Instance.new("Frame", ScreenGui)
Frame.BackgroundColor3 = Color3.fromRGB(0,0,0) -- pure black
Frame.Size = UDim2.new(0, 200, 0, 90)
Frame.Position = UDim2.new(0.4, 0, 0.1, 0)
Frame.Active = true
Frame.Draggable = true

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0.3, 0)
Title.BackgroundColor3 = Color3.fromRGB(0,0,0)
Title.Text = "TAONG GOMA AUTO FARM "
Title.TextColor3 = Color3.new(1,1,1)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 16

local AutoFarmBtn = Instance.new("TextButton", Frame)
AutoFarmBtn.Size = UDim2.new(1, 0, 0.35, 0)
AutoFarmBtn.Position = UDim2.new(0, 0, 0.3, 0)
AutoFarmBtn.Text = "Auto Farm: OFF"
AutoFarmBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)
AutoFarmBtn.TextColor3 = Color3.new(1,1,1)
AutoFarmBtn.Font = Enum.Font.SourceSansBold
AutoFarmBtn.TextSize = 18

local AutoSellBtn = Instance.new("TextButton", Frame)
AutoSellBtn.Size = UDim2.new(1, 0, 0.35, 0)
AutoSellBtn.Position = UDim2.new(0, 0, 0.65, 0)
AutoSellBtn.Text = "Auto Sell Now"
AutoSellBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)
AutoSellBtn.TextColor3 = Color3.new(1,1,1)
AutoSellBtn.Font = Enum.Font.SourceSansBold
AutoSellBtn.TextSize = 18

AutoFarmBtn.MouseButton1Click:Connect(function()
    AUTO_FARM = not AUTO_FARM
    AutoFarmBtn.Text = "Auto Farm: " .. (AUTO_FARM and "ON" or "OFF")
end)
--======================================

local function getHRP()
    local char = LP.Character or LP.CharacterAdded:Wait()
    return char:WaitForChild("HumanoidRootPart")
end

local function tpInstant(pos)
    local hrp = getHRP()
    hrp.CFrame = CFrame.new(pos + Vector3.new(0, HOVER_HEIGHT, 0))
    task.wait(0.05)
end

local function triggerPrompt(prompt)
    if fireproximityprompt then
        fireproximityprompt(prompt)
    else
        local old = prompt.HoldDuration
        prompt.HoldDuration = 0
        prompt:InputHoldBegin(); task.wait()
        prompt:InputHoldEnd()
        prompt.HoldDuration = old
    end
end

local function findAllGarbage()
    local list = {}
    for _, d in ipairs(workspace:GetDescendants()) do
        if d:IsA("ProximityPrompt") then
            local ot = (d.ObjectText or ""):lower()
            local at = (d.ActionText or ""):lower()
            local pn = d.Parent and d.Parent.Name:lower() or ""
            if ot:find("garbage") or at:find("garbage") or pn:find("garbage") then
                table.insert(list, d)
            end
        end
    end
    local hrp = getHRP()
    table.sort(list, function(a,b)
        local pa = (a.Parent:IsA("BasePart") and a.Parent or a.Parent:FindFirstChildWhichIsA("BasePart", true))
        local pb = (b.Parent:IsA("BasePart") and b.Parent or b.Parent:FindFirstChildWhichIsA("BasePart", true))
        pa = pa and pa.Position or hrp.Position
        pb = pb and pb.Position or hrp.Position
        return (hrp.Position - pa).Magnitude < (hrp.Position - pb).Magnitude
    end)
    return list
end

local function findSellPrompt()
    for _, d in ipairs(workspace:GetDescendants()) do
        if d:IsA("ProximityPrompt") then
            local ot = (d.ObjectText or ""):lower()
            local at = (d.ActionText or ""):lower()
            local nm = (d.Name or ""):lower()
            if (ot..at..nm):find("sell") and (ot..at..nm):find("garbage") then
                return d
            end
        end
    end
end

local function getGarbageTools()
    local t = {}
    local function scan(container)
        for _, v in ipairs(container:GetChildren()) do
            if v:IsA("Tool") and v.Name:lower():find("garbage") then
                table.insert(t, v)
            end
        end
    end
    scan(LP.Backpack)
    if LP.Character then scan(LP.Character) end
    return t
end

local function countGarbageTools()
    return #getGarbageTools()
end

local function collect(prompt)
    local part = prompt.Parent:IsA("BasePart") and prompt.Parent or prompt.Parent:FindFirstChildWhichIsA("BasePart", true)
    if not part then return end
    tpInstant(part.Position)
    triggerPrompt(prompt)
    if GarbageEvent then pcall(function() GarbageEvent:FireServer() end) end
    task.wait(LOOT_COOLDOWN)
end

local function sellAllNow()
    local sellPrompt = findSellPrompt()
    if not sellPrompt then return end
    local part = sellPrompt.Parent:IsA("BasePart") and sellPrompt.Parent or sellPrompt.Parent:FindFirstChildWhichIsA("BasePart", true)
    if not part then return end

    tpInstant(part.Position)
    task.wait(0.2)

    local safety = 0
    while countGarbageTools() > 0 and safety < 200 do
        safety += 1
        local any = getGarbageTools()[1]
        if any then
            if any.Parent ~= LP.Character then
                any.Parent = LP.Character
                task.wait(0.08)
            end
            triggerPrompt(sellPrompt)
            task.wait(0.12)
        else
            break
        end
    end
end

AutoSellBtn.MouseButton1Click:Connect(sellAllNow)

task.spawn(function()
    while task.wait(0.05) do
        if AUTO_FARM then
            local targets = findAllGarbage()
            if #targets > 0 then
                for _, p in ipairs(targets) do
                    if not AUTO_FARM then break end
                    collect(p)
                end
            else
                if countGarbageTools() > 0 then
                    sellAllNow()
                end
            end
        end
    end
end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("GIVE ALL CASH 10M [3KTG]", function()
	local Players = game:GetService("Players")

local function giveMoneyToAll(amount)
	for _, player in ipairs(Players:GetPlayers()) do
		local stats = player:FindFirstChild("leaderstats")
		if stats then
			local cash = stats:FindFirstChild("Cash")
			if cash then
				cash.Value += amount
			end
		end
	end
end

-- Example: Bigyan lahat ng +10,000,000
giveMoneyToAll(10000000)
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("GUNSHOP LIST [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UIS = game:GetService("UserInputService")

local player = Players.LocalPlayer

--// GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "GiveAllCashGUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 400)
frame.Position = UDim2.new(0.5, -150, 0.5, -200)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BorderSizePixel = 1
frame.BorderColor3 = Color3.fromRGB(40, 40, 40)
frame.Parent = gui
frame.Active = true
frame.Draggable = true

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
title.Text = "TAONG GOMA ALL CITY CMD"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame
Instance.new("UICorner", title).CornerRadius = UDim.new(0, 8)

-- Dropdown (Select Gun)
local dropdown = Instance.new("TextButton")
dropdown.Size = UDim2.new(1, -20, 0, 30)
dropdown.Position = UDim2.new(0, 10, 0, 50)
dropdown.Text = "Select Gun"
dropdown.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdown.TextColor3 = Color3.new(1, 1, 1)
dropdown.Font = Enum.Font.Gotham
dropdown.TextSize = 14
dropdown.Parent = frame
Instance.new("UICorner", dropdown).CornerRadius = UDim.new(0, 6)

local gunList = {"Silenced Pistol", "Glock-17", "Desert Deagle", "AmmoBox", "Skorpion", "HK416", "UZI"}

local selectedGun = nil

-- Dropdown Menu
local dropdownFrame = Instance.new("Frame")
dropdownFrame.Size = UDim2.new(1, -20, 0, #gunList * 25)
dropdownFrame.Position = UDim2.new(0, 10, 0, 85)
dropdownFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdownFrame.Visible = false
dropdownFrame.Parent = frame
Instance.new("UICorner", dropdownFrame).CornerRadius = UDim.new(0, 5)

for i, gun in ipairs(gunList) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 0, 25)
    btn.Position = UDim2.new(0, 0, 0, (i - 1) * 25)
    btn.Text = gun
    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 12
    btn.Parent = dropdownFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)

    btn.MouseButton1Click:Connect(function()
        selectedGun = gun
        dropdown.Text = gun
        dropdownFrame.Visible = false
    end)
end

dropdown.MouseButton1Click:Connect(function()
    dropdownFrame.Visible = not dropdownFrame.Visible
end)

-- Preset Buttons (Aligned)
local buttonSpacing = 5
local buttonWidth = (300 - 40 - (buttonSpacing * 2)) / 3
local buttonYOffset = 95 + #gunList * 25

local amountBox = Instance.new("TextBox") -- forward declare here so buttons can use it

for i, data in ipairs({
    {Label = "Give 100K", Value = -100000},
    {Label = "Give 1M", Value = -1000000},
    {Label = "Give 10M", Value = -10000000},
}) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, buttonWidth, 0, 30)
    btn.Position = UDim2.new(0, 10 + (buttonWidth + buttonSpacing) * (i - 1), 0, buttonYOffset)
    btn.Text = data.Label
    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 12
    btn.Parent = frame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)

    btn.MouseButton1Click:Connect(function()
        amountBox.Text = tostring(data.Value)
    end)
end

-- Amount Box
amountBox.Size = UDim2.new(1, -20, 0, 30)
amountBox.Position = UDim2.new(0, 10, 0, buttonYOffset + 40)
amountBox.PlaceholderText = "Enter Amount (TAONG GOMA CMD)"
amountBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
amountBox.TextColor3 = Color3.new(1, 1, 1)
amountBox.PlaceholderColor3 = Color3.fromRGB(100, 100, 100)
amountBox.Font = Enum.Font.Gotham
amountBox.TextSize = 12
amountBox.Parent = frame
Instance.new("UICorner", amountBox).CornerRadius = UDim.new(0, 6)

-- Auto Give Button
local toggle = Instance.new("TextButton")
toggle.Size = UDim2.new(1, -20, 0, 35)
toggle.Position = UDim2.new(0, 10, 0, buttonYOffset + 80)
toggle.Text = "Start Auto Give"
toggle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggle.TextColor3 = Color3.new(1, 1, 1)
toggle.Font = Enum.Font.GothamBold
toggle.TextSize = 14
toggle.Parent = frame
Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 6)

-- Auto Give Logic
local giving = false

toggle.MouseButton1Click:Connect(function()
    giving = not giving
    toggle.Text = giving and "Stop Auto Give" or "Start Auto Give"
    while giving do
        if selectedGun and tonumber(amountBox.Text) then
            ReplicatedStorage.GunShop.Events.Purchase:FireServer(selectedGun, tonumber(amountBox.Text))
        end
        task.wait(0.001)
    end
end)

-- RightShift to toggle GUI
UIS.InputBegan:Connect(function(input, gpe)
    if not gpe and input.KeyCode == Enum.KeyCode.RightShift then
        gui.Enabled = not gui.Enabled
    end
end)
end)

addMainMenuButton("URBAN LIST [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

--// GUI Setup
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "AutoGiveGuns"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 320)
frame.Position = UDim2.new(0.5, -150, 0.5, -160)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BorderSizePixel = 1
frame.BorderColor3 = Color3.fromRGB(40, 40, 40)
frame.Active = true
frame.Draggable = true
frame.Parent = gui
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
title.Text = "TAONG GOMA URBAN CMD"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame
Instance.new("UICorner", title).CornerRadius = UDim.new(0, 8)

--// Dropdown Setup
local gunList = {
    "AK-47", "AR15", "Vector", "AmmoBox",
    "Glock-19", "Glock-17", "MP40", "P90",
    "Sten Gun", "Syringe", "Bandage"
}
local selectedGun = nil

local dropdown = Instance.new("TextButton")
dropdown.Size = UDim2.new(1, -20, 0, 30)
dropdown.Position = UDim2.new(0, 10, 0, 50)
dropdown.Text = "Select Gun"
dropdown.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdown.TextColor3 = Color3.new(1, 1, 1)
dropdown.Font = Enum.Font.Gotham
dropdown.TextSize = 14
dropdown.Parent = frame
Instance.new("UICorner", dropdown).CornerRadius = UDim.new(0, 6)

local dropdownFrame = Instance.new("ScrollingFrame")
dropdownFrame.Size = UDim2.new(1, -20, 0, 100)
dropdownFrame.Position = UDim2.new(0, 10, 0, 85)
dropdownFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdownFrame.Visible = false
dropdownFrame.ScrollBarThickness = 6
dropdownFrame.CanvasSize = UDim2.new(0, 0, 0, #gunList * 25)
dropdownFrame.Parent = frame
Instance.new("UICorner", dropdownFrame).CornerRadius = UDim.new(0, 6)

local layout = Instance.new("UIListLayout", dropdownFrame)
layout.Padding = UDim.new(0, 2)

for _, gunName in ipairs(gunList) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 0, 25)
    btn.Text = gunName
    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 13
    btn.Parent = dropdownFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)

    btn.MouseButton1Click:Connect(function()
        selectedGun = gunName
        dropdown.Text = gunName
        dropdownFrame.Visible = false
    end)
end

dropdown.MouseButton1Click:Connect(function()
    dropdownFrame.Visible = not dropdownFrame.Visible
end)

--// Amount Input
local amountBox = Instance.new("TextBox")
amountBox.Size = UDim2.new(1, -20, 0, 30)
amountBox.Position = UDim2.new(0, 10, 0, 190)
amountBox.PlaceholderText = "Enter amount (3KTG CMD)"
amountBox.PlaceholderColor3 = Color3.fromRGB(100, 100, 100)
amountBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
amountBox.TextColor3 = Color3.new(1, 1, 1)
amountBox.Font = Enum.Font.Gotham
amountBox.TextSize = 14
amountBox.ClearTextOnFocus = false
amountBox.Text = "-100"
amountBox.Parent = frame
Instance.new("UICorner", amountBox).CornerRadius = UDim.new(0, 6)

--// Auto Give Toggle
local toggle = Instance.new("TextButton")
toggle.Size = UDim2.new(1, -20, 0, 35)
toggle.Position = UDim2.new(0, 10, 0, 230)
toggle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggle.Text = "Start Auto Give"
toggle.TextColor3 = Color3.new(1, 1, 1)
toggle.Font = Enum.Font.GothamBold
toggle.TextSize = 14
toggle.Parent = frame
Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 6)

--// Give Once Button
local giveOnce = Instance.new("TextButton")
giveOnce.Size = UDim2.new(1, -20, 0, 30)
giveOnce.Position = UDim2.new(0, 10, 0, 275)
giveOnce.Text = "Give Once"
giveOnce.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
giveOnce.TextColor3 = Color3.new(1, 1, 1)
giveOnce.Font = Enum.Font.Gotham
giveOnce.TextSize = 14
giveOnce.Parent = frame
Instance.new("UICorner", giveOnce).CornerRadius = UDim.new(0, 6)

--// Logic
local giving = false

toggle.MouseButton1Click:Connect(function()
    giving = not giving
    toggle.Text = giving and "Stop Auto Give" or "Start Auto Give"
    toggle.BackgroundColor3 = giving and Color3.fromRGB(10, 10, 10) or Color3.fromRGB(0, 0, 0)

    while giving do
        if selectedGun and tonumber(amountBox.Text) then
            ReplicatedStorage:WaitForChild("PurchaseEvent"):FireServer(selectedGun, tonumber(amountBox.Text))
        end
        task.wait(0.001)
    end
end)

giveOnce.MouseButton1Click:Connect(function()
    if selectedGun and tonumber(amountBox.Text) then
        ReplicatedStorage:WaitForChild("PurchaseEvent"):FireServer(selectedGun, tonumber(amountBox.Text))
    end
end)
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("BAGONG BARYO LIST [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UIS = game:GetService("UserInputService")

local player = Players.LocalPlayer

--// GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "GiveAllCashGUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 400)
frame.Position = UDim2.new(0.5, -150, 0.5, -200)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BorderSizePixel = 1
frame.BorderColor3 = Color3.fromRGB(40, 40, 40)
frame.Parent = gui
frame.Active = true
frame.Draggable = true

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
title.Text = "BAGONG BARYO"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame
Instance.new("UICorner", title).CornerRadius = UDim.new(0, 8)

-- Dropdown (Select Gun)
local dropdown = Instance.new("TextButton")
dropdown.Size = UDim2.new(1, -20, 0, 30)
dropdown.Position = UDim2.new(0, 10, 0, 50)
dropdown.Text = "Select Gun"
dropdown.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdown.TextColor3 = Color3.new(1, 1, 1)
dropdown.Font = Enum.Font.Gotham
dropdown.TextSize = 14
dropdown.Parent = frame
Instance.new("UICorner", dropdown).CornerRadius = UDim.new(0, 6)

local gunList = {"Silenced Pistol", "Crowbar", "Drill", "Oxy", "Pen Gun", "Unknown", "Unknown"}

local selectedGun = nil

-- Dropdown Menu
local dropdownFrame = Instance.new("Frame")
dropdownFrame.Size = UDim2.new(1, -20, 0, #gunList * 25)
dropdownFrame.Position = UDim2.new(0, 10, 0, 85)
dropdownFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdownFrame.Visible = false
dropdownFrame.Parent = frame
Instance.new("UICorner", dropdownFrame).CornerRadius = UDim.new(0, 5)

for i, gun in ipairs(gunList) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 0, 25)
    btn.Position = UDim2.new(0, 0, 0, (i - 1) * 25)
    btn.Text = gun
    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 12
    btn.Parent = dropdownFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)

    btn.MouseButton1Click:Connect(function()
        selectedGun = gun
        dropdown.Text = gun
        dropdownFrame.Visible = false
    end)
end

dropdown.MouseButton1Click:Connect(function()
    dropdownFrame.Visible = not dropdownFrame.Visible
end)

-- Preset Buttons (Aligned)
local buttonSpacing = 5
local buttonWidth = (300 - 40 - (buttonSpacing * 2)) / 3
local buttonYOffset = 95 + #gunList * 25

local amountBox = Instance.new("TextBox") -- forward declare here so buttons can use it

for i, data in ipairs({
    {Label = "Give 100K", Value = -100000},
    {Label = "Give 1M", Value = -1000000},
    {Label = "Give 10M", Value = -10000000},
}) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, buttonWidth, 0, 30)
    btn.Position = UDim2.new(0, 10 + (buttonWidth + buttonSpacing) * (i - 1), 0, buttonYOffset)
    btn.Text = data.Label
    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 12
    btn.Parent = frame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)

    btn.MouseButton1Click:Connect(function()
        amountBox.Text = tostring(data.Value)
    end)
end

-- Amount Box
amountBox.Size = UDim2.new(1, -20, 0, 30)
amountBox.Position = UDim2.new(0, 10, 0, buttonYOffset + 40)
amountBox.PlaceholderText = "Enter Amount (TAONG GOMA CMD)"
amountBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
amountBox.TextColor3 = Color3.new(1, 1, 1)
amountBox.PlaceholderColor3 = Color3.fromRGB(100, 100, 100)
amountBox.Font = Enum.Font.Gotham
amountBox.TextSize = 12
amountBox.Parent = frame
Instance.new("UICorner", amountBox).CornerRadius = UDim.new(0, 6)

-- Auto Give Button
local toggle = Instance.new("TextButton")
toggle.Size = UDim2.new(1, -20, 0, 35)
toggle.Position = UDim2.new(0, 10, 0, buttonYOffset + 80)
toggle.Text = "Start Auto Give"
toggle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggle.TextColor3 = Color3.new(1, 1, 1)
toggle.Font = Enum.Font.GothamBold
toggle.TextSize = 14
toggle.Parent = frame
Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 6)

-- Auto Give Logic
local giving = false

toggle.MouseButton1Click:Connect(function()
    giving = not giving
    toggle.Text = giving and "Stop Auto Give" or "Start Auto Give"
    while giving do
        if selectedGun and tonumber(amountBox.Text) then
            ReplicatedStorage.BuyItemRemote:FireServer(selectedGun, tonumber(amountBox.Text))
        end
        task.wait(0.001)
    end
end)

-- RightShift to toggle GUI
UIS.InputBegan:Connect(function(input, gpe)
    if not gpe and input.KeyCode == Enum.KeyCode.RightShift then
        gui.Enabled = not gui.Enabled
    end
end)
end)

--// Function to Add Buttons to Main Menu
local function addMainMenuButton(text, callback)
	local panel = tabPanels["BRING MENU"]
	if not panel then return end

	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, -20, 0, 36)
	button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	button.TextColor3 = Color3.new(1, 1, 1)
	button.Font = Enum.Font.GothamSemibold
	button.TextSize = 14
	button.Text = text
	button.AutoButtonColor = false
	button.Parent = panel
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

	button.MouseEnter:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)
	button.MouseLeave:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)

	button.MouseButton1Click:Connect(function()
		clickSound:Play()
		callback()
	end)
end

--// 4 Buttons in Roleplay Script
addMainMenuButton("BRING SYSTEM [3KTG]", function()
	local player = game.Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")

-- Setup UI
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "BringPartGUI"
screenGui.ResetOnSpawn = false

local frame = Instance.new("Frame")
frame.Name = "Frame"
frame.Size = UDim2.new(0, 300, 0, 150)
frame.Position = UDim2.new(0.5, -150, 0.5, -75)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local titleLabel = Instance.new("TextLabel")
titleLabel.Text = "TAONG GOMA CMD"
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255) -- White na
titleLabel.TextSize = 16
titleLabel.BackgroundTransparency = 1
titleLabel.Size = UDim2.new(1, 0, 0, 20)
titleLabel.Position = UDim2.new(0, 0, 0, 5)
titleLabel.Parent = frame

local textBox = Instance.new("TextBox")
textBox.Name = "CommandBox"
textBox.Text = ""
textBox.PlaceholderText = "Enter Command (3KTG)"
textBox.Font = Enum.Font.GothamBold
textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
textBox.TextSize = 24
textBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
textBox.BorderSizePixel = 0
textBox.Size = UDim2.new(0.9, 0, 0, 40)
textBox.Position = UDim2.new(0.05, 0, 0, 40)
textBox.ClearTextOnFocus = false
textBox.Parent = frame

local toggleButton = Instance.new("TextButton")
toggleButton.Text = "OFF"
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- White when OFF
toggleButton.TextSize = 22
toggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggleButton.BorderSizePixel = 0
toggleButton.Size = UDim2.new(0.6, 0, 0, 35)
toggleButton.Position = UDim2.new(0.2, 0, 0, 95)
toggleButton.Parent = frame

-- Carry variables
local carryRemote = ReplicatedStorage:WaitForChild("CarryReplic"):WaitForChild("CarryRemotes"):WaitForChild("CarryRemote")
local carryChoice = ReplicatedStorage:WaitForChild("CarryReplic"):WaitForChild("CarryChoices"):WaitForChild("Couple Hug")

-- Command functions
local commands = {}

commands["BringAll"] = function()
	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= player then
			carryRemote:FireServer({
				cmd = "Carry",
				carrychoicesss = carryChoice,
				firstPlr = plr
			})
		end
	end
	wait(0.03)
	carryRemote:FireServer({ cmd = "Declinecarry" })
end

commands["BringRandom"] = function()
	local others = {}
	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= player then
			table.insert(others, plr)
		end
	end
	if #others > 0 then
		local rand = others[math.random(1, #others)]
		carryRemote:FireServer({
			cmd = "Carry",
			carrychoicesss = carryChoice,
			firstPlr = rand
		})
		wait(0.03)
		carryRemote:FireServer({ cmd = "Declinecarry" })
	end
end

commands["CrashServer"] = function()
	while true do
		for _, plr in pairs(Players:GetPlayers()) do
			if plr ~= player then
				carryRemote:FireServer({
					cmd = "Carry",
					carrychoicesss = carryChoice,
					firstPlr = plr
				})
			end
		end
		carryRemote:FireServer({ cmd = "Declinecarry" })
		task.wait()
	end
end

commands["Secret"] = function()
	local chatService = ReplicatedStorage:WaitForChild("DefaultChatSystemChatEvents"):WaitForChild("SayMessageRequest")
	chatService:FireServer("MONSY BALABAGKUMANTOT", "All")
end

-- Toggle logic
local isOn = false

toggleButton.MouseButton1Click:Connect(function()
	isOn = not isOn
	if isOn then
		toggleButton.Text = "ON"
		toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- Green ON
		local cmdText = textBox.Text
		local commandFunc = commands[cmdText]
		if commandFunc then
			commandFunc()
		else
			warn("Unknown command: " .. cmdText)
		end
	else
		toggleButton.Text = "OFF"
		toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- White OFF
	end
end)
end)

addMainMenuButton("BRING SYSTEM 2 [3KTG]", function()
	local player = game.Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")

-- Setup UI
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "BringPartGUI"
screenGui.ResetOnSpawn = false

local frame = Instance.new("Frame")
frame.Name = "Frame"
frame.Size = UDim2.new(0, 300, 0, 150)
frame.Position = UDim2.new(0.5, -150, 0.5, -75)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local titleLabel = Instance.new("TextLabel")
titleLabel.Text = "TAONG GOMA CMD"
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255) -- Changed from red to white
titleLabel.TextSize = 16
titleLabel.BackgroundTransparency = 1
titleLabel.Size = UDim2.new(1, 0, 0, 20)
titleLabel.Position = UDim2.new(0, 0, 0, 5)
titleLabel.Parent = frame

local textBox = Instance.new("TextBox")
textBox.Name = "CommandBox"
textBox.Text = ""
textBox.PlaceholderText = "Enter Command (3KTG)"
textBox.Font = Enum.Font.GothamBold
textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
textBox.TextSize = 24
textBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
textBox.BorderSizePixel = 0
textBox.Size = UDim2.new(0.9, 0, 0, 40)
textBox.Position = UDim2.new(0.05, 0, 0, 40)
textBox.ClearTextOnFocus = false
textBox.Parent = frame

local toggleButton = Instance.new("TextButton")
toggleButton.Text = "OFF"
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- Changed from red to white
toggleButton.TextSize = 22
toggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggleButton.BorderSizePixel = 0
toggleButton.Size = UDim2.new(0.6, 0, 0, 35)
toggleButton.Position = UDim2.new(0.2, 0, 0, 95)
toggleButton.Parent = frame

-- Carry variables
local carryRemote = ReplicatedStorage:WaitForChild("CarryReplic"):WaitForChild("CarryRemotes"):WaitForChild("CarryRemote")
local carryChoice = ReplicatedStorage:WaitForChild("CarryReplic"):WaitForChild("CarryChoices"):WaitForChild("Pabuhat")

-- Command functions
local commands = {}

commands["BringAll"] = function()
	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= player then
			carryRemote:FireServer({
				cmd = "Carry",
				carrychoicesss = carryChoice,
				firstPlr = plr
			})
		end
	end
	wait(0.07)
	carryRemote:FireServer({ cmd = "Declinecarry" })
end

commands["BringRandom"] = function()
	local others = {}
	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= player then
			table.insert(others, plr)
		end
	end
	if #others > 0 then
		local rand = others[math.random(1, #others)]
		carryRemote:FireServer({
			cmd = "Carry",
			carrychoicesss = carryChoice,
			firstPlr = rand
		})
		wait(0.07)
		carryRemote:FireServer({ cmd = "Declinecarry" })
	end
end

commands["CrashServer"] = function()
	while true do
		for _, plr in pairs(Players:GetPlayers()) do
			if plr ~= player then
				carryRemote:FireServer({
					cmd = "Carry",
					carrychoicesss = carryChoice,
					firstPlr = plr
				})
			end
		end
		carryRemote:FireServer({ cmd = "Declinecarry" })
		task.wait()
	end
end

commands["Secret"] = function()
	local chatService = ReplicatedStorage:WaitForChild("DefaultChatSystemChatEvents"):WaitForChild("SayMessageRequest")
	chatService:FireServer("MONSY BALABAGKUMANTOT", "All")
end

-- Toggle logic
local isOn = false

toggleButton.MouseButton1Click:Connect(function()
	isOn = not isOn
	if isOn then
		toggleButton.Text = "ON"
		toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
		local cmdText = textBox.Text
		local commandFunc = commands[cmdText]
		if commandFunc then
			commandFunc()
		else
			warn("Unknown command: " .. cmdText)
		end
	else
		toggleButton.Text = "OFF"
		toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- Changed OFF color to white
	end
end)
end)

--// Function to Add Buttons to Main Menu
local function addMainMenuButton(text, callback)
	local panel = tabPanels["AIMBOT MENU"]
	if not panel then return end

	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, -20, 0, 36)
	button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	button.TextColor3 = Color3.new(1, 1, 1)
	button.Font = Enum.Font.GothamSemibold
	button.TextSize = 14
	button.Text = text
	button.AutoButtonColor = false
	button.Parent = panel
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

	button.MouseEnter:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)
	button.MouseLeave:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)

	button.MouseButton1Click:Connect(function()
		clickSound:Play()
		callback()
	end)
end

--// 4 Buttons in Roleplay Script
addMainMenuButton("ALADIA AIMBOT [3KTG]", function()
	local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local Camera = workspace.CurrentCamera
 
local AimEnabled = false  -- Toggle aim on/off
local Smoothness = 1   -- Lower value for ultra-smooth tracking (closer to 0 is slower, more precise)
local AimbotMode = "Instant" -- Options: "Instant", "Smooth"
local FOV = 7  -- Field of View in degrees (adjust to your preference)
 
-- Function to get head, neck, or humanoid root part for aiming
local function getTargetPart(character)
    local head = character:FindFirstChild("Head")
    local neck = character:FindFirstChild("Neck")
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
 
    local upperTorso = character:FindFirstChild("UpperTorso")
    local neckAttachment = upperTorso and upperTorso:FindFirstChild("NeckAttachment")
 
    if head then
        return head.Position
    elseif neck then
        return neck.CFrame.Position
    elseif neckAttachment then
        return neckAttachment.WorldPosition
    elseif humanoidRootPart then
        return humanoidRootPart.Position
    end
    return nil
end
 
-- Function to find the closest player's head or neck with distance and FOV check
local function getClosestPlayer()
    local closestTarget = nil
    local shortestDistance = math.huge
 
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            local character = player.Character
            local humanoid = character:FindFirstChild("Humanoid")
            if humanoid and humanoid.Health > 0 then
                humanoid.Died:Connect(function()
                    player.Character = player.CharacterAdded:Wait()
                end)
                local targetPos = getTargetPart(character)
                if targetPos then
                    -- Calculate distance to the target
                    local distance = (LocalPlayer.Character.HumanoidRootPart.Position - targetPos).Magnitude
 
                    -- Calculate FOV
                    local screenPoint, onScreen = Camera:WorldToScreenPoint(targetPos)
                    if onScreen then
                        local toTarget = (targetPos - Camera.CFrame.Position).unit
                        local cameraForward = Camera.CFrame.LookVector
                        local angle = math.acos(cameraForward:Dot(toTarget)) * (180 / math.pi)
 
                        -- Check if within FOV and the closest distance
                        if angle <= FOV and distance < shortestDistance then
                            shortestDistance = distance
                            closestTarget = targetPos
                        end
                    end
                end
            end
        end
    end
    return closestTarget
end
 
-- Aimbot Function
local function aimAtTarget()
    local target = getClosestPlayer()
    if target then
        if AimbotMode == "Instant" then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, target)
        elseif AimbotMode == "Smooth" then
            Camera.CFrame = Camera.CFrame:Lerp(CFrame.new(Camera.CFrame.Position, target), Smoothness)
        end
    end
end
 
-- Toggle Aimbot on right click hold
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if input.UserInputType == Enum.UserInputType.MouseButton2 then  -- Right Click to activate
        AimEnabled = true
    end
end)
 
UserInputService.InputEnded:Connect(function(input, gameProcessed)
    if input.UserInputType == Enum.UserInputType.MouseButton2 then  -- Release Right Click to deactivate
        AimEnabled = false
    end
end)
 
-- Run Aimbot every frame
RunService.RenderStepped:Connect(function()
    if AimEnabled then
        aimAtTarget()
    end
end)
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("FANTASMA AIMBOT [3KTG]", function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/usbkillerx/EZhacker/refs/heads/main/EZhack"))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("AIMBOT CELLPHONE [3KTG]", function()
	--[[ 
    DEV TEST AIMBOT (Head Target)
    + White FOV circle
    + Mobile: works only when scoped (zoom in)
]]

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local cam = workspace.CurrentCamera
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local GuiService = game:GetService("GuiService")

-- SETTINGS
local ENABLED = false
local FOV = 50         -- Aim cone in degrees
local SMOOTH = 12      -- Higher = faster aim
local MAX_DIST = 250   -- Max distance
local SCOPE_FOV = 50   -- Camera FOV threshold to consider as scoped

-- Draw FOV Circle
local fovCircle = Drawing.new("Circle")
fovCircle.Color = Color3.fromRGB(255, 255, 255) -- White
fovCircle.Thickness = 1
fovCircle.NumSides = 64
fovCircle.Radius = FOV * 2
fovCircle.Filled = false
fovCircle.Visible = true

-- Create on-screen toggle button (mobile)
local function makeToggleButton()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "DevAutoAimToggle"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = player:WaitForChild("PlayerGui")

    local btn = Instance.new("TextButton")
    btn.Name = "AutoAimBtn"
    btn.Size = UDim2.new(0, 140, 0, 40)
    btn.Position = UDim2.new(1, -150, 1, -90)
    btn.BackgroundTransparency = 0.4
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.TextSize = 16
    btn.Text = "AutoAim: OFF"
    btn.Parent = screenGui

    btn.MouseButton1Click:Connect(function()
        ENABLED = not ENABLED
        btn.Text = "AutoAim: " .. (ENABLED and "ON" or "OFF")
    end)
end

makeToggleButton()

-- PC toggle key
UserInputService.InputBegan:Connect(function(inp, gpe)
    if gpe then return end
    if inp.KeyCode == Enum.KeyCode.O then
        ENABLED = not ENABLED
        local gui = player:FindFirstChild("PlayerGui") and player.PlayerGui:FindFirstChild("DevAutoAimToggle")
        if gui and gui:FindFirstChild("AutoAimBtn") then
            gui.AutoAimBtn.Text = "AutoAim: " .. (ENABLED and "ON" or "OFF")
        end
    end
end)

-- Function to get nearest target's head
local function getNearestTarget()
    local best, bestAngle = nil, math.huge
    local origin = cam.CFrame.Position
    local forward = cam.CFrame.LookVector

    for _, pl in pairs(Players:GetPlayers()) do
        if pl ~= player and pl.Character and pl.Character:FindFirstChild("Head") then
            local head = pl.Character.Head
            local dir = head.Position - origin
            local dist = dir.Magnitude
            if dist <= MAX_DIST then
                local angle = math.deg(math.acos(math.clamp(forward:Dot(dir.Unit), -1, 1)))
                if angle <= FOV/2 and angle < bestAngle then
                    -- Optional LOS check
                    local ray = Ray.new(origin, dir.Unit * dist)
                    local hit = workspace:FindPartOnRayWithIgnoreList(ray, {player.Character}, false, true)
                    if not hit or hit:IsDescendantOf(pl.Character) then
                        best = head
                        bestAngle = angle
                    end
                end
            end
        end
    end
    return best
end

-- Auto-aim loop
RunService.RenderStepped:Connect(function(dt)
    -- Update FOV circle position
    local viewportSize = cam.ViewportSize
    fovCircle.Position = Vector2.new(viewportSize.X/2, viewportSize.Y/2)
    fovCircle.Radius = FOV * 2

    -- Mobile scope check
    local isScoped = (UserInputService.TouchEnabled and cam.FieldOfView <= SCOPE_FOV)
    
    -- Only aim if enabled + (PC or mobile scoped)
    if not ENABLED or (UserInputService.TouchEnabled and not isScoped) then
        return
    end

    local target = getNearestTarget()
    if target and target.Parent then
        local curPos = cam.CFrame.Position
        local curLook = cam.CFrame.LookVector
        local wantLook = (target.Position - curPos).Unit
        local t = 1 - math.exp(-SMOOTH * dt)
        local newLook = (curLook:Lerp(wantLook, t)).Unit
        cam.CFrame = CFrame.new(curPos, curPos + newLook)
    end
end)
end)

addMainMenuButton("AIMBOT ADJUSTABLE [3KTG]", function()
	--// CONFIG
getgenv().Environment = {
    FOVSettings = {
        Amount = 150,
        Visible = true,
        Color = Color3.fromRGB(255, 255, 255) -- White FOV
    },
    Aimbot = {
        Enabled = true,
        AimPart = "Head"
    }
}

--// SERVICES
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

--// CREATE FOV CIRCLE
local Circle = Drawing.new("Circle")
Circle.Radius = Environment.FOVSettings.Amount
Circle.Thickness = 2
Circle.Transparency = 1
Circle.Filled = false
Circle.Color = Environment.FOVSettings.Color

--// UPDATE FOV CIRCLE POSITION
RunService.RenderStepped:Connect(function()
    Circle.Position = UIS:GetMouseLocation()
    Circle.Visible = Environment.FOVSettings.Visible
    Circle.Radius = Environment.FOVSettings.Amount
end)

--// AIMBOT FUNCTION
local function GetClosestPlayer()
    local closest, dist = nil, Environment.FOVSettings.Amount
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild(Environment.Aimbot.AimPart) then
            local headPos, onScreen = workspace.CurrentCamera:WorldToViewportPoint(player.Character[Environment.Aimbot.AimPart].Position)
            if onScreen then
                local mag = (Vector2.new(headPos.X, headPos.Y) - UIS:GetMouseLocation()).Magnitude
                if mag < dist then
                    closest = player
                    dist = mag
                end
            end
        end
    end
    return closest
end

RunService.RenderStepped:Connect(function()
    if Environment.Aimbot.Enabled and UIS:IsMouseButtonPressed(Enum.UserInputType.MouseButton2) then
        local target = GetClosestPlayer()
        if target then
            workspace.CurrentCamera.CFrame = CFrame.new(
                workspace.CurrentCamera.CFrame.Position,
                target.Character[Environment.Aimbot.AimPart].Position
            )
        end
    end
end)

--// GUI SETUP
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local SliderBack = Instance.new("Frame")
local SliderFill = Instance.new("Frame")
local SliderButton = Instance.new("TextButton")
local FOVLabel = Instance.new("TextLabel")
local ToggleButton = Instance.new("TextButton")

ScreenGui.Parent = game.CoreGui

-- Frame
Frame.Size = UDim2.new(0, 220, 0, 140)
Frame.Position = UDim2.new(0, 50, 0, 50)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- All black
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

-- Title
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.Text = "TAONG GOMA AIMBOT" -- Custom Title
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 16
Title.Font = Enum.Font.SourceSansBold
Title.Parent = Frame

-- Slider background
SliderBack.Size = UDim2.new(0.8, 0, 0, 6)
SliderBack.Position = UDim2.new(0.1, 0, 0.35, 0)
SliderBack.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- All black
SliderBack.BorderSizePixel = 0
SliderBack.Parent = Frame

-- Slider fill
SliderFill.Size = UDim2.new(0.5, 0, 1, 0)
SliderFill.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- White fill
SliderFill.BorderSizePixel = 0
SliderFill.Parent = SliderBack

-- Slider button
SliderButton.Size = UDim2.new(0, 20, 0, 20)
SliderButton.Position = UDim2.new(0.5, -10, 0.5, -10)
SliderButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- White button
SliderButton.Text = ""
SliderButton.BorderSizePixel = 0
SliderButton.Parent = Frame

-- FOV text display
FOVLabel.Size = UDim2.new(1, 0, 0, 20)
FOVLabel.Position = UDim2.new(0, 0, 0.45, 0)
FOVLabel.BackgroundTransparency = 1
FOVLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
FOVLabel.TextSize = 14
FOVLabel.Font = Enum.Font.SourceSans
FOVLabel.Text = "FOV: " .. Environment.FOVSettings.Amount
FOVLabel.Parent = Frame

-- Toggle button for Show/Hide
ToggleButton.Size = UDim2.new(0.8, 0, 0, 30)
ToggleButton.Position = UDim2.new(0.1, 0, 0.7, 0)
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextSize = 14
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.Text = "FOV: Visible"
ToggleButton.Parent = Frame

-- FOV slider logic
local dragging = false

local function updateFOV(percent)
    percent = math.clamp(percent, 0, 1)
    SliderFill.Size = UDim2.new(percent, 0, 1, 0)
    SliderButton.Position = UDim2.new(percent, -10, 0.5, -10)
    local newFOV = math.floor(50 + percent * 400)
    Environment.FOVSettings.Amount = newFOV
    FOVLabel.Text = "FOV: " .. newFOV
end

SliderButton.MouseButton1Down:Connect(function()
    dragging = true
end)

UIS.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

UIS.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local percent = (UIS:GetMouseLocation().X - SliderBack.AbsolutePosition.X) / SliderBack.AbsoluteSize.X
        updateFOV(percent)
    end
end)

-- Toggle FOV visibility
ToggleButton.MouseButton1Click:Connect(function()
    Environment.FOVSettings.Visible = not Environment.FOVSettings.Visible
    if Environment.FOVSettings.Visible then
        ToggleButton.Text = "FOV: Visible"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
    else
        ToggleButton.Text = "FOV: Hidden"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
    end
end)

-- Initial setup
updateFOV((Environment.FOVSettings.Amount - 50) / 400)
end)

--// Function to Add Buttons to Main Menu
local function addMainMenuButton(text, callback)
	local panel = tabPanels["CASH MENU"]
	if not panel then return end

	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, -20, 0, 36)
	button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	button.TextColor3 = Color3.new(1, 1, 1)
	button.Font = Enum.Font.GothamSemibold
	button.TextSize = 14
	button.Text = text
	button.AutoButtonColor = false
	button.Parent = panel
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

	button.MouseEnter:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)
	button.MouseLeave:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)

	button.MouseButton1Click:Connect(function()
		clickSound:Play()
		callback()
	end)
end

addMainMenuButton("KALYEONSE SYSTEM [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer

--// GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "AntiExploitSendGUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 200)
frame.Position = UDim2.new(0.5, -150, 0.5, -100)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BorderSizePixel = 0
frame.Parent = gui
frame.Active = true
frame.Draggable = true
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

--// Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
title.Text = "TAONG GOMA CASH MENU"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame
Instance.new("UICorner", title).CornerRadius = UDim.new(0, 8)

--// Item Name TextBox
local itemBox = Instance.new("TextBox")
itemBox.Size = UDim2.new(1, -20, 0, 35)
itemBox.Position = UDim2.new(0, 10, 0, 50)
itemBox.PlaceholderText = "Enter Item Name"
itemBox.PlaceholderColor3 = Color3.fromRGB(100, 100, 100)
itemBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
itemBox.TextColor3 = Color3.fromRGB(255, 255, 255)
itemBox.Font = Enum.Font.Gotham
itemBox.TextSize = 14
itemBox.Parent = frame
Instance.new("UICorner", itemBox).CornerRadius = UDim.new(0, 6)

--// Amount TextBox
local amountBox = Instance.new("TextBox")
amountBox.Size = UDim2.new(1, -20, 0, 35)
amountBox.Position = UDim2.new(0, 10, 0, 95)
amountBox.PlaceholderText = "Enter Amount"
amountBox.PlaceholderColor3 = Color3.fromRGB(100, 100, 100)
amountBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
amountBox.TextColor3 = Color3.fromRGB(255, 255, 255)
amountBox.Font = Enum.Font.Gotham
amountBox.TextSize = 14
amountBox.Parent = frame
Instance.new("UICorner", amountBox).CornerRadius = UDim.new(0, 6)

--// Send Button
local sendButton = Instance.new("TextButton")
sendButton.Size = UDim2.new(1, -20, 0, 40)
sendButton.Position = UDim2.new(0, 10, 0, 145)
sendButton.Text = "Send"
sendButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
sendButton.TextColor3 = Color3.fromRGB(255, 255, 255)
sendButton.Font = Enum.Font.GothamBold
sendButton.TextSize = 16
sendButton.Parent = frame
Instance.new("UICorner", sendButton).CornerRadius = UDim.new(0, 6)

--// Send Logic (uses AntiExploit)
sendButton.MouseButton1Click:Connect(function()
    local item = itemBox.Text
    local amount = tonumber(amountBox.Text)

    if item ~= "" and amount then
        ReplicatedStorage.AntiExploit:FireServer(item, amount)
    else
        warn("Invalid item or amount!")
    end
end)
end)

--// Function to Add Buttons to Main Menu
local function addMainMenuButton(text, callback)
	local panel = tabPanels["SCRIPT MENU"]
	if not panel then return end

	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, -20, 0, 36)
	button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	button.TextColor3 = Color3.new(1, 1, 1)
	button.Font = Enum.Font.GothamSemibold
	button.TextSize = 14
	button.Text = text
	button.AutoButtonColor = false
	button.Parent = panel
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

	button.MouseEnter:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)
	button.MouseLeave:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)

	button.MouseButton1Click:Connect(function()
		clickSound:Play()
		callback()
	end)
end

--// 4 Buttons in Roleplay Script
addMainMenuButton("BACKDOOR SCANNER [3KTG]", function()
	loadstring(game:HttpGet("https://pastebin.com/raw/inks0adx",true))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("BRING PART [3KTG]", function()
	loadstring(game:HttpGet("https://pastebin.com/raw/qEw15UV3",true))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("CLIENT SPAWNER] [3KTG]", function()
	loadstring(game:HttpGet("https://pastebin.com/raw/8f5yA0An",true))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("ADMIN TROLL [3KTG]", function()
	loadstring(game:HttpGet("https://pastebin.com/raw/VjzUsTdB",true))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("UNCH PARTS [3KTG]", function()
	loadstring(game:HttpGet("https://pastebin.com/raw/VjzUsTdB",true))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("FLING SELECT [3KTG]", function()
	loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-fe-fling-gui-8018"))() 
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("JERK [3KTG]", function()
	loadstring(game:HttpGet("https://pastebin.com/raw/FWwdST5Y"))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("CHAT TROLL [3KTG]", function()
	loadstring(game:HttpGet("https://github.com/Synergy-Networks/products/raw/main/BetterBypasser/loader.lua"))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("SHY GUY [3KTG]", function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/SpiderScriptRB/SpiderScriptRBUniversal/refs/heads/main/Protected_Spider.txt"))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("AIMBOT V2 [3KTG]", function()
	loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/d8824b23a4d9f2e0d62b4e69397d206b.lua"))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("V1 TROLL [3KTG]", function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/MiRw3b/c00lgui-v3rx/main/c00lguiv3rx.lua"))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("V2 TROLL [3KTG]", function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/yofriendfromschool1/Sky-Hub/main/FE%20Trolling%20GUI.luau"))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("ADONIS BYPASS CP [3KTG]", function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/Pixeluted/adoniscries/main/Source.lua",true))()
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("CLIENT BRING  [3KTG]", function()
	local L1 = true;
local L2 = game.Players.LocalPlayer.Character.HumanoidRootPart;
local L3 = L2.Position - Vector3.new(5, 0, 0)

game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(L_4_arg1)
    if L_4_arg1 == 'f' then
        L1 = not L1
    end;
    if L_4_arg1 == 'r' then
        L2 = game.Players.LocalPlayer.Character.HumanoidRootPart;
        L3 = L2.Position - Vector3.new(5, 0, 0)
    end
end)

for L_5_forvar1, L_6_forvar2 in pairs(game.Players:GetPlayers()) do
    if L_6_forvar2 == game.Players.LocalPlayer then
    else
        local L7 = coroutine.create(function()
            game:GetService('RunService').RenderStepped:Connect(function()
                local L8, L9 = pcall(function()
                    local L10 = L_6_forvar2.Character;
                    if L10 then
                        if L10:FindFirstChild("HumanoidRootPart") then
                            if L1 then
                                L_6_forvar2.Backpack:ClearAllChildren()
                                for L_11_forvar1, L_12_forvar2 in pairs(L10:GetChildren()) do
                                    if L_12_forvar2:IsA("Tool") then
                                        L_12_forvar2:Destroy()
                                    end
                                end;
                                L10.HumanoidRootPart.CFrame = CFrame.new(L3)
                            end
                        end
                    end
                end)
                if L8 then
                else
                    warn("Unnormal error: "..L9)
                end
            end)
        end)
        coroutine.resume(L7)
    end
end;
-- check for updates
game.Players.PlayerAdded:Connect(function(L_13_arg1)
    if L_13_arg1 == game.Players.LocalPlayer then
    else
        local L14 = coroutine.create(function()
            game:GetService('RunService').RenderStepped:Connect(function()
                local L15, L16 = pcall(function()
                    local L17 = L_13_arg1.Character;
                    if L17 then
                        if L17:FindFirstChild("HumanoidRootPart") then
                            if L1 then
                                L_13_arg1.Backpack:ClearAllChildren()
                                for L_18_forvar1, L_19_forvar2 in pairs(L17:GetChildren()) do
                                    if L_19_forvar2:IsA("Tool") then
                                        L_19_forvar2:Destroy()
                                    end
                                end;
                                L17.HumanoidRootPart.CFrame = CFrame.new(L3)
                            end
                        end
                    end
                end)
                if L15 then
                else
                    warn("Unnormal error: "..L16)
                end
            end)
        end)
        coroutine.resume(L14)
    end
end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("PRESS Q TO FREECAM [3KTG]", function()
	-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local cam = workspace.CurrentCamera

-- Settings
local MOVE_SPEED = 150
local SPRINT_MULTIPLIER = 2
local MOUSE_SENSITIVITY = 0.15
local MAX_PITCH = 89

-- State
local enabled = false
local yaw = 0
local pitch = 0
local moveDir = Vector3.new()
local sprint = false
local originalCameraType
local originalMouseBehavior
local originalMouseIconEnabled
local humanoid
local savedWalkSpeed
local savedJumpPower
local justToggled = false -- NEW: para pigilan extra input sa frame ng toggle

-- Helpers for movement direction
local function addKeyDirection(key)
	if key == Enum.KeyCode.W then moveDir += Vector3.new(0,0,1) end  -- forward
	if key == Enum.KeyCode.S then moveDir += Vector3.new(0,0,-1) end -- backward
	if key == Enum.KeyCode.A then moveDir += Vector3.new(-1,0,0) end
	if key == Enum.KeyCode.D then moveDir += Vector3.new(1,0,0) end
	if key == Enum.KeyCode.Space then moveDir += Vector3.new(0,1,0) end
	if key == Enum.KeyCode.LeftControl or key == Enum.KeyCode.C then moveDir += Vector3.new(0,-1,0) end
end

local function removeKeyDirection(key)
	if key == Enum.KeyCode.W then moveDir -= Vector3.new(0,0,1) end
	if key == Enum.KeyCode.S then moveDir -= Vector3.new(0,0,-1) end
	if key == Enum.KeyCode.A then moveDir -= Vector3.new(-1,0,0) end
	if key == Enum.KeyCode.D then moveDir -= Vector3.new(1,0,0) end
	if key == Enum.KeyCode.Space then moveDir -= Vector3.new(0,1,0) end
	if key == Enum.KeyCode.LeftControl or key == Enum.KeyCode.C then moveDir -= Vector3.new(0,-1,0) end
end

-- Toggle freecam
local function toggleFreecam()
	enabled = not enabled
	moveDir = Vector3.new() -- NEW: reset movement dir agad
	sprint = false
	justToggled = true

	if enabled then
		-- Save original states
		originalCameraType = cam.CameraType
		originalMouseBehavior = UserInputService.MouseBehavior
		originalMouseIconEnabled = UserInputService.MouseIconEnabled

		-- Freeze character
		if player.Character then
			humanoid = player.Character:FindFirstChildOfClass("Humanoid")
			if humanoid then
				savedWalkSpeed = humanoid.WalkSpeed
				savedJumpPower = humanoid.JumpPower
				humanoid.WalkSpeed = 0
				humanoid.JumpPower = 0
			end
		end

		-- Set yaw/pitch
		local x, y, z = cam.CFrame:ToEulerAnglesYXZ()
		pitch = math.deg(x)
		yaw = math.deg(y)

		cam.CameraType = Enum.CameraType.Scriptable
		UserInputService.MouseBehavior = Enum.MouseBehavior.LockCenter
		UserInputService.MouseIconEnabled = false
	else
		-- Restore character movement
		if humanoid then
			humanoid.WalkSpeed = savedWalkSpeed or 16
			humanoid.JumpPower = savedJumpPower or 50
		end
		cam.CameraType = originalCameraType or Enum.CameraType.Custom
		UserInputService.MouseBehavior = originalMouseBehavior or Enum.MouseBehavior.Default
		UserInputService.MouseIconEnabled = originalMouseIconEnabled
	end
end

-- Keybinds
UserInputService.InputBegan:Connect(function(input, gpe)
	if gpe then return end

	if input.KeyCode == Enum.KeyCode.Q then
		toggleFreecam()
		return
	end

	if justToggled then return end -- NEW: block key presses sa toggle frame

	if enabled and input.UserInputType == Enum.UserInputType.Keyboard then
		if input.KeyCode == Enum.KeyCode.LeftShift then
			sprint = true
		else
			addKeyDirection(input.KeyCode)
		end
	end
end)

UserInputService.InputEnded:Connect(function(input, gpe)
	if gpe or not enabled then return end
	if justToggled then return end -- NEW: block releases sa toggle frame

	if input.KeyCode == Enum.KeyCode.LeftShift then
		sprint = false
	else
		removeKeyDirection(input.KeyCode)
	end
end)

-- Mouse look
UserInputService.InputChanged:Connect(function(input, gpe)
	if not enabled then return end
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		yaw -= input.Delta.X * MOUSE_SENSITIVITY
		pitch = math.clamp(pitch - input.Delta.Y * MOUSE_SENSITIVITY, -MAX_PITCH, MAX_PITCH)
	end
end)

-- Camera movement
RunService.RenderStepped:Connect(function(dt)
	if justToggled then
		justToggled = false -- reset block flag after 1 frame
	end
	if not enabled then return end

	local rot = CFrame.Angles(0, math.rad(yaw), 0) * CFrame.Angles(math.rad(pitch), 0, 0)
	local localMove = (rot.RightVector * moveDir.X + rot.UpVector * moveDir.Y + rot.LookVector * moveDir.Z)
	local speed = MOVE_SPEED * (sprint and SPRINT_MULTIPLIER or 1)
	local newPos = cam.CFrame.Position + localMove * speed * dt
	cam.CFrame = CFrame.new(newPos) * rot
end)
end)

addMainMenuButton("LOOP BRING ALL [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

--// Variables
local loopEnabled = false
local originalPositions = {}

--// GUI
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 300, 0, 100)
Frame.Position = UDim2.new(0.5, -150, 0, 50)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- all black
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true

local UICorner = Instance.new("UICorner", Frame)
UICorner.CornerRadius = UDim.new(0, 6)

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0.4, 0)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18
Title.Text = "TAONG GOMA LOOP BRING ALL"
Title.TextColor3 = Color3.fromRGB(255, 255, 255) -- white

local StatusButton = Instance.new("TextButton", Frame)
StatusButton.Size = UDim2.new(1, 0, 0.6, 0)
StatusButton.Position = UDim2.new(0, 0, 0.4, 0)
StatusButton.Font = Enum.Font.SourceSansBold
StatusButton.TextSize = 20
StatusButton.Text = "OFF"
StatusButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- black
StatusButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- white text

--// Toggle Function
StatusButton.MouseButton1Click:Connect(function()
    loopEnabled = not loopEnabled

    if loopEnabled then
        -- Save original positions
        originalPositions = {}
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                originalPositions[plr.Name] = plr.Character.HumanoidRootPart.CFrame
            end
        end

        StatusButton.Text = "ON"
        StatusButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- green text
    else
        -- Return players to original positions
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                local savedPos = originalPositions[plr.Name]
                if savedPos then
                    plr.Character.HumanoidRootPart.CFrame = savedPos
                end
            end
        end

        StatusButton.Text = "OFF"
        StatusButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- back to white text
    end
end)

--// Loop Bring All in Front
RunService.RenderStepped:Connect(function()
    if loopEnabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local hrp = LocalPlayer.Character.HumanoidRootPart
        local targetPos = hrp.Position + (hrp.CFrame.LookVector * 5)

        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                -- Remove tools
                plr.Backpack:ClearAllChildren()
                for _, tool in pairs(plr.Character:GetChildren()) do
                    if tool:IsA("Tool") then
                        tool:Destroy()
                    end
                end

                -- Bring to front
                plr.Character.HumanoidRootPart.CFrame = CFrame.new(targetPos)
            end
        end
    end
end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("AIM VIEWER [3KTG]", function()
	--// TAONG GOMA AIM VIEWER //--

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

local AimViewerEnabled = false
local playerLines = {}
local lineDistance = 50 -- haba ng line (studs)

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.CoreGui

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 200, 0, 60)
Frame.Position = UDim2.new(0.4, 0, 0.05, 0)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- black bg
Frame.BorderSizePixel = 2
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 25)
Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- black title bg
Title.Text = "TAONG GOMA AIM VIEWER"
Title.TextColor3 = Color3.fromRGB(255, 255, 255) -- white text
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18
Title.Parent = Frame

local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(1, 0, 0, 35)
ToggleButton.Position = UDim2.new(0, 0, 0, 25)
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- black bg
ToggleButton.Text = "Aim Viewer: OFF"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- red text (off)
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.TextSize = 18
ToggleButton.Parent = Frame

-- Function para gumawa ng line
local function createLine()
    local line = Drawing.new("Line")
    line.Thickness = 1.5
    line.Transparency = 1
    line.Color = Color3.fromRGB(0, 0, 0) -- black line
    return line
end

-- Toggle function
ToggleButton.MouseButton1Click:Connect(function()
    AimViewerEnabled = not AimViewerEnabled
    if AimViewerEnabled then
        ToggleButton.Text = "Aim Viewer: ON"
        ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- green kapag on
    else
        ToggleButton.Text = "Aim Viewer: OFF"
        ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255) -- red kapag off
        for _, line in pairs(playerLines) do
            line.Visible = false
        end
    end
end)

-- Main loop
RunService.RenderStepped:Connect(function()
    if AimViewerEnabled then
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer then
                if not playerLines[plr] then
                    playerLines[plr] = createLine()
                end
                local line = playerLines[plr]
                local char = plr.Character
                if char and char:FindFirstChild("Head") then
                    local head = char.Head
                    local startPos, onScreen = Camera:WorldToViewportPoint(head.Position)
                    local endPos = head.Position + (head.CFrame.LookVector * lineDistance)
                    local endScreen, onScreen2 = Camera:WorldToViewportPoint(endPos)
                    if onScreen or onScreen2 then
                        line.From = Vector2.new(startPos.X, startPos.Y)
                        line.To = Vector2.new(endScreen.X, endScreen.Y)
                        line.Visible = true
                    else
                        line.Visible = false
                    end
                else
                    line.Visible = false
                end
            end
        end
    end
end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("HEAD DETECTOR [3KTG]", function()
	-- Local Anti-Headshot Detection GUI (Client-Side)
-- Detects if someone is aiming at your head
-- With ON/OFF toggle button + Hotkey (G)

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

-- SETTINGS
local FOV_THRESHOLD = 5 -- degrees: smaller = stricter
local UPDATE_INTERVAL = 0.2 -- seconds
local detectionEnabled = true -- toggle state

-- ScreenGui Setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AntiHeadshotGUI"
ScreenGui.Parent = game.CoreGui

-- Main Frame
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 300, 0, 200)
Frame.Position = UDim2.new(1, -310, 0, 10)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0

-- Title
local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.Text = "Taong Goma Head Detector"

-- Player List
local PlayerList = Instance.new("TextLabel", Frame)
PlayerList.Size = UDim2.new(1, -10, 1, -40)
PlayerList.Position = UDim2.new(0, 5, 0, 35)
PlayerList.BackgroundTransparency = 1
PlayerList.TextColor3 = Color3.fromRGB(255, 255, 255)
PlayerList.Font = Enum.Font.Code
PlayerList.TextSize = 14
PlayerList.TextXAlignment = Enum.TextXAlignment.Left
PlayerList.TextYAlignment = Enum.TextYAlignment.Top
PlayerList.Text = "No threats detected."
PlayerList.RichText = true

-- Warning Label (Top Center)
local WarningLabel = Instance.new("TextLabel", ScreenGui)
WarningLabel.Size = UDim2.new(1, 0, 0, 30)
WarningLabel.Position = UDim2.new(0, 0, 0, 10)
WarningLabel.BackgroundTransparency = 1
WarningLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
WarningLabel.TextStrokeTransparency = 0
WarningLabel.Font = Enum.Font.GothamBold
WarningLabel.TextSize = 20
WarningLabel.Text = ""
WarningLabel.Visible = false

-- Toggle Button
local ToggleButton = Instance.new("TextButton", Frame)
ToggleButton.Size = UDim2.new(1, 0, 0, 25)
ToggleButton.Position = UDim2.new(0, 0, 1, -25)
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Font = Enum.Font.GothamBold
ToggleButton.TextSize = 14
ToggleButton.Text = "Detection: ON"

-- Function to check aim
local function isAimingAtHead(attacker)
    if not attacker.Character or not attacker.Character:FindFirstChild("Head") then return false end
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("Head") then return false end

    local attackerHead = attacker.Character.Head
    local localHead = LocalPlayer.Character.Head

    local lookDir = attackerHead.CFrame.LookVector
    local dirToOurHead = (localHead.Position - attackerHead.Position).Unit

    local dot = lookDir:Dot(dirToOurHead)
    local angle = math.deg(math.acos(dot))

    return angle <= FOV_THRESHOLD
end

-- Update loop
task.spawn(function()
    while true do
        task.wait(UPDATE_INTERVAL)

        if not detectionEnabled then
            PlayerList.Text = "Detection OFF"
            WarningLabel.Visible = false
            Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
            continue
        end

        local threats = {}
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer then
                if isAimingAtHead(plr) then
                    table.insert(threats, plr.Name)
                end
            end
        end

        if #threats > 0 then
            Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
            PlayerList.Text = "âš  Threats:\n" .. table.concat(threats, "\n")
            WarningLabel.Text = "âš  WARNING: " .. table.concat(threats, ", ") .. " aiming at you!"
            WarningLabel.Visible = true
        else
            Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
            PlayerList.Text = "No threats detected."
            WarningLabel.Visible = false
        end
    end
end)

-- Toggle function
local function toggleDetection()
    detectionEnabled = not detectionEnabled
    ToggleButton.Text = detectionEnabled and "Detection: ON" or "Detection: OFF"
end

-- Button Click
ToggleButton.MouseButton1Click:Connect(toggleDetection)

-- Hotkey (G)
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == Enum.KeyCode.G then
        toggleDetection()
    end
end)
end)

addMainMenuButton("TPUNANCHORED TO PLAYER [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local Debris = game:GetService("Debris")

--// GUI Setup
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
ScreenGui.Name = "UnanchoredToolTP"
ScreenGui.ResetOnSpawn = false

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 300, 0, 230)
Frame.Position = UDim2.new(0, 20, 0.5, -115)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Instance.new("UICorner", Frame)

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Text = "TAONG GOMA UNANCHORED TP"
Title.TextColor3 = Color3.new(1, 1, 1)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 14
Title.BackgroundTransparency = 1

-- Username Input
local UsernameBox = Instance.new("TextBox", Frame)
UsernameBox.PlaceholderText = "Enter Player Username"
UsernameBox.Size = UDim2.new(1, -20, 0, 30)
UsernameBox.Position = UDim2.new(0, 10, 0, 40)
UsernameBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
UsernameBox.TextColor3 = Color3.new(1, 1, 1)
UsernameBox.Font = Enum.Font.Gotham
UsernameBox.TextSize = 14
UsernameBox.Text = ""
Instance.new("UICorner", UsernameBox)

-- Filter Label
local FilterLabel = Instance.new("TextLabel", Frame)
FilterLabel.Size = UDim2.new(1, -20, 0, 20)
FilterLabel.Position = UDim2.new(0, 10, 0, 80)
FilterLabel.Text = "Tool Filter:"
FilterLabel.TextColor3 = Color3.new(1, 1, 1)
FilterLabel.Font = Enum.Font.Gotham
FilterLabel.TextSize = 13
FilterLabel.BackgroundTransparency = 1

-- Filter Dropdown
local FilterDropdown = Instance.new("TextButton", Frame)
FilterDropdown.Size = UDim2.new(1, -20, 0, 30)
FilterDropdown.Position = UDim2.new(0, 10, 0, 100)
FilterDropdown.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
FilterDropdown.Text = "All Tools"
FilterDropdown.TextColor3 = Color3.new(1, 1, 1)
FilterDropdown.Font = Enum.Font.Gotham
FilterDropdown.TextSize = 13
Instance.new("UICorner", FilterDropdown)

-- Cycle filter options
local filterModes = {"All Tools", "Guns Only", "Melee Only"}
local filterIndex = 1

FilterDropdown.MouseButton1Click:Connect(function()
	filterIndex = filterIndex + 1
	if filterIndex > #filterModes then
		filterIndex = 1
	end
	FilterDropdown.Text = filterModes[filterIndex]
end)

-- Filter logic
local function isToolAllowed(tool)
	local name = tool.Name:lower()

	if filterModes[filterIndex] == "All Tools" then
		return true
	elseif filterModes[filterIndex] == "Guns Only" then
		return name:find("gun") or name:find("pistol") or name:find("UZI") or name:find("silenced pistol") or name:find("desert deagle") or name:find("glock-17") or name:find("glock-19")
	elseif filterModes[filterIndex] == "Melee Only" then
		return name:find("knife") or name:find("bat") or name:find("knife") or name:find("blade") or name:find("crowbar")
	end

	return false
end

-- Main TP (tools fly to player)
local function teleportToolsToPlayer(targetPlayer)
	if not targetPlayer then
		warn("No player specified or player not found.")
		return
	end

	local root = targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart")
	if not root then
		warn("Target player has no HRP")
		return
	end

	for _, v in ipairs(Workspace:GetDescendants()) do
		if v:IsA("Tool") or (v:IsA("BasePart") and v.Name == "Handle") then
			local tool = v:IsA("Tool") and v or v:FindFirstAncestorWhichIsA("Tool")
			if tool and tool:IsDescendantOf(Workspace) and not tool:FindFirstChildOfClass("Humanoid") then
				local handle = tool:FindFirstChild("Handle")
				if handle and not handle.Anchored and isToolAllowed(tool) then
					if handle:FindFirstChild("BodyVelocity") then handle.BodyVelocity:Destroy() end
					local bv = Instance.new("BodyVelocity")
					bv.Velocity = (root.Position - handle.Position).Unit * 100
					bv.MaxForce = Vector3.new(1e5, 1e5, 1e5)
					bv.P = 10000
					bv.Parent = handle
					Debris:AddItem(bv, 0.5)
				end
			end
		end
	end
end

-- Grab Tools to Backpack
local function grabToolsToBackpack()
	for _, v in ipairs(Workspace:GetDescendants()) do
		if v:IsA("Tool") and v:FindFirstChild("Handle") and not v.Handle.Anchored and isToolAllowed(v) then
			v.Parent = LocalPlayer.Backpack
		end
	end
end

-- TP Button
local TPButton = Instance.new("TextButton", Frame)
TPButton.Size = UDim2.new(1, -20, 0, 30)
TPButton.Position = UDim2.new(0, 10, 1, -75)
TPButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
TPButton.Text = "Teleport Unanchored To Player"
TPButton.TextColor3 = Color3.new(1, 1, 1)
TPButton.Font = Enum.Font.GothamBold
TPButton.TextSize = 13
Instance.new("UICorner", TPButton)

-- Grab Button
local GrabButton = Instance.new("TextButton", Frame)
GrabButton.Size = UDim2.new(1, -20, 0, 30)
GrabButton.Position = UDim2.new(0, 10, 1, -40)
GrabButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
GrabButton.Text = "Grab Tools"
GrabButton.TextColor3 = Color3.new(1, 1, 1)
GrabButton.Font = Enum.Font.GothamBold
GrabButton.TextSize = 13
Instance.new("UICorner", GrabButton)

-- Button Events
TPButton.MouseButton1Click:Connect(function()
	local inputName = UsernameBox.Text
	if inputName == "" then
		warn("No username entered.")
		return
	end

	local targetPlayer = Players:FindFirstChild(inputName)
	if not targetPlayer then
		warn("Player not found: " .. inputName)
		return
	end

	teleportToolsToPlayer(targetPlayer)
end)

GrabButton.MouseButton1Click:Connect(grabToolsToBackpack)
end)

addMainMenuButton("FLING ALL [3KTG]", function()
	game:GetService("StarterGui"):SetCore("SendNotification",{
    Title = "Script Executed";
    Text = "Fling All";
    Duration = 6;
})
 
local Targets = {"All"} -- "All", "Target Name", "arian_was_here"
 
local Players = game:GetService("Players")
local Player = Players.LocalPlayer
 
local AllBool = false
 
local GetPlayer = function(Name)
    Name = Name:lower()
    if Name == "all" or Name == "others" then
        AllBool = true
        return
    elseif Name == "random" then
        local GetPlayers = Players:GetPlayers()
        if table.find(GetPlayers,Player) then table.remove(GetPlayers,table.find(GetPlayers,Player)) end
        return GetPlayers[math.random(#GetPlayers)]
    elseif Name ~= "random" and Name ~= "all" and Name ~= "others" then
        for _,x in next, Players:GetPlayers() do
            if x ~= Player then
                if x.Name:lower():match("^"..Name) then
                    return x;
                elseif x.DisplayName:lower():match("^"..Name) then
                    return x;
                end
            end
        end
    else
        return
    end
end
 
local Message = function(_Title, _Text, Time)
    game:GetService("StarterGui"):SetCore("SendNotification", {Title = _Title, Text = _Text, Duration = Time})
end
 
local SkidFling = function(TargetPlayer)
    local Character = Player.Character
    local Humanoid = Character and Character:FindFirstChildOfClass("Humanoid")
    local RootPart = Humanoid and Humanoid.RootPart
 
    local TCharacter = TargetPlayer.Character
    local THumanoid
    local TRootPart
    local THead
    local Accessory
    local Handle
 
    if TCharacter:FindFirstChildOfClass("Humanoid") then
        THumanoid = TCharacter:FindFirstChildOfClass("Humanoid")
    end
    if THumanoid and THumanoid.RootPart then
        TRootPart = THumanoid.RootPart
    end
    if TCharacter:FindFirstChild("Head") then
        THead = TCharacter.Head
    end
    if TCharacter:FindFirstChildOfClass("Accessory") then
        Accessory = TCharacter:FindFirstChildOfClass("Accessory")
    end
    if Accessoy and Accessory:FindFirstChild("Handle") then
        Handle = Accessory.Handle
    end
 
    if Character and Humanoid and RootPart then
        if RootPart.Velocity.Magnitude < 50 then
            getgenv().OldPos = RootPart.CFrame
        end
        if THumanoid and THumanoid.Sit and not AllBool then
            return Message("Error Occurred", "Targeting is sitting", 5) -- u can remove dis part if u want lol
        end
        if THead then
            workspace.CurrentCamera.CameraSubject = THead
        elseif not THead and Handle then
            workspace.CurrentCamera.CameraSubject = Handle
        elseif THumanoid and TRootPart then
            workspace.CurrentCamera.CameraSubject = THumanoid
        end
        if not TCharacter:FindFirstChildWhichIsA("BasePart") then
            return
        end
 
        local FPos = function(BasePart, Pos, Ang)
            RootPart.CFrame = CFrame.new(BasePart.Position) * Pos * Ang
            Character:SetPrimaryPartCFrame(CFrame.new(BasePart.Position) * Pos * Ang)
            RootPart.Velocity = Vector3.new(9e7, 9e7 * 10, 9e7)
            RootPart.RotVelocity = Vector3.new(9e8, 9e8, 9e8)
        end
 
        local SFBasePart = function(BasePart)
            local TimeToWait = 2
            local Time = tick()
            local Angle = 0
 
            repeat
                if RootPart and THumanoid then
                    if BasePart.Velocity.Magnitude < 50 then
                        Angle = Angle + 100
 
                        FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle),0 ,0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(2.25, 1.5, -2.25) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(-2.25, -1.5, 2.25) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection,CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection,CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
                    else
                        FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, -THumanoid.WalkSpeed), CFrame.Angles(0, 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, 1.5, TRootPart.Velocity.Magnitude / 1.25), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, -TRootPart.Velocity.Magnitude / 1.25), CFrame.Angles(0, 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, 1.5, TRootPart.Velocity.Magnitude / 1.25), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5 ,0), CFrame.Angles(math.rad(-90), 0, 0))
                        task.wait()
 
                        FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
                        task.wait()
                    end
                else
                    break
                end
            until BasePart.Velocity.Magnitude > 500 or BasePart.Parent ~= TargetPlayer.Character or TargetPlayer.Parent ~= Players or not TargetPlayer.Character == TCharacter or THumanoid.Sit or Humanoid.Health <= 0 or tick() > Time + TimeToWait
        end
 
        workspace.FallenPartsDestroyHeight = 0/0
 
        local BV = Instance.new("BodyVelocity")
        BV.Name = "EpixVel"
        BV.Parent = RootPart
        BV.Velocity = Vector3.new(9e8, 9e8, 9e8)
        BV.MaxForce = Vector3.new(1/0, 1/0, 1/0)
 
        Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, false)
 
        if TRootPart and THead then
            if (TRootPart.CFrame.p - THead.CFrame.p).Magnitude > 5 then
                SFBasePart(THead)
            else
                SFBasePart(TRootPart)
            end
        elseif TRootPart and not THead then
            SFBasePart(TRootPart)
        elseif not TRootPart and THead then
            SFBasePart(THead)
        elseif not TRootPart and not THead and Accessory and Handle then
            SFBasePart(Handle)
        else
            return Message("Error Occurred", "Target is missing everything", 5)
        end
 
        BV:Destroy()
        Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, true)
        workspace.CurrentCamera.CameraSubject = Humanoid
 
        repeat
            RootPart.CFrame = getgenv().OldPos * CFrame.new(0, .5, 0)
            Character:SetPrimaryPartCFrame(getgenv().OldPos * CFrame.new(0, .5, 0))
            Humanoid:ChangeState("GettingUp")
            table.foreach(Character:GetChildren(), function(_, x)
                if x:IsA("BasePart") then
                    x.Velocity, x.RotVelocity = Vector3.new(), Vector3.new()
                end
            end)
            task.wait()
        until (RootPart.Position - getgenv().OldPos.p).Magnitude < 25
        workspace.FallenPartsDestroyHeight = getgenv().FPDH
    else
        return Message("Error Ocurrido", "El Script A Fallado", 5)
    end
end
 
if not Welcome then Message("By Augus X", "", 6) end
getgenv().Welcome = true
if Targets[1] then for _,x in next, Targets do GetPlayer(x) end else return end
 
if AllBool then
    for _,x in next, Players:GetPlayers() do
        SkidFling(x)
    end
end
 
for _,x in next, Targets do
    if GetPlayer(x) and GetPlayer(x) ~= Player then
        if GetPlayer(x).UserId ~= 2924145477 then
            local TPlayer = GetPlayer(x)
            if TPlayer then
                SkidFling(TPlayer)
            end
        else
            Message("ERROR AL ASER FLING", "", 8)
        end
    elseif not GetPlayer(x) and not AllBool then
        Message("ERROR OCURRIDO", "NO SE LE ISO FLING", 8)
    end
end
end)

addMainMenuButton("HITBOX EXTENDER [3KTG]", function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/LisSploit/HitBoxExtender/main/Universal",true))()
end)

--// Function to Add Buttons to Main Menu
local function addMainMenuButton(text, callback)
	local panel = tabPanels["PLAYER MENU"]
	if not panel then return end

	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, -20, 0, 36)
	button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	button.TextColor3 = Color3.new(1, 1, 1)
	button.Font = Enum.Font.GothamSemibold
	button.TextSize = 14
	button.Text = text
	button.AutoButtonColor = false
	button.Parent = panel
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

	button.MouseEnter:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)
	button.MouseLeave:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)

	button.MouseButton1Click:Connect(function()
		clickSound:Play()
		callback()
	end)
end

--// 4 Buttons in Roleplay Script
addMainMenuButton("PLAYER SCANNER [3KTG]", function()
	--// TAONG GOMA PLAYER SCANNER
-- Solid black GUI + Modern font + Hover effects + Click animations + Working VIEW/UNVIEW/TELEPORT

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UIS = game:GetService("UserInputService")

-- Main ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 350, 0, 400)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BorderSizePixel = 0
MainFrame.Visible = true
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

-- UI Corner
local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 8)
MainCorner.Parent = MainFrame

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundTransparency = 1
Title.Text = "TAONG GOMA PLAYER SCANNER"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.Parent = MainFrame

-- Scan Button
local ScanButton = Instance.new("TextButton")
ScanButton.Size = UDim2.new(0.9, 0, 0, 35)
ScanButton.Position = UDim2.new(0.05, 0, 0, 50)
ScanButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ScanButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ScanButton.Font = Enum.Font.GothamBold
ScanButton.TextSize = 18
ScanButton.Text = "SCAN"
ScanButton.AutoButtonColor = false
ScanButton.Parent = MainFrame

local ScanCorner = Instance.new("UICorner")
ScanCorner.CornerRadius = UDim.new(0, 6)
ScanCorner.Parent = ScanButton

-- Hover effect
local function AddHoverEffect(button)
	button.MouseEnter:Connect(function()
		button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	end)
	button.MouseLeave:Connect(function()
		button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	end)
	button.MouseButton1Click:Connect(function()
		button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		task.wait(0.1)
		button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	end)
end
AddHoverEffect(ScanButton)

-- Scrollable Player List
local PlayerListFrame = Instance.new("ScrollingFrame")
PlayerListFrame.Size = UDim2.new(0.9, 0, 0, 280)
PlayerListFrame.Position = UDim2.new(0.05, 0, 0, 90)
PlayerListFrame.BackgroundTransparency = 1
PlayerListFrame.BorderSizePixel = 0
PlayerListFrame.ScrollBarThickness = 6
PlayerListFrame.ScrollBarImageColor3 = Color3.fromRGB(0, 0, 0)
PlayerListFrame.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Parent = PlayerListFrame
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0, 4)

-- Function to create each player entry
local function CreatePlayerButton(player)
	local PlayerButton = Instance.new("TextButton")
	PlayerButton.Size = UDim2.new(1, 0, 0, 30)
	PlayerButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	PlayerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	PlayerButton.Font = Enum.Font.Gotham
	PlayerButton.TextSize = 16
	PlayerButton.Text = player.DisplayName .. " (@" .. player.Name .. ")"
	PlayerButton.AutoButtonColor = false
	PlayerButton.Parent = PlayerListFrame

	local PlayerCorner = Instance.new("UICorner")
	PlayerCorner.CornerRadius = UDim.new(0, 6)
	PlayerCorner.Parent = PlayerButton

	AddHoverEffect(PlayerButton)

	-- Actions Frame
	local ActionsFrame = Instance.new("Frame")
	ActionsFrame.Size = UDim2.new(1, 0, 0, 30)
	ActionsFrame.BackgroundTransparency = 1
	ActionsFrame.Visible = false
	ActionsFrame.Parent = PlayerListFrame

	local function CreateActionButton(text)
		local Btn = Instance.new("TextButton")
		Btn.Size = UDim2.new(0.3, 0, 1, 0)
		Btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		Btn.TextColor3 = Color3.fromRGB(255, 255, 255)
		Btn.Font = Enum.Font.GothamBold
		Btn.TextSize = 14
		Btn.Text = text
		Btn.AutoButtonColor = false
		Btn.Parent = ActionsFrame

		local BtnCorner = Instance.new("UICorner")
		BtnCorner.CornerRadius = UDim.new(0, 6)
		BtnCorner.Parent = Btn

		AddHoverEffect(Btn)
		return Btn
	end

	local ViewBtn = CreateActionButton("VIEW")
	local UnviewBtn = CreateActionButton("UNVIEW")
	local TeleportBtn = CreateActionButton("TELEPORT")

	ViewBtn.Position = UDim2.new(0, 0, 0, 0)
	UnviewBtn.Position = UDim2.new(0.35, 0, 0, 0)
	TeleportBtn.Position = UDim2.new(0.7, 0, 0, 0)

	-- === BUTTON FUNCTIONS ===
	ViewBtn.MouseButton1Click:Connect(function()
		if player.Character and player.Character:FindFirstChild("Head") then
			workspace.CurrentCamera.CameraSubject = player.Character:FindFirstChild("Head")
		end
	end)

	UnviewBtn.MouseButton1Click:Connect(function()
		if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
			workspace.CurrentCamera.CameraSubject = LocalPlayer.Character:FindFirstChild("Humanoid")
		end
	end)

	TeleportBtn.MouseButton1Click:Connect(function()
		if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and
		   LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
			LocalPlayer.Character.HumanoidRootPart.CFrame =
				player.Character.HumanoidRootPart.CFrame + Vector3.new(2, 0, 0)
		end
	end)

	-- Show/hide action buttons
	PlayerButton.MouseButton1Click:Connect(function()
		ActionsFrame.Visible = not ActionsFrame.Visible
	end)
end

-- SCAN function
ScanButton.MouseButton1Click:Connect(function()
	for _, child in ipairs(PlayerListFrame:GetChildren()) do
		if child:IsA("TextButton") or child:IsA("Frame") then
			child:Destroy()
		end
	end

	task.spawn(function()
		for _, player in ipairs(Players:GetPlayers()) do
			if player ~= LocalPlayer then
				CreatePlayerButton(player)
				task.wait(0.15)
			end
		end
	end)
end)

-- Hide/Unhide with U
UIS.InputBegan:Connect(function(input, gp)
	if not gp and input.KeyCode == Enum.KeyCode.U then
		MainFrame.Visible = not MainFrame.Visible
	end
end)
end)

--// 4 Buttons in Roleplay Script
addMainMenuButton("TRACK ALL MUSCLE T TO OPEN / OFF [3KTG]", function()
--// Player Tracker + NameTag Display | Toggle with T key (Solara Executor)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- Wait for character and HRP
repeat wait() until LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")

local trackingEnabled = false
local lines = {}
local nameTags = {}
local renderConnection = nil

-- Create ESP (line + name tag) for player
local function createESP(player)
    if player == LocalPlayer then return end
    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end

    local origin = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    local target = player.Character:FindFirstChild("HumanoidRootPart")

    if not origin or not target then return end

    -- Create white neon line
    local line = Instance.new("Part")
    line.Anchored = true
    line.CanCollide = false
    line.Color = Color3.new(1, 1, 1)
    line.Material = Enum.Material.Neon
    line.Transparency = 0
    line.Size = Vector3.new(0.1, 0.1, 1)
    line.Name = "ESP_Line_" .. player.Name
    line.Parent = workspace
    lines[player] = line

    -- Create BillboardGui (name tag)
    local head = player.Character:FindFirstChild("Head")
    if head then
        local billboard = Instance.new("BillboardGui")
        billboard.Name = "NameTag"
        billboard.Size = UDim2.new(0, 100, 0, 30)
        billboard.StudsOffset = Vector3.new(0, 2.2, 0)
        billboard.AlwaysOnTop = true
        billboard.Adornee = head

        local textLabel = Instance.new("TextLabel")
        textLabel.Size = UDim2.new(1, 0, 1, 0)
        textLabel.BackgroundTransparency = 1
        textLabel.Text = player.DisplayName .. "\n(" .. player.Name .. ")"
        textLabel.TextColor3 = Color3.new(1, 1, 1)
        textLabel.TextStrokeTransparency = 0.4
        textLabel.Font = Enum.Font.SourceSansBold
        textLabel.TextScaled = true
        textLabel.Parent = billboard

        billboard.Parent = head
        nameTags[player] = billboard
    end
end

-- Update all lines
local function updateESP()
    for player, line in pairs(lines) do
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and line.Parent then
            local origin = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            local target = player.Character:FindFirstChild("HumanoidRootPart")
            if origin and target then
                local direction = target.Position - origin.Position
                local distance = direction.Magnitude
                line.Size = Vector3.new(0.1, 0.1, distance)
                line.CFrame = CFrame.new(origin.Position, target.Position) * CFrame.new(0, 0, -distance / 2)
            else
                line:Destroy()
                lines[player] = nil
            end
        else
            line:Destroy()
            lines[player] = nil
        end
    end
    for player, tag in pairs(nameTags) do
        if not player.Character or not player.Character:FindFirstChild("Head") or not tag.Parent then
            tag:Destroy()
            nameTags[player] = nil
        end
    end
end

-- Clear all ESP
local function clearESP()
    for _, line in pairs(lines) do
        if line then line:Destroy() end
    end
    for _, tag in pairs(nameTags) do
        if tag then tag:Destroy() end
    end
    lines = {}
    nameTags = {}
    if renderConnection then
        renderConnection:Disconnect()
        renderConnection = nil
    end
    print("[Tracker] ESP fully cleared.")
end

-- Toggle function
local function toggleESP()
    trackingEnabled = not trackingEnabled

    if trackingEnabled then
        print("[Tracker] Tracking: ON")
        for _, player in ipairs(Players:GetPlayers()) do
            createESP(player)
        end
        renderConnection = RunService.RenderStepped:Connect(updateESP)
        Players.PlayerAdded:Connect(function(player)
            player.CharacterAdded:Connect(function()
                wait(1)
                createESP(player)
            end)
        end)
    else
        print("[Tracker] Tracking: OFF")
        clearESP()
    end
end

-- Keybind (T)
local success, errorMsg = pcall(function()
    UserInputService.InputBegan:Connect(function(input, isProcessed)
        if isProcessed then return end
        if input.KeyCode == Enum.KeyCode.T then
            toggleESP()
        end
    end)
end)
if not success then
    print("[Tracker] Error setting up keybind: " .. tostring(errorMsg))
end

print("[Tracker] Press [T] to toggle Player Tracker with Name Tags.")
end)

addMainMenuButton("ESP [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

--// GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "ESP_Toggle_GUI"
gui.ResetOnSpawn = false
gui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 100, 0, 35)
toggleButton.Position = UDim2.new(0, 20, 0, 120)
toggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Text = "ESP: ON"
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextSize = 14
toggleButton.Parent = gui

local corner = Instance.new("UICorner", toggleButton)
corner.CornerRadius = UDim.new(0, 6)

--// Toggle State
local ESP_ENABLED = true
local ESPObjects = {}

--// Drawing Helpers
local function newLine()
	local line = Drawing.new("Line")
	line.Thickness = 2
	line.Color = Color3.fromRGB(255, 255, 255) -- Changed to white
	line.Visible = true
	return line
end

local function newText()
	local text = Drawing.new("Text")
	text.Size = 14
	text.Color = Color3.fromRGB(255, 255, 255)
	text.Center = true
	text.Outline = true
	text.Visible = true
	return text
end

local function clearESP(player)
	if ESPObjects[player] then
		for _, obj in pairs(ESPObjects[player]) do
			if obj.Remove then obj:Remove() end
		end
		ESPObjects[player] = nil
	end
end

--// Get 2D screen position of 3D part
local function getPartPos(part)
	if not part then return nil, false end
	local pos, visible = Camera:WorldToViewportPoint(part.Position)
	return Vector2.new(pos.X, pos.Y), visible
end

--// ESP Rendering
RunService.RenderStepped:Connect(function()
	if not ESP_ENABLED then
		for _, v in pairs(ESPObjects) do
			for _, obj in pairs(v) do
				obj.Visible = false
			end
		end
		return
	end

	for _, player in ipairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character then
			local char = player.Character
			local esp = ESPObjects[player]

			if not esp then
				esp = {
					HeadToTorso = newLine(),
					TorsoToLeftArm = newLine(),
					TorsoToRightArm = newLine(),
					TorsoToLeftLeg = newLine(),
					TorsoToRightLeg = newLine(),
					Name = newText(),
				}
				ESPObjects[player] = esp
			end

			local headPos, headVis = getPartPos(char:FindFirstChild("Head"))
			local torsoPos, torsoVis = getPartPos(char:FindFirstChild("HumanoidRootPart"))
			local laPos, laVis = getPartPos(char:FindFirstChild("LeftUpperArm") or char:FindFirstChild("Left Arm"))
			local raPos, raVis = getPartPos(char:FindFirstChild("RightUpperArm") or char:FindFirstChild("Right Arm"))
			local llPos, llVis = getPartPos(char:FindFirstChild("LeftUpperLeg") or char:FindFirstChild("Left Leg"))
			local rlPos, rlVis = getPartPos(char:FindFirstChild("RightUpperLeg") or char:FindFirstChild("Right Leg"))

			if headVis and torsoVis then
				esp.HeadToTorso.From = headPos
				esp.HeadToTorso.To = torsoPos
				esp.HeadToTorso.Visible = true
			else
				esp.HeadToTorso.Visible = false
			end

			if torsoVis and laVis then
				esp.TorsoToLeftArm.From = torsoPos
				esp.TorsoToLeftArm.To = laPos
				esp.TorsoToLeftArm.Visible = true
			else
				esp.TorsoToLeftArm.Visible = false
			end

			if torsoVis and raVis then
				esp.TorsoToRightArm.From = torsoPos
				esp.TorsoToRightArm.To = raPos
				esp.TorsoToRightArm.Visible = true
			else
				esp.TorsoToRightArm.Visible = false
			end

			if torsoVis and llVis then
				esp.TorsoToLeftLeg.From = torsoPos
				esp.TorsoToLeftLeg.To = llPos
				esp.TorsoToLeftLeg.Visible = true
			else
				esp.TorsoToLeftLeg.Visible = false
			end

			if torsoVis and rlVis then
				esp.TorsoToRightLeg.From = torsoPos
				esp.TorsoToRightLeg.To = rlPos
				esp.TorsoToRightLeg.Visible = true
			else
				esp.TorsoToRightLeg.Visible = false
			end

			if headVis then
				esp.Name.Position = Vector2.new(headPos.X, headPos.Y - 20)
				esp.Name.Text = player.Name
				esp.Name.Visible = true
			else
				esp.Name.Visible = false
			end
		end
	end
end)

--// Player leave cleanup
Players.PlayerRemoving:Connect(function(player)
	clearESP(player)
end)

--// Toggle Button
toggleButton.MouseButton1Click:Connect(function()
	ESP_ENABLED = not ESP_ENABLED
	toggleButton.Text = ESP_ENABLED and "ESP: ON" or "ESP: OFF"
end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("PLAYER SCANNER [3KTG]", function()
	--// TAONG GOMA PLAYER SCANNER
-- Solid black GUI + Modern font + Hover effects + Click animations + Working VIEW/UNVIEW/TELEPORT

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UIS = game:GetService("UserInputService")

-- Main ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 350, 0, 400)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BorderSizePixel = 0
MainFrame.Visible = true
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

-- UI Corner
local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 8)
MainCorner.Parent = MainFrame

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundTransparency = 1
Title.Text = "TAONG GOMA PLAYER SCANNER"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.Parent = MainFrame

-- Scan Button
local ScanButton = Instance.new("TextButton")
ScanButton.Size = UDim2.new(0.9, 0, 0, 35)
ScanButton.Position = UDim2.new(0.05, 0, 0, 50)
ScanButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ScanButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ScanButton.Font = Enum.Font.GothamBold
ScanButton.TextSize = 18
ScanButton.Text = "SCAN"
ScanButton.AutoButtonColor = false
ScanButton.Parent = MainFrame

local ScanCorner = Instance.new("UICorner")
ScanCorner.CornerRadius = UDim.new(0, 6)
ScanCorner.Parent = ScanButton

-- Hover effect
local function AddHoverEffect(button)
	button.MouseEnter:Connect(function()
		button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	end)
	button.MouseLeave:Connect(function()
		button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	end)
	button.MouseButton1Click:Connect(function()
		button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		task.wait(0.1)
		button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	end)
end
AddHoverEffect(ScanButton)

-- Scrollable Player List
local PlayerListFrame = Instance.new("ScrollingFrame")
PlayerListFrame.Size = UDim2.new(0.9, 0, 0, 280)
PlayerListFrame.Position = UDim2.new(0.05, 0, 0, 90)
PlayerListFrame.BackgroundTransparency = 1
PlayerListFrame.BorderSizePixel = 0
PlayerListFrame.ScrollBarThickness = 6
PlayerListFrame.ScrollBarImageColor3 = Color3.fromRGB(0, 0, 0)
PlayerListFrame.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Parent = PlayerListFrame
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0, 4)

-- Function to create each player entry
local function CreatePlayerButton(player)
	local PlayerButton = Instance.new("TextButton")
	PlayerButton.Size = UDim2.new(1, 0, 0, 30)
	PlayerButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	PlayerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	PlayerButton.Font = Enum.Font.Gotham
	PlayerButton.TextSize = 16
	PlayerButton.Text = player.DisplayName .. " (@" .. player.Name .. ")"
	PlayerButton.AutoButtonColor = false
	PlayerButton.Parent = PlayerListFrame

	local PlayerCorner = Instance.new("UICorner")
	PlayerCorner.CornerRadius = UDim.new(0, 6)
	PlayerCorner.Parent = PlayerButton

	AddHoverEffect(PlayerButton)

	-- Actions Frame
	local ActionsFrame = Instance.new("Frame")
	ActionsFrame.Size = UDim2.new(1, 0, 0, 30)
	ActionsFrame.BackgroundTransparency = 1
	ActionsFrame.Visible = false
	ActionsFrame.Parent = PlayerListFrame

	local function CreateActionButton(text)
		local Btn = Instance.new("TextButton")
		Btn.Size = UDim2.new(0.3, 0, 1, 0)
		Btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		Btn.TextColor3 = Color3.fromRGB(255, 255, 255)
		Btn.Font = Enum.Font.GothamBold
		Btn.TextSize = 14
		Btn.Text = text
		Btn.AutoButtonColor = false
		Btn.Parent = ActionsFrame

		local BtnCorner = Instance.new("UICorner")
		BtnCorner.CornerRadius = UDim.new(0, 6)
		BtnCorner.Parent = Btn

		AddHoverEffect(Btn)
		return Btn
	end

	local ViewBtn = CreateActionButton("VIEW")
	local UnviewBtn = CreateActionButton("UNVIEW")
	local TeleportBtn = CreateActionButton("TELEPORT")

	ViewBtn.Position = UDim2.new(0, 0, 0, 0)
	UnviewBtn.Position = UDim2.new(0.35, 0, 0, 0)
	TeleportBtn.Position = UDim2.new(0.7, 0, 0, 0)

	-- === BUTTON FUNCTIONS ===
	ViewBtn.MouseButton1Click:Connect(function()
		if player.Character and player.Character:FindFirstChild("Head") then
			workspace.CurrentCamera.CameraSubject = player.Character:FindFirstChild("Head")
		end
	end)

	UnviewBtn.MouseButton1Click:Connect(function()
		if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
			workspace.CurrentCamera.CameraSubject = LocalPlayer.Character:FindFirstChild("Humanoid")
		end
	end)

	TeleportBtn.MouseButton1Click:Connect(function()
		if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and
		   LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
			LocalPlayer.Character.HumanoidRootPart.CFrame =
				player.Character.HumanoidRootPart.CFrame + Vector3.new(2, 0, 0)
		end
	end)

	-- Show/hide action buttons
	PlayerButton.MouseButton1Click:Connect(function()
		ActionsFrame.Visible = not ActionsFrame.Visible
	end)
end

-- SCAN function
ScanButton.MouseButton1Click:Connect(function()
	for _, child in ipairs(PlayerListFrame:GetChildren()) do
		if child:IsA("TextButton") or child:IsA("Frame") then
			child:Destroy()
		end
	end

	task.spawn(function()
		for _, player in ipairs(Players:GetPlayers()) do
			if player ~= LocalPlayer then
				CreatePlayerButton(player)
				task.wait(0.15)
			end
		end
	end)
end)

-- Hide/Unhide with U
UIS.InputBegan:Connect(function(input, gp)
	if not gp and input.KeyCode == Enum.KeyCode.U then
		MainFrame.Visible = not MainFrame.Visible
	end
end)
end)

--// 8 Buttons in Main Menu
addMainMenuButton("PLAYER LIST TP [3KTG]", function()
	-- TAONG GOMA - Player Viewer (LocalScript sa StarterGui)
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- GUI parent
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TaongGomaGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Toggle visibility keybind (K)
UserInputService.InputBegan:Connect(function(input, isProcessed)
	if not isProcessed and input.KeyCode == Enum.KeyCode.K then
		screenGui.Enabled = not screenGui.Enabled
	end
end)

-- Main draggable frame
local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 520, 0, 360)
mainFrame.Position = UDim2.new(0.5, -260, 0.5, -180)
mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.BorderSizePixel = 0

-- Title bar
local titleBar = Instance.new("TextLabel", mainFrame)
titleBar.Size = UDim2.new(1, 0, 0, 36)
titleBar.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
titleBar.Text = "TAONG GOMA"
titleBar.Font = Enum.Font.GothamBold
titleBar.TextSize = 22
titleBar.TextColor3 = Color3.fromRGB(255, 255, 255)
titleBar.BorderSizePixel = 0

-- Left: player list (scrolling)
local leftWidth = 0.34
local scroll = Instance.new("ScrollingFrame", mainFrame)
scroll.Name = "PlayerList"
scroll.Position = UDim2.new(0, 0, 0, 36)
scroll.Size = UDim2.new(leftWidth, 0, 1, -36)
scroll.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
scroll.ScrollBarThickness = 6
scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
scroll.BorderSizePixel = 0

local listLayout = Instance.new("UIListLayout", scroll)
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.Padding = UDim.new(0, 4)

-- Right: info + buttons
local right = Instance.new("Frame", mainFrame)
right.Position = UDim2.new(leftWidth, 0, 0, 36)
right.Size = UDim2.new(1 - leftWidth, 0, 1, -36)
right.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
right.BorderSizePixel = 0

-- Center container for Name/Health
local infoContainer = Instance.new("Frame", right)
infoContainer.Size = UDim2.new(1, 0, 0.55, 0)
infoContainer.Position = UDim2.new(0, 0, 0, 8)
infoContainer.BackgroundTransparency = 1

local nameLabel = Instance.new("TextLabel", infoContainer)
nameLabel.Size = UDim2.new(1, -20, 0, 36)
nameLabel.Position = UDim2.new(0, 10, 0, 10)
nameLabel.BackgroundTransparency = 1
nameLabel.Font = Enum.Font.GothamBold
nameLabel.TextSize = 22
nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
nameLabel.Text = "Name: None"
nameLabel.TextXAlignment = Enum.TextXAlignment.Center

local healthLabel = Instance.new("TextLabel", infoContainer)
healthLabel.Size = UDim2.new(1, -20, 0, 26)
healthLabel.Position = UDim2.new(0, 10, 0, 60)
healthLabel.BackgroundTransparency = 1
healthLabel.Font = Enum.Font.Gotham
healthLabel.TextSize = 18
healthLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
healthLabel.Text = "Health: N/A"
healthLabel.TextXAlignment = Enum.TextXAlignment.Center

-- Buttons container
local buttonContainer = Instance.new("Frame", right)
buttonContainer.Size = UDim2.new(1, 0, 0.35, 0)
buttonContainer.Position = UDim2.new(0, 0, 0.6, 0)
buttonContainer.BackgroundTransparency = 1

local padding = Instance.new("UIPadding", buttonContainer)
padding.PaddingTop = UDim.new(0, 5)
padding.PaddingBottom = UDim.new(0, 5)

local btnLayout = Instance.new("UIListLayout", buttonContainer)
btnLayout.SortOrder = Enum.SortOrder.LayoutOrder
btnLayout.Padding = UDim.new(0, 8)
btnLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
btnLayout.VerticalAlignment = Enum.VerticalAlignment.Top

-- Button creator
local function createButton(label)
	local b = Instance.new("TextButton")
	b.Size = UDim2.new(0.85, 0, 0.22, 0)
	b.AnchorPoint = Vector2.new(0.5, 0)
	b.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	b.Font = Enum.Font.GothamBold
	b.TextSize = 18
	b.Text = label
	b.TextColor3 = Color3.fromRGB(255, 255, 255)
	b.AutoButtonColor = true
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 8)
	corner.Parent = b
	b.Parent = buttonContainer
	return b
end

local viewButton = createButton("View Player")
local tpButton = createButton("Teleport to Player")
local bringButton = createButton("Bring Player") -- bagong button
local friendButton = createButton("Add Friend")

-- State
local selectedPlayer = nil
local isViewing = false
local isBringing = false
local originalCameraSubject = Camera.CameraSubject
local bringConnection

-- Helper: safely revert camera
local function revertCamera()
	if originalCameraSubject and typeof(originalCameraSubject) == "Instance" and originalCameraSubject.Parent then
		Camera.CameraSubject = originalCameraSubject
	else
		if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
			Camera.CameraSubject = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
		end
	end
	Camera.CameraType = Enum.CameraType.Custom
	isViewing = false
	viewButton.Text = "View Player"
end

-- Build player list
local function refreshPlayerList()
	for _, c in ipairs(scroll:GetChildren()) do
		if c:IsA("TextButton") then c:Destroy() end
	end
	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer then
			local btn = Instance.new("TextButton")
			btn.Size = UDim2.new(1, -8, 0, 28)
			btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
			btn.TextColor3 = Color3.fromRGB(255, 255, 255)
			btn.Font = Enum.Font.Gotham
			btn.TextSize = 16
			btn.AutoButtonColor = true
			btn.Text = plr.Name
			local corner = Instance.new("UICorner")
			corner.CornerRadius = UDim.new(0, 4)
			corner.Parent = btn
			btn.Parent = scroll
			btn.MouseButton1Click:Connect(function()
				selectedPlayer = plr
				nameLabel.Text = "Name: " .. plr.Name
				local humanoid = plr.Character and plr.Character:FindFirstChildOfClass("Humanoid")
				if humanoid then
					healthLabel.Text = "Health: " .. math.floor(humanoid.Health)
				else
					healthLabel.Text = "Health: N/A"
				end
				if isViewing then revertCamera() end
			end)
		end
	end
end

-- Button behaviors
viewButton.MouseButton1Click:Connect(function()
	if not selectedPlayer then return end
	local char = selectedPlayer.Character
	local humanoid = char and char:FindFirstChildOfClass("Humanoid")
	if not humanoid then return end
	if not isViewing then
		originalCameraSubject = Camera.CameraSubject
		Camera.CameraSubject = humanoid
		Camera.CameraType = Enum.CameraType.Custom
		isViewing = true
		viewButton.Text = "Unview Player"
	else
		revertCamera()
	end
end)

tpButton.MouseButton1Click:Connect(function()
	if not selectedPlayer then return end
	local targetHRP = selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart")
	local myHRP = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
	if targetHRP and myHRP then
		myHRP.CFrame = targetHRP.CFrame + Vector3.new(2, 0.5, 0)
	end
end)

bringButton.MouseButton1Click:Connect(function()
	if not selectedPlayer then return end
	if not isBringing then
		isBringing = true
		bringButton.Text = "Unbring Player"
		bringConnection = RunService.RenderStepped:Connect(function()
			local targetChar = selectedPlayer.Character
			local myChar = LocalPlayer.Character
			if targetChar and myChar then
				local targetHRP = targetChar:FindFirstChild("HumanoidRootPart")
				local myHRP = myChar:FindFirstChild("HumanoidRootPart")
				if targetHRP and myHRP then
					targetHRP.CFrame = myHRP.CFrame + Vector3.new(2, 0, 0)
				end
			end
		end)
	else
		isBringing = false
		bringButton.Text = "Bring Player"
		if bringConnection then bringConnection:Disconnect() end
	end
end)

friendButton.MouseButton1Click:Connect(function()
	if selectedPlayer then
		LocalPlayer:RequestFriendship(selectedPlayer)
	end
end)

-- Keep health label updated
RunService.Heartbeat:Connect(function()
	if selectedPlayer then
		local humanoid = selectedPlayer.Character and selectedPlayer.Character:FindFirstChildOfClass("Humanoid")
		if humanoid then
			healthLabel.Text = "Health: " .. math.floor(humanoid.Health)
		else
			healthLabel.Text = "Health: N/A"
		end
	end
end)

Players.PlayerRemoving:Connect(function(plr)
	if plr == selectedPlayer then
		selectedPlayer = nil
		nameLabel.Text = "Name: None"
		healthLabel.Text = "Health: N/A"
		if isViewing then revertCamera() end
	end
	refreshPlayerList()
end)

Players.PlayerAdded:Connect(function()
	refreshPlayerList()
end)

refreshPlayerList()
end)

--// Function to Add Buttons to Main Menu
local function addMainMenuButton(text, callback)
	local panel = tabPanels["MONSY MENU"]
	if not panel then return end

	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, -20, 0, 36)
	button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	button.TextColor3 = Color3.new(1, 1, 1)
	button.Font = Enum.Font.GothamSemibold
	button.TextSize = 14
	button.Text = text
	button.AutoButtonColor = false
	button.Parent = panel
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

	button.MouseEnter:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)
	button.MouseLeave:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {
			BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		}):Play()
	end)

	button.MouseButton1Click:Connect(function()
		clickSound:Play()
		callback()
	end)
end

--// 8 Buttons in Main Menu
addMainMenuButton("FPS BOOST CARTOON [3KTG]", function()
	--// FPS BOOST + CARTOON STYLE (ALL BLACK GUI VERSION)
-- Black Frame + Black Button + White Text + Rounded Corners

--// Services
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")

--// GUI
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local Button = Instance.new("TextButton")
local UICorner = Instance.new("UICorner")
local BtnCorner = Instance.new("UICorner")
local UIStroke = Instance.new("UIStroke")

ScreenGui.Name = "FPSBoostCartoon"
ScreenGui.Parent = game.CoreGui

-- Main Frame
Frame.Size = UDim2.new(0, 220, 0, 120)
Frame.Position = UDim2.new(0.4, 0, 0.3, 0)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BackgroundTransparency = 0.2
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = Frame

-- Title
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundTransparency = 1
Title.Text = "FPS BOOST"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.Parent = Frame

-- Button
Button.Size = UDim2.new(1, -40, 0, 40)
Button.Position = UDim2.new(0, 20, 0, 60)
Button.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- black button
Button.TextColor3 = Color3.fromRGB(255, 255, 255) -- white text
Button.Font = Enum.Font.GothamBold
Button.TextSize = 18
Button.Text = "ENABLE CARTOON"
Button.Parent = Frame

BtnCorner.CornerRadius = UDim.new(0, 6)
BtnCorner.Parent = Button

UIStroke.Thickness = 2
UIStroke.Color = Color3.fromRGB(255, 255, 255)
UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
UIStroke.Parent = Button

--// State
local BoostEnabled = false

--// Functions
local function applyCartoon()
	-- Lighting tweaks
	Lighting.GlobalShadows = false
	Lighting.FogEnd = 100000
	Lighting.Brightness = 2
	Lighting.EnvironmentDiffuseScale = 0
	Lighting.EnvironmentSpecularScale = 0
	Lighting.Ambient = Color3.fromRGB(255, 255, 255)
	Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)

	-- Remove sky + effects
	for _, v in ipairs(Lighting:GetChildren()) do
		if v:IsA("Sky") then
			v:Destroy()
		elseif v:IsA("BlurEffect") or v:IsA("SunRaysEffect") or v:IsA("ColorCorrectionEffect") or v:IsA("BloomEffect") then
			v.Enabled = false
		end
	end

	-- Cartoonify objects
	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj:IsA("Part") or obj:IsA("MeshPart") then
			obj.Material = Enum.Material.SmoothPlastic
			obj.Reflectance = 0
		elseif obj:IsA("Decal") or obj:IsA("Texture") then
			obj:Destroy()
		end
	end

	-- Apply sa bagong spawn characters
	Players.PlayerAdded:Connect(function(player)
		player.CharacterAdded:Connect(function(char)
			task.wait(1)
			for _, obj in ipairs(char:GetDescendants()) do
				if obj:IsA("Part") or obj:IsA("MeshPart") then
					obj.Material = Enum.Material.SmoothPlastic
					obj.Reflectance = 0
				elseif obj:IsA("Decal") or obj:IsA("Texture") then
					obj:Destroy()
				end
			end
		end)
	end)
end

local function resetGraphics()
	-- Default lighting reset
	Lighting.GlobalShadows = true
	Lighting.Brightness = 3
	Lighting.FogEnd = 100000
	Lighting.Ambient = Color3.fromRGB(128, 128, 128)
	Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)

	-- Enable effects back
	for _, v in ipairs(Lighting:GetChildren()) do
		if v:IsA("BlurEffect") or v:IsA("SunRaysEffect") or v:IsA("ColorCorrectionEffect") or v:IsA("BloomEffect") then
			v.Enabled = true
		end
	end
end

--// Toggle
Button.MouseButton1Click:Connect(function()
	BoostEnabled = not BoostEnabled
	if BoostEnabled then
		applyCartoon()
		Button.Text = "DISABLE CARTOON"
	else
		resetGraphics()
		Button.Text = "ENABLE CARTOON"
	end
end)
end)

addMainMenuButton("AUTO FARM [3KTG]", function()
	local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

local DeliveryJob = workspace:WaitForChild("DeliveryJob"):WaitForChild("BoxPickingJob")
local pickupPrompt = DeliveryJob:WaitForChild("PickupBox"):WaitForChild("PickupPrompt")
local dropPrompt = DeliveryJob:WaitForChild("Job"):WaitForChild("Part"):WaitForChild("ProximityPrompt")

-- GUI Creation
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 200, 0, 90)
MainFrame.Position = UDim2.new(0.5, -100, 0.75, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

local UICornerFrame = Instance.new("UICorner")
UICornerFrame.CornerRadius = UDim.new(0, 8)
UICornerFrame.Parent = MainFrame

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(1, 0, 0, 30)
TitleLabel.Position = UDim2.new(0, 0, 0, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.Font = Enum.Font.SourceSansBold
TitleLabel.TextSize = 18
TitleLabel.Text = "AUTO FARM BOX"
TitleLabel.Parent = MainFrame

local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(1, -20, 0, 40)
ToggleButton.Position = UDim2.new(0, 10, 0, 40)
ToggleButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.TextSize = 20
ToggleButton.Text = "Auto Farm : OFF"
ToggleButton.Parent = MainFrame
ToggleButton.Active = true

local UICornerButton = Instance.new("UICorner")
UICornerButton.CornerRadius = UDim.new(0, 8)
UICornerButton.Parent = ToggleButton

-- Script Logic
local running = false

-- Instant walk function (teleport close enough, no tween)
local function walkToInstant(part)
    local goalCFrame = part.CFrame + Vector3.new(0, 0, -3)
    hrp.CFrame = goalCFrame
end

local function activatePrompt(prompt)
    walkToInstant(prompt.Parent)
    task.wait(0.2)

    if prompt:FindFirstChild("PromptButtonHoldBegan") then
        prompt.PromptButtonHoldBegan:Fire()
        task.wait(1.4) -- Fixed hold duration
        prompt.PromptButtonHoldEnded:Fire()
    else
        if fireproximityprompt then
            fireproximityprompt(prompt)
        else
            warn("Can't trigger prompt!")
        end
    end
end

-- Toggle button click event
ToggleButton.MouseButton1Click:Connect(function()
    running = not running
    if running then
        ToggleButton.Text = "Auto Farm: ON"
        -- Start the loop
        spawn(function()
            while running do
                repeat task.wait(0.4) until pickupPrompt.Enabled and running
                if not running then break end

                activatePrompt(pickupPrompt)
                if not running then break end

                activatePrompt(dropPrompt)
                if not running then break end

                task.wait(0.8)
            end
        end)
    else
        ToggleButton.Text = "Auto Farm: OFF"
    end
end)
end)

addMainMenuButton("LASPINAS SYSTEM [3KTG]", function()
	--// Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UIS = game:GetService("UserInputService")

local player = Players.LocalPlayer

--// GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "GiveAllCashGUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Position = UDim2.new(0.5, -130, 0.5, -160)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BorderSizePixel = 1
frame.BorderColor3 = Color3.fromRGB(40, 40, 40)
frame.Parent = gui
frame.Active = true
frame.Draggable = true

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
title.Text = "LAS PINAS ROLEPLAY"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame
Instance.new("UICorner", title).CornerRadius = UDim.new(0, 8)

-- List of items to buy
local items = {
    {"Silenced Pistol", "Silenced Pistol"},
    {"Heavy Vest", "Heavy Vest"},
    {"Glock-19", "Glock-19"},
    {"Oxy", "Oxy"},
    {"Vector", "Vector"},
    {"Tail", "Tail"},
    {"AmmoBox", "AmmoBox"}
}

local selectedItem = nil

-- Dropdown Button
local dropdown = Instance.new("TextButton")
dropdown.Size = UDim2.new(1, -20, 0, 30)
dropdown.Position = UDim2.new(0, 10, 0, 50)
dropdown.Text = "Select Item"
dropdown.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdown.TextColor3 = Color3.new(1, 1, 1)
dropdown.Font = Enum.Font.Gotham
dropdown.TextSize = 14
dropdown.Parent = frame
Instance.new("UICorner", dropdown).CornerRadius = UDim.new(0, 6)

-- Dropdown Frame
local itemHeight = 28
local dropdownHeight = #items * itemHeight
local dropdownFrame = Instance.new("Frame")
dropdownFrame.Size = UDim2.new(1, -20, 0, dropdownHeight)
dropdownFrame.Position = UDim2.new(0, 10, 0, 85)
dropdownFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dropdownFrame.Visible = false
dropdownFrame.Parent = frame
Instance.new("UICorner", dropdownFrame).CornerRadius = UDim.new(0, 5)

-- Dropdown Buttons
for i, item in ipairs(items) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 0, itemHeight)
    btn.Position = UDim2.new(0, 0, 0, (i - 1) * itemHeight)
    btn.Text = item[1]
    btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 12
    btn.Parent = dropdownFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)

    btn.MouseButton1Click:Connect(function()
        selectedItem = item[2]
        dropdown.Text = item[1]
        dropdownFrame.Visible = false
    end)
end

-- Toggle Dropdown
dropdown.MouseButton1Click:Connect(function()
    dropdownFrame.Visible = not dropdownFrame.Visible
end)

-- Auto Buy Button
local toggle = Instance.new("TextButton")
toggle.Size = UDim2.new(1, -20, 0, 35)
toggle.Position = UDim2.new(0, 10, 0, 100 + dropdownHeight)
toggle.Text = "Start Auto Buy"
toggle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggle.TextColor3 = Color3.new(1, 1, 1)
toggle.Font = Enum.Font.GothamBold
toggle.TextSize = 14
toggle.Parent = frame
Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 6)

-- Auto adjust frame height
local padding = 140 -- title + spacing + toggle
local frameHeight = padding + dropdownHeight
frame.Size = UDim2.new(0, 260, 0, frameHeight)

-- Auto Buy Logic
local isAutoBuying = false
toggle.MouseButton1Click:Connect(function()
    isAutoBuying = not isAutoBuying
    toggle.Text = isAutoBuying and "Stop Auto Buy" or "Start Auto Buy"
    
    while isAutoBuying do
        if selectedItem then
            ReplicatedStorage.ShopRemotes["BuyItem_de6c2c54-2975-4f1d-8efe-cb914d8a077c"]:FireServer(selectedItem, -100000)
            print("Auto-buying " .. selectedItem)
        end
        task.wait(0.001)
    end
end)

-- RightShift toggle GUI
UIS.InputBegan:Connect(function(input, gpe)
    if not gpe and input.KeyCode == Enum.KeyCode.RightShift then
        gui.Enabled = not gui.Enabled
    end
end)
end)

addMainMenuButton("ADJUSTABLE BIG HEAD [3KTG]", function()
   --// CONFIG
_G.HeadSize = 1 -- Start at 1x size
_G.Disabled = true -- Start disabled

--// SERVICES
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")

--// ORIGINAL STORAGE
local OriginalSizes = {}
local OriginalTrans = {}
local OriginalBrickColor = {}
local OriginalMaterial = {}
local OriginalCanCollide = {}
local OriginalMassless = {}

--// APPLY FUNCTION
local function updateHead(head, player)
    if head and player ~= LocalPlayer then
        local key = player
        if not OriginalSizes[key] then
            OriginalSizes[key] = head.Size
            OriginalTrans[key] = head.Transparency
            OriginalBrickColor[key] = head.BrickColor
            OriginalMaterial[key] = head.Material
            OriginalCanCollide[key] = head.CanCollide
            OriginalMassless[key] = head.Massless
        end
        if not _G.Disabled then
            head.Size = Vector3.new(_G.HeadSize, _G.HeadSize, _G.HeadSize)
            head.Transparency = 0.4
            head.BrickColor = BrickColor.new("Red")
            head.Material = Enum.Material.Neon
            head.CanCollide = false
            head.Massless = true
        else
            -- Restore original properties when disabled
            head.Size = OriginalSizes[key]
            head.Transparency = OriginalTrans[key]
            head.BrickColor = OriginalBrickColor[key]
            head.Material = OriginalMaterial[key]
            head.CanCollide = OriginalCanCollide[key]
            head.Massless = OriginalMassless[key]
        end
    end
end

--// UPDATE LOOP
RunService.RenderStepped:Connect(function()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            local head = player.Character:FindFirstChild("Head")
            if head then
                pcall(function()
                    updateHead(head, player)
                end)
            end
        end
    end
end)

--// INITIAL AND CONNECTIONS
for _, player in pairs(Players:GetPlayers()) do
    if player ~= LocalPlayer then
        if player.Character then
            local head = player.Character:FindFirstChild("Head")
            if head then
                updateHead(head, player)
            end
        end
        player.CharacterAdded:Connect(function(char)
            char:WaitForChild("Head")
            updateHead(char.Head, player)
        end)
    end
end

Players.PlayerAdded:Connect(function(player)
    if player ~= LocalPlayer then
        player.CharacterAdded:Connect(function(char)
            char:WaitForChild("Head")
            updateHead(char.Head, player)
        end)
    end
end)

--// GUI SETUP
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local SliderBack = Instance.new("Frame")
local SliderFill = Instance.new("Frame")
local SliderButton = Instance.new("TextButton")
local SizeLabel = Instance.new("TextLabel")
local ToggleButton = Instance.new("TextButton")

ScreenGui.Parent = game.CoreGui

-- Frame
Frame.Size = UDim2.new(0, 220, 0, 140)
Frame.Position = UDim2.new(0, 50, 0, 50)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- All black
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

-- Title
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.Text = "BIG HEAD SCRIPT"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 16
Title.Font = Enum.Font.SourceSansBold
Title.Parent = Frame

-- Slider background
SliderBack.Size = UDim2.new(0.8, 0, 0, 6)
SliderBack.Position = UDim2.new(0.1, 0, 0.35, 0)
SliderBack.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- All black
SliderBack.BorderSizePixel = 0
SliderBack.Parent = Frame

-- Slider fill
SliderFill.Size = UDim2.new(0, 0, 1, 0) -- Initial for 1x ( (1-1)/9 = 0 )
SliderFill.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- White fill
SliderFill.BorderSizePixel = 0
SliderFill.Parent = SliderBack

-- Slider button
SliderButton.Size = UDim2.new(0, 20, 0, 20)
SliderButton.Position = UDim2.new(0, -10, 0.5, -10) -- Initial for 1x
SliderButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- White button
SliderButton.Text = ""
SliderButton.BorderSizePixel = 0
SliderButton.Parent = SliderBack

-- Size text display
SizeLabel.Size = UDim2.new(1, 0, 0, 20)
SizeLabel.Position = UDim2.new(0, 0, 0.45, 0)
SizeLabel.BackgroundTransparency = 1
SizeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
SizeLabel.TextSize = 14
SizeLabel.Font = Enum.Font.SourceSans
SizeLabel.Text = "Size: " .. string.format("%.1f", _G.HeadSize)
SizeLabel.Parent = Frame

-- Toggle button for Enable/Disable
ToggleButton.Size = UDim2.new(0.8, 0, 0, 30)
ToggleButton.Position = UDim2.new(0.1, 0, 0.7, 0)
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Black
ToggleButton.BorderColor3 = Color3.fromRGB(0, 0, 0) -- Black border
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextSize = 14
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.Text = "Disabled: On"
ToggleButton.Parent = Frame

-- Size slider logic
local dragging = false

local function updateSize(percent)
    percent = math.clamp(percent, 0, 1)
    SliderFill.Size = UDim2.new(percent, 0, 1, 0)
    SliderButton.Position = UDim2.new(percent, -10, 0.5, -10)
    local newSize = 1 + percent * 9  -- 1 to 10 range
    _G.HeadSize = newSize
    SizeLabel.Text = "Size: " .. string.format("%.1f", newSize)
end

SliderButton.MouseButton1Down:Connect(function()
    dragging = true
end)

UIS.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

UIS.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local mousePos = UIS:GetMouseLocation()
        local percent = (mousePos.X - SliderBack.AbsolutePosition.X) / SliderBack.AbsoluteSize.X
        updateSize(percent)
    end
end)

-- Toggle Enable/Disable
ToggleButton.MouseButton1Click:Connect(function()
    _G.Disabled = not _G.Disabled
    if _G.Disabled then
        ToggleButton.Text = "Disabled: On"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Black
        ToggleButton.BorderColor3 = Color3.fromRGB(0, 0, 0) -- Black border
    else
        ToggleButton.Text = "Disabled: Off"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Black
        ToggleButton.BorderColor3 = Color3.fromRGB(0, 0, 0) -- Black border
    end
end)

-- Initial setup
updateSize((_G.HeadSize - 1) / 9)
end)

-- Particle Snow Effect inside main GUI
local function createSnowParticle()
    local particle = Instance.new("ImageLabel")
    particle.Size = UDim2.new(0, 4, 0, 4)
    particle.BackgroundTransparency = 1
    particle.Image = "rbxassetid://7072718362" -- small white dot
    particle.ImageColor3 = Color3.new(1, 1, 1)
    particle.Position = UDim2.new(math.random(), 0, 0, -5)
    particle.ZIndex = 10
    particle.Parent = main

    local endPos = UDim2.new(particle.Position.X.Scale, 0, 1, 5)
    local tween = TweenService:Create(particle, TweenInfo.new(math.random(3,5)), {Position = endPos, ImageTransparency = 1})
    tween:Play()
    tween.Completed:Connect(function()
        particle:Destroy()
    end)
end

-- Loop particles
task.spawn(function()
    while gui.Parent do
        createSnowParticle()
        task.wait(0.1)
    end
end)

-- Bottom Menu Bar (Home / Grid / Settings / Executor)
local BottomBar = Instance.new("Frame")
BottomBar.Size = UDim2.new(1, 0, 0, 40)
BottomBar.Position = UDim2.new(0, 0, 1, -40)
BottomBar.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
BottomBar.BorderSizePixel = 0
BottomBar.Parent = main

local BottomCorner = Instance.new("UICorner", BottomBar)
BottomCorner.CornerRadius = UDim.new(0, 10)

local UIList = Instance.new("UIListLayout")
UIList.FillDirection = Enum.FillDirection.Horizontal
UIList.HorizontalAlignment = Enum.HorizontalAlignment.Center
UIList.VerticalAlignment = Enum.VerticalAlignment.Center
UIList.Padding = UDim.new(0, 26)
UIList.Parent = BottomBar

local function CreateBottomBtn(txt)
    local Btn = Instance.new("TextButton")
    Btn.Size = UDim2.new(0, 44, 0, 28)
    Btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Btn.Text = txt
    Btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    Btn.Font = Enum.Font.GothamBold
    Btn.TextSize = 20
    Btn.Parent = BottomBar

    local BtnCorner = Instance.new("UICorner", Btn)
    BtnCorner.CornerRadius = UDim.new(0, 6)

    return Btn
end

-- Bottom buttons
local HomeBtn = CreateBottomBtn("ðŸ–¤")
local GridBtn = CreateBottomBtn("â–¦")
local SettingsBtn = CreateBottomBtn("âš™")
local CodeBtn = CreateBottomBtn("</>")

-- Pages inside MainFrame
local ScrollFrame = tabHolder -- Assuming ScrollFrame is the tabHolder for Main Menu
local SettingsPage = Instance.new("Frame")
SettingsPage.Size = UDim2.new(1, -20, 1, -70)
SettingsPage.Position = UDim2.new(0, 10, 0, 30)
SettingsPage.BackgroundTransparency = 1
SettingsPage.Visible = false
SettingsPage.Parent = main

local ExecutorPage = Instance.new("Frame")
ExecutorPage.Size = UDim2.new(1, -20, 1, -70)
ExecutorPage.Position = UDim2.new(0, 10, 0, 30)
ExecutorPage.BackgroundTransparency = 1
ExecutorPage.Visible = false
ExecutorPage.Parent = main

local GridPage = Instance.new("Frame")
GridPage.Size = UDim2.new(1, -20, 1, -70)
GridPage.Position = UDim2.new(0, 10, 0, 30)
GridPage.BackgroundTransparency = 1
GridPage.Visible = false
GridPage.Parent = main

local function makePage(titleText, page)
    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, 0, 0, 30)
    Title.BackgroundTransparency = 1
    Title.Text = titleText
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 16
    Title.Parent = page
    return page
end

SettingsPage = makePage("âš™ Settings", SettingsPage)
ExecutorPage = makePage("</> Script Executor", ExecutorPage)
GridPage = makePage("â–¦ Grid", GridPage)

-- ========== SETTINGS PAGE CONTENT ==========
local sliderTrack = Instance.new("Frame")
sliderTrack.Size = UDim2.new(0, 240, 0, 12)
sliderTrack.Position = UDim2.new(0, 10, 0, 40)
sliderTrack.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
sliderTrack.Parent = SettingsPage
local sliderCorner = Instance.new("UICorner", sliderTrack)
sliderCorner.CornerRadius = UDim.new(0, 6)

local sliderKnob = Instance.new("TextButton")
sliderKnob.Size = UDim2.new(0, 12, 0, 20)
sliderKnob.Position = UDim2.new(0, 0, 0.5, -10)
sliderKnob.AutoButtonColor = false
sliderKnob.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
sliderKnob.Parent = sliderTrack
local knobCorner = Instance.new("UICorner", sliderKnob)
knobCorner.CornerRadius = UDim.new(0, 4)

local transparencyLabel = Instance.new("TextLabel")
transparencyLabel.Size = UDim2.new(0, 200, 0, 22)
transparencyLabel.Position = UDim2.new(0, 10, 0, 12)
transparencyLabel.BackgroundTransparency = 1
transparencyLabel.Text = "Transparency: 0%"
transparencyLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
transparencyLabel.Font = Enum.Font.Gotham
transparencyLabel.TextSize = 14
transparencyLabel.Parent = SettingsPage

local sliderMaxTransparency = 1
local draggingSlider = false
local function setTransparency(percent)
    percent = math.clamp(percent, 0, 1)
    local mapped = percent * sliderMaxTransparency
    main.BackgroundTransparency = mapped
    for _, f in ipairs({sideBar, topBar, tabHolder, BottomBar}) do
        if f and f.Parent then
            f.BackgroundTransparency = mapped * 0.2
        end
    end
    transparencyLabel.Text = string.format("Transparency: %d%%", math.floor(percent * 100))
end

setTransparency(0)

sliderKnob.MouseButton1Down:Connect(function()
    draggingSlider = true
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        draggingSlider = false
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if draggingSlider and input.UserInputType == Enum.UserInputType.MouseMovement then
        local trackPos = sliderTrack.AbsolutePosition.X
        local trackSize = sliderTrack.AbsoluteSize.X
        local mouseX = UserInputService:GetMouseLocation().X
        local newX = math.clamp(mouseX - trackPos, 0, trackSize)
        sliderKnob.Position = UDim2.new(0, newX, 0.5, -10)
        local percent = 0
        if trackSize > 0 then
            percent = newX / trackSize
        end
        setTransparency(percent)
    end
end)

local keyLabel = Instance.new("TextLabel")
keyLabel.Size = UDim2.new(0, 200, 0, 22)
keyLabel.Position = UDim2.new(0, 10, 0, 80)
keyLabel.BackgroundTransparency = 1
keyLabel.Text = "Toggle Key: (none)"
keyLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
keyLabel.Font = Enum.Font.Gotham
keyLabel.TextSize = 14
keyLabel.Parent = SettingsPage

local KeybindBtn = Instance.new("TextButton")
KeybindBtn.Size = UDim2.new(0, 140, 0, 28)
KeybindBtn.Position = UDim2.new(0, 220, 0, 76)
KeybindBtn.Text = "Set Toggle Key"
KeybindBtn.Font = Enum.Font.Gotham
KeybindBtn.TextSize = 14
KeybindBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
KeybindBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
KeybindBtn.Parent = SettingsPage
local KeybindCorner = Instance.new("UICorner", KeybindBtn)
KeybindCorner.CornerRadius = UDim.new(0,6)

local capturingKey = false
local toggleKey = nil
KeybindBtn.MouseButton1Click:Connect(function()
    capturingKey = true
    KeybindBtn.Text = "Press any key..."
end)

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if capturingKey and input.UserInputType == Enum.UserInputType.Keyboard then
        capturingKey = false
        toggleKey = input.KeyCode
        KeybindBtn.Text = "Set Toggle Key"
        keyLabel.Text = "Toggle Key: " .. tostring(toggleKey.Name)
    elseif toggleKey and input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == toggleKey then
        main.Visible = not main.Visible
    end
end)

local colorPalette = Instance.new("Frame")
colorPalette.Size = UDim2.new(0, 260, 0, 32)
colorPalette.Position = UDim2.new(0, 10, 0, 120)
colorPalette.BackgroundTransparency = 1
colorPalette.Parent = SettingsPage

local paletteColors = {
    Color3.fromRGB(0, 0, 0),
    Color3.fromRGB(30, 30, 30),
    Color3.fromRGB(60, 60, 60),
    Color3.fromRGB(90, 90, 90),
    Color3.fromRGB(120, 120, 120),
    Color3.fromRGB(150, 150, 150),
}

local selectedColor = paletteColors[1]
local function updateAllButtonColors(color)
    selectedColor = color
    HomeBtn.BackgroundColor3 = color
    GridBtn.BackgroundColor3 = color
    SettingsBtn.BackgroundColor3 = color
    CodeBtn.BackgroundColor3 = color
end

local function createColorSwatch(c, x)
    local sw = Instance.new("TextButton")
    sw.Size = UDim2.new(0, 36, 0, 28)
    sw.Position = UDim2.new(0, (x-1)*42, 0, 0)
    sw.BackgroundColor3 = c
    sw.Text = ""
    sw.Parent = colorPalette
    local u = Instance.new("UICorner", sw)
    u.CornerRadius = UDim.new(0,6)
    sw.MouseButton1Click:Connect(function()
        selectedColor = c
        updateAllButtonColors(selectedColor)
    end)
end

for i, c in ipairs(paletteColors) do
    createColorSwatch(c, i)
end

local colorLabel = Instance.new("TextLabel")
colorLabel.Size = UDim2.new(0, 200, 0, 22)
colorLabel.Position = UDim2.new(0, 10, 0, 152)
colorLabel.Text = "UI Color:"
colorLabel.BackgroundTransparency = 1
colorLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
colorLabel.Font = Enum.Font.Gotham
colorLabel.TextSize = 14
colorLabel.Parent = SettingsPage

-- ========== EXECUTOR PAGE CONTENT ==========
local ExecTitle = Instance.new("TextLabel")
ExecTitle.Size = UDim2.new(1, 0, 0, 30)
ExecTitle.Position = UDim2.new(0, 0, 0, 0)
ExecTitle.BackgroundTransparency = 1
ExecTitle.Text = "</> Script Executor"
ExecTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
ExecTitle.Font = Enum.Font.GothamBold
ExecTitle.TextSize = 16
ExecTitle.Parent = ExecutorPage

local ScriptBox = Instance.new("TextBox")
ScriptBox.Size = UDim2.new(1, -20, 1, -130) -- Adjusted height for OutputLabel
ScriptBox.Position = UDim2.new(0, 10, 0, 40)
ScriptBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ScriptBox.Text = "-- Paste your Lua script here"
ScriptBox.TextColor3 = Color3.fromRGB(255, 255, 255)
ScriptBox.ClearTextOnFocus = false
ScriptBox.TextXAlignment = Enum.TextXAlignment.Left
ScriptBox.TextYAlignment = Enum.TextYAlignment.Top
ScriptBox.MultiLine = true
ScriptBox.TextWrapped = true -- Wrap long lines
ScriptBox.Font = Enum.Font.Code
ScriptBox.TextSize = 14
ScriptBox.Parent = ExecutorPage
local ScriptCorner = Instance.new("UICorner", ScriptBox)
ScriptCorner.CornerRadius = UDim.new(0, 6)

-- Output Label to show execution results
local OutputLabel = Instance.new("TextLabel")
OutputLabel.Size = UDim2.new(1, -20, 0, 40)
OutputLabel.Position = UDim2.new(0, 10, 1, -84)
OutputLabel.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
OutputLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
OutputLabel.BackgroundTransparency = 0
OutputLabel.Font = Enum.Font.Gotham
OutputLabel.TextSize = 12
OutputLabel.TextWrapped = true -- Wrap long output
OutputLabel.Text = "Output: Ready"
OutputLabel.Parent = ExecutorPage
local OutputCorner = Instance.new("UICorner", OutputLabel)
OutputCorner.CornerRadius = UDim.new(0, 6)

local ExecBtn = Instance.new("TextButton")
ExecBtn.Size = UDim2.new(0, 120, 0, 32)
ExecBtn.Position = UDim2.new(0, 10, 1, -44)
ExecBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ExecBtn.Text = "Execute"
ExecBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ExecBtn.Font = Enum.Font.GothamBold
ExecBtn.TextSize = 14
ExecBtn.Parent = ExecutorPage
local ExecCorner = Instance.new("UICorner", ExecBtn)
ExecCorner.CornerRadius = UDim.new(0, 6)

local ClearBtn = Instance.new("TextButton")
ClearBtn.Size = UDim2.new(0, 120, 0, 32)
ClearBtn.Position = UDim2.new(0, 140, 1, -44)
ClearBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ClearBtn.Text = "Clear"
ClearBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ClearBtn.Font = Enum.Font.GothamBold
ClearBtn.TextSize = 14
ClearBtn.Parent = ExecutorPage
local ClearCorner = Instance.new("UICorner", ClearBtn)
ClearCorner.CornerRadius = UDim.new(0, 6)

ExecBtn.MouseButton1Click:Connect(function()
    local code = ScriptBox.Text
    if code and #code > 0 then
        OutputLabel.Text = "Output: Executing..."
        local func, err = loadstring(code)
        if func then
            local success, result = pcall(func)
            if success then
                OutputLabel.Text = "Output: Script executed successfully!"
            else
                OutputLabel.Text = "Output: Error - " .. tostring(result)
            end
        else
            OutputLabel.Text = "Output: Loadstring Error - " .. tostring(err)
        end
    else
        OutputLabel.Text = "Output: No script to execute!"
    end
end)

ClearBtn.MouseButton1Click:Connect(function()
    ScriptBox.Text = ""
    OutputLabel.Text = "Output: Ready"
end)

-- ========== GRID PAGE CONTENT ==========
local GridImage = Instance.new("ImageLabel")
GridImage.Size = UDim2.new(1, -20, 1, -30)
GridImage.Position = UDim2.new(0, 10, 0, 40)
GridImage.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
GridImage.Image = "rbxassetid://135468920313973" -- Replace with your image ID (e.g., "rbxassetid://123456789")
GridImage.Parent = GridPage
local GridImageCorner = Instance.new("UICorner", GridImage)
GridImageCorner.CornerRadius = UDim.new(0, 6)

local function ShowPage(page)
    -- Hide all pages including tabHolder
    tabHolder.Visible = false
    SettingsPage.Visible = false
    ExecutorPage.Visible = false
    GridPage.Visible = false
    -- Hide all tab panels
    for _, panel in pairs(tabPanels) do
        panel.Visible = false
    end
    
    -- Toggle sidebar visibility
    if page == tabHolder then
        sideBar.Visible = true
        tabHolder.Visible = true
        -- Show the current tab panel
        if currentTab then
            tabPanels[currentTab].Visible = true
        end
    else
        sideBar.Visible = false
        page.Visible = true
    end
end

HomeBtn.MouseButton1Click:Connect(function()
    ShowPage(tabHolder) -- Shows the tabHolder (Main Menu)
end)

GridBtn.MouseButton1Click:Connect(function()
    ShowPage(GridPage)
end)

SettingsBtn.MouseButton1Click:Connect(function()
    ShowPage(SettingsPage)
end)

CodeBtn.MouseButton1Click:Connect(function()
    ShowPage(ExecutorPage)
end)

ShowPage(tabHolder) -- Default to Main Menu

updateAllButtonColors(selectedColor)
end
--=== End Embedded GUI Script ===--

-- Submit Button Logic
Submit.MouseButton1Click:Connect(function()
    if TextBox.Text == correctKey then
        print("âœ… Correct key! Showing loading screen...")

        -- Feedback text
        pcall(function()
            Submit.Text = "Loading..."
        end)

        -- Close key UI
        pcall(function()
            KeyGui:Destroy()
        end)

        -- Run GUI (with loading screen inside)
        pcall(function()
            runGUI()
        end)
    else
        Submit.Text = "âŒ Wrong Key!"
        task.delay(1.5, function()
            pcall(function() Submit.Text = "Submit" end)
        end)
    end
end)
